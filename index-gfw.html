<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>GFW API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #272822;
  background-color: #f92672;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #75715e;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #f8f8f2;
}
.highlight .p, .highlight .pi {
  color: #f8f8f2;
}
.highlight .gi {
  color: #a6e22e;
}
.highlight .gd {
  color: #f92672;
}
.highlight .gh {
  color: #66d9ef;
  background-color: #272822;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #ae81ff;
}
.highlight .kc {
  color: #fd971f;
}
.highlight .kt {
  color: #fd971f;
}
.highlight .kd {
  color: #fd971f;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #a6e22e;
}
.highlight .sr {
  color: #a1efe4;
}
.highlight .si {
  color: #cc6633;
}
.highlight .se {
  color: #cc6633;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #66d9ef;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #a6e22e;
}
.highlight .ss {
  color: #a6e22e;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index-gfw gfw" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo-gfw.png" alt="Logo gfw" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://ui.resourcewatch.org'>Sign Up for a Developer Key</a></li>
            <li><a href='https://github.com/resource-watch/doc-api'>Contribute to these docs</a></li>
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="rw-api-overview">RW API Overview</h1>

<p>Welcome to the Resource Watch API Documentation. In the sections below, you&rsquo;ll find all the information you need to get started using the RW API.</p>

<h2 id="about-these-docs">About these docs</h2>

<p>This documentation page aims to cover the Resource Watch API functionality and details. In it, you&rsquo;ll find a top-level description of the services it provides, as well as a breakdown of the different endpoints, their functionality, parameters and output. The goal is to give you the tools to create powerful applications and data products.</p>

<p>The RW API is <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> and <a href="https://en.wikipedia.org/wiki/JSON">JSON</a> based, and these docs assume you are familiar with both technologies. Besides endpoint descriptions, the documentation will include example code snippets that use <a href="https://en.wikipedia.org/wiki/CURL">cURL</a> to illustrate how you would use each endpoint. Knowing the basics of cURL will help you better understand those examples. </p>

<p>For readability, URLs and query parameters may be displayed without escaping/encoding, but be sure to encode your URLs before issuing a request to the API, or it may produce undesired results. If you are using the RW API to build your own application, there&rsquo;s probably a library out there that does this for you automatically.</p>

<p>In these examples, you&rsquo;ll also find references to a <code class="prettyprint">Authorization: Bearer &lt;your-token&gt;</code> HTTP header. You can find more details about tokens in the <a href="#authentication">authentication</a> section, which you should read before you get started.   </p>

<p>Last but not least, the RW API and its docs are made by humans, who will occasionally make mistakes. If you find something that you think is incorrect, could be improved, if you want to contribute yourself, or just want to say &ldquo;thank you&rdquo;, you can reach us through <a href="https://github.com/resource-watch/doc-api">the RW API documentation Github project page</a>.</p>

<h2 id="before-you-get-started">Before you get started</h2>

<p>This section covers a list of topics you should be familiar with before using the API. The concepts described in this section span across multiple API endpoints and are fundamental for a better understanding of how to interact with the RW API.</p>

<h3 id="applications">Applications</h3>

<p>As you might come across while reading these docs, different applications and websites rely on the RW API as the principal source for their data. While navigating through the catalog of available datasets, you will find some datasets used by the <a href="https://resourcewatch.org/">Resource Watch website</a>, others used by <a href="https://www.globalforestwatch.org/">Global Forest Watch</a>. In many cases, applications even share the same datasets!</p>

<p>To ensure the correct separation of content across the different applications that use the RW API, you will come across a field named <code class="prettyprint">application</code> in many of the API&rsquo;s resources (such as datasets, layers, widgets, and others). Using this field, the RW API allows users to namespace every single resource, so that it&rsquo;s associated only with the applications that use it.</p>

<h4 id="existing-applications">Existing applications</h4>

<p>Currently, the following applications are using the API as the principal source for their data:</p>

<ul>
<li>the <a href="https://resourcewatch.org/">Resource Watch website</a>, where the <code class="prettyprint">application</code> field takes the value <code class="prettyprint">rw</code>;</li>
<li>the <a href="https://www.globalforestwatch.org/">Global Forest Watch website</a>, where the <code class="prettyprint">application</code> field takes the value <code class="prettyprint">gfw</code>;</li>
<li>the <a href="https://prepdata.org/">Partnership for Resilience and Preparedness website</a>, where the <code class="prettyprint">application</code> field takes the value <code class="prettyprint">prep</code>;</li>
<li>the <a href="https://www.wri.org/our-work/project/forest-atlases">Forest Atlases websites</a> for different countries of the world also rely on the RW API - in the case of these websites, the <code class="prettyprint">application</code> field takes the value <code class="prettyprint">forest-atlas</code>;</li>
<li>the <a href="https://forestwatcher.globalforestwatch.org/">Forest Watcher mobile application</a>, where the <code class="prettyprint">application</code> field takes the value <code class="prettyprint">fw</code>;</li>
</ul>

<p>If you would like to see your application added to the list of applications supported by the RW API, please contact us.</p>

<h3 id="best-practices-for-the-application-field">Best practices for the application field</h3>

<blockquote>
<p>Fetching datasets for the Resource Watch application</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?application<span class="o">=</span>rw
</code></pre>
<blockquote>
<p>Fetching datasets for the Global Forest Watch application</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?application<span class="o">=</span>gfw
</code></pre>
<p>This section describes some best practices when using the <code class="prettyprint">application</code> field. Please keep in mind that, since it is up to each RW API service to implement how this field is used, there might be some differences in the usage of this field between RW API services. Refer to each RW API resource or endpoint&rsquo;s documentation for more details on each specific case.</p>

<p>As a rule of thumb, the <code class="prettyprint">application</code> field is an array of strings, required when creating an RW API resource that uses it. You can edit the <code class="prettyprint">application</code> values by editing the RW API resource you are managing. You can then use the <code class="prettyprint">application</code> field as a query parameter filter to filter content specific to the given application (check some examples of the usage of the <code class="prettyprint">application</code> field when fetching RW API datasets on the side).</p>

<p><a href="index-rw.html#user-management">RW API users</a> also use the <code class="prettyprint">application</code> field and can be associated with multiple applications. In this case, the <code class="prettyprint">application</code> field is used to determine which applications a user manages (access management). As you&rsquo;ll be able to understand from reading <a href="#general-notes-on-rw-api-users">General notes on RW API users</a>, each user&rsquo;s <code class="prettyprint">application</code> values are used to determine if a given user can administrate an RW API resource. Typically, to manipulate said RW API resource, that resource, and the user account, must have at least one overlapping value in the <code class="prettyprint">application</code> field.</p>

<h4 id="which-services-comply-with-these-guidelines">Which services comply with these guidelines</h4>

<p>Below you can find a list of RW API resources that use the <code class="prettyprint">application</code> field:</p>

<ul>
<li><a href="index-rw.html#areas">Areas v1</a></li>
<li><a href="index-rw.html#areas-v2">Areas v2</a></li>
<li><a href="index-rw.html#collections">Collections</a></li>
<li><a href="index-rw.html#dashboard">Dashboards</a></li>
<li><a href="index-rw.html#dataset6">Dataset</a></li>
<li><a href="index-rw.html#graph">Graph</a></li>
<li><a href="index-rw.html#layer8">Layer</a></li>
<li><a href="index-rw.html#metadata14">Metadata</a></li>
<li><a href="index-rw.html#subscriptions">Subscriptions</a></li>
<li><a href="index-rw.html#topic">Topics</a></li>
<li><a href="index-rw.html#user-management">Users</a></li>
<li><a href="index-rw.html#vocabulary-and-tags">Vocabulary</a></li>
<li><a href="index-rw.html#widget9">Widgets</a></li>
</ul>

<h3 id="environments">Environments</h3>

<p>Certain RW API resources, like datasets, layers, or widgets, use the concept of <code class="prettyprint">environment</code> (also called <code class="prettyprint">env</code>) as a way to help you manage your data&rsquo;s lifecycle. The main goal of <code class="prettyprint">environments</code> is to give you an easy way to separate data that is ready to be used in production-grade interactions from data that is still being improved on.</p>

<p>When you create a new resource, like a dataset, it&rsquo;s given the <code class="prettyprint">production</code> env value by default. Similarly, if you list datasets, there&rsquo;s an implicit default filter that only returns datasets whose <code class="prettyprint">env</code> value is <code class="prettyprint">production</code>. This illustrates two key concepts of <code class="prettyprint">environments</code>:</p>

<ul>
<li>By default, when you create data on the RW API, it assumes it&rsquo;s in a production-ready state.</li>
<li>By default, when you list resources from the RW API, it assumes you want only to see production-ready data.</li>
</ul>

<p>However, you may want to modify this behavior. For example, let&rsquo;s say you want to create a new widget on the RW API and experiment with different configuration options without displaying it publicly. To achieve this, you can set a different <code class="prettyprint">environment</code> on your widget - for example, <code class="prettyprint">test</code>. Or you may want to deploy a staging version of your application that also relies on the same RW API but displays a different set of resources. You can set those resources to use the <code class="prettyprint">staging</code> environment and have your application load only that environment, or load both <code class="prettyprint">production</code> and <code class="prettyprint">staging</code> resources simultaneously. Keep in mind that <code class="prettyprint">production</code> is the only &ldquo;special&rdquo; value for the <code class="prettyprint">environment</code> field. Apart from it, the <code class="prettyprint">environment</code> can take any value you want, without having any undesired side-effects.</p>

<p>Resources that use <code class="prettyprint">environment</code> can also be updated with a new <code class="prettyprint">environment</code> value, so you can use it to control how your data is displayed. Refer to the documentation of each resource to learn how you can achieve this.</p>

<p>It&rsquo;s worth pointing out that endpoints that retrieve a resource by id typically don&rsquo;t filter by <code class="prettyprint">environment</code> - mostly only listing endpoints have different behavior depending on the requested <code class="prettyprint">environment</code> value. Also worth noting is that this behavior may differ from resource to resource, and you should always refer to each endpoint&rsquo;s documentation for more details.</p>

<h4 id="which-services-comply-with-these-guidelines">Which services comply with these guidelines</h4>

<ul>
<li><a href="index-rw.html#dataset6">Dataset</a></li>
<li><a href="index-rw.html#graph">Graph</a></li>
<li><a href="index-rw.html#layer8">Layer</a></li>
<li><a href="index-rw.html#subscriptions">Subscriptions</a></li>
<li><a href="index-rw.html#widget9">Widgets</a></li>
</ul>

<h3 id="user-roles">User roles</h3>

<p>RW API users have a role associated with it, defined in the <code class="prettyprint">role</code> field of each user. You can check your own role by consulting your user information using the <a href="index-rw.html#get-the-current-user"><code class="prettyprint">GET /users/me</code> endpoint</a> or getting a JWT token and decoding its information. The <code class="prettyprint">role</code> of the user is defined as a string, and it can take one of the following values:</p>

<ul>
<li><code class="prettyprint">USER</code></li>
<li><code class="prettyprint">MANAGER</code></li>
<li><code class="prettyprint">ADMIN</code></li>
</ul>

<h4 id="role-based-access-control">Role-based access control</h4>

<blockquote>
<p>Typical hierarchy for roles:</p>
</blockquote>
<pre class="highlight plaintext"><code>USER (least privileges) &lt; MANAGER &lt; ADMIN (most privileges)
</code></pre>
<p>The role field is usually used across the RW API for controlling access to API resources. While not required nor enforced, typically user roles are used hierarchically, being <code class="prettyprint">USER</code> the role with the least privileges, and <code class="prettyprint">ADMIN</code> the one with most privileges. A common pattern you’ll find on some services is: </p>

<ul>
<li><code class="prettyprint">USER</code> accounts can read (usually all data or just data owned by the user, depending on any privacy or security concerns in the service in question), but only create new resources; </li>
<li><code class="prettyprint">MANAGER</code> accounts can perform all of the <code class="prettyprint">USER</code> actions, complemented with editing or deleting resources owned by them;</li>
<li><code class="prettyprint">ADMIN</code> accounts can do all of the above even for resources created by other users.</li>
</ul>

<p>Role-based access control is usually conjugated with the list of applications associated with the user: typically, in order to manipulate a given resource, that resource and the user account must have at least one overlapping application value. Read more about the application field and which services use it in the <a href="index-rw.html#applications">Applications concept documentation</a>.</p>

<p>Keep in mind that it’s up to each individual RW API service (dataset, widget, layer, etc) to define how they restrict or allow actions based on these or other factors, so the examples above may not be true for all cases. Refer to the documentation of each resource and endpoint for more details on restrictions they may have regarding user accounts and their properties.</p>

<h4 id="how-to-change-the-role-of-an-user">How to change the role of an user</h4>

<p>Changing role of users is restricted to <code class="prettyprint">ADMIN</code> users, so if you intend to upgrade your user role to a <code class="prettyprint">MANAGER</code> or <code class="prettyprint">ADMIN</code> role, please get in touch with one of the <code class="prettyprint">ADMIN</code> users and request the change. If you are already an <code class="prettyprint">ADMIN</code> user and you intend to change the role of another user, you can do so using the <a href="index-rw.html#update-another-user-39-s-account-details"><code class="prettyprint">PATCH /users/:id</code> endpoint</a>.</p>

<h4 id="which-services-comply-with-these-guidelines">Which services comply with these guidelines</h4>

<p>The following endpoints adhere to the user role conventions defined above:</p>

<ul>
<li><a href="index-rw.html#dashboard">Dashboards</a></li>
<li><a href="index-rw.html#dataset6">Datasets</a></li>
<li><a href="index-rw.html#layer8">Layers</a></li>
<li><a href="index-rw.html#metadata14">Metadata</a></li>
<li><a href="index-rw.html#widget9">Widgets</a></li>
</ul>

<h3 id="sorting">Sorting</h3>

<blockquote>
<p>Example request sorting by a single condition:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?sort<span class="o">=</span>name
</code></pre>
<blockquote>
<p>Example request sorting by multiple conditions:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?sort<span class="o">=</span>name,description
</code></pre>
<blockquote>
<p>Example request sorting by multiple conditions, descending and ascending:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?sort<span class="o">=</span>-name,+description
</code></pre>
<p>As a rule of thumb, you can sort RW API resources using the <code class="prettyprint">sort</code> query parameter. Usually, sorting can be performed using any field from the resource schema, so be sure to check each resource&rsquo;s model reference to find which fields can be used for sorting. Sorting by nested model fields is not generally supported, but may be implemented for particular resources. In some exceptional cases, you also have the possibility of sorting by fields that are not present in the resource model (e.g., when fetching datasets, you can sort by <code class="prettyprint">user.name</code> and <code class="prettyprint">user.role</code> to sort datasets by the name or role of the owner of the dataset) - be sure to check each resource&rsquo;s documentation to find out which additional sorting criteria you have available.</p>

<p>Multiple sorting criteria can be used, separating them by commas. You can also specify the sorting order by prepending the criteria with either <code class="prettyprint">-</code> for descending order or <code class="prettyprint">+</code> for ascending order. By default, ascending order is assumed.</p>

<p>Keep in mind that it’s up to each individual RW API service (dataset, widget, layer, etc) to define and implement the sorting mechanisms. Because of this, the examples above may not be true for all cases. Refer to the documentation of each resource and endpoint for more details on sorting.</p>

<h4 id="which-services-comply-with-these-guidelines">Which services comply with these guidelines</h4>

<p>The following endpoints adhere to the Sorting conventions defined above:</p>

<ul>
<li><a href="index-rw.html#getting-all-user-areas">Get v2 areas endpoint</a></li>
<li><a href="index-rw.html#get-user-areas">Get areas endpoint</a></li>
<li><a href="index-rw.html#getting-collections-for-the-request-user">Get collections endpoint</a></li>
<li><a href="index-rw.html#getting-all-dashboards">Get dashboards endpoint</a></li>
<li><a href="index-rw.html#getting-all-datasets">Get datasets endpoint</a></li>
<li><a href="index-rw.html#getting-all-layers">Get layers endpoint</a></li>
<li><a href="index-rw.html#getting-all-metadata">Get metadata endpoint</a></li>
<li><a href="index-rw.html#getting-all-widgets">Get widgets endpoint</a></li>
</ul>

<h3 id="filtering">Filtering</h3>

<blockquote>
<p>Example request filtering using a single condition:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?name<span class="o">=</span>viirs
</code></pre>
<blockquote>
<p>Example request filtering using multiple conditions:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?name<span class="o">=</span>birds&amp;provider<span class="o">=</span>cartodb
</code></pre>
<blockquote>
<p>Example request filtering by an array field using the <code class="prettyprint">,</code> OR multi-value separator:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?application<span class="o">=</span>rw,gfw
</code></pre>
<blockquote>
<p>Example request filtering by an array field using the <code class="prettyprint">@</code> AND multi-value separator:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?application<span class="o">=</span>rw@gfw
</code></pre>
<p>Like in the case of sorting, most RW API resources allow filtering the returned results of list endpoints using query parameters. As a rule of thumb, you can use the API resource&rsquo;s fields as query parameter filters, as shown in the examples on the side. You can also combine different query parameters into a complex <code class="prettyprint">and</code> logic filter. Note that you can achieve a logical <code class="prettyprint">or</code> by passing a regular expression with two disjoint options, like this: <code class="prettyprint">?name=&lt;substr_a&gt;|&lt;substr_b&gt;</code>.</p>

<p>For string type fields, the filter you pass will be interpreted as a regular expression, <em>not</em> as a simple substring filter. This gives you greater flexibility in your search capabilities. However, it means that, if you intend to search by substring, you must escape any regex special characters in the string.</p>

<p>Array fields (like the <code class="prettyprint">application</code> field present in some of the API resources - read more about the <a href="index-rw.html#applications">application field</a>) support more complex types of filtering. In such cases, you can use <code class="prettyprint">,</code> as an <code class="prettyprint">or</code> multi-value separator, or <code class="prettyprint">@</code> as a multi-value, exact match separator.</p>

<p>Object fields expect a boolean value when filtering, where <code class="prettyprint">true</code> matches a non-empty object and <code class="prettyprint">false</code> matches an empty object. Support for filtering by nested object fields varies for different API resource, so be sure to check the documentation of the API endpoint for more detailed information.</p>

<p>Again, as in the case of sorting, keep in mind that it’s up to each individual RW API service (dataset, widget, layer, etc) to define and implement the filtering mechanisms. Because of this, the examples above may not be true for all cases. Refer to the documentation of each resource and endpoint for more details on filtering and the available fields to use as query parameter filters.</p>

<h4 id="which-services-comply-with-these-guidelines">Which services comply with these guidelines</h4>

<p>The following endpoints adhere to the Filtering conventions defined above:</p>

<ul>
<li><a href="index-rw.html#getting-all-datasets">Get all datasets endpoint</a></li>
<li><a href="index-rw.html#getting-all-layers">Get all layers endpoint</a></li>
<li><a href="index-rw.html#getting-all-widgets">Get all widgets endpoint</a></li>
<li><a href="index-rw.html#getting-all-users">Get all users endpoint</a></li>
</ul>

<h1 id="concepts">Concepts</h1>

          <h2 id="dataset">Dataset</h2>

<p>One of the Resource Watch API&rsquo;s (RW API) goals is to provide a common interface for interacting with data hosted in different sources and formats. A <strong>Dataset</strong> is the Resource Watch&rsquo;s API way of providing users with access to data, while trying to, as much as possible, abstract and standardise operations that would otherwise fall on the user&rsquo;s hands to figure out. It&rsquo;s one of the cornerstones that many other API features build upon - and those features can help you get even more out of your data!</p>

<p><strong>Example</strong>: <em>A Resource Watch API dataset can represent data in a JSON file, hosted on <a href="https://carto.com/">Carto</a> or <a href="https://earthengine.google.com/">Google Earth Engine</a>, to name a few. However, when accessing that data, you don&rsquo;t have to learn 3 different technologies - the Resource Watch API gives you a single, unified query interface.</em></p>

<p>On top of <strong>datasets</strong>, the RW API offers multiple resources that allow you to access data in multiple formats. These will be covered later in full detail, but as an example, here are some ways in which you can access and use datasets:</p>

<ul>
<li>the RW API allows you to create <strong>Widgets</strong>, graphic representations of data, which can be made interactive to meet your custom needs;</li>
<li>if your data is georeferenced, you can use the <strong>Layers</strong> service to display data on informative maps;</li>
<li>you can create <strong>Subscriptions</strong> associated with datasets, and be notified via email of significant updates;</li>
<li>you can build your own <strong>Queries</strong> using a SQL-like syntax, and use the data to build your own custom visualizations.</li>
<li>the <strong>Metadata</strong> service offers you a way to provide additional details about your data, like multi-language descriptions that will allow you to reach a broader audience</li>
<li>the <strong>Geostore</strong> service allows you to access or save geometries, offering lots of useful tools when handling georeferenced datasets.</li>
</ul>

<h3 id="dataset-providers">Dataset providers</h3>

<p>Each dataset has a <strong>provider</strong> (json/carto/GEE/&hellip;) that must specified on creation - it&rsquo;s this value that tells the RW API how to handle different data providers and formats, so you don&rsquo;t have to. Below you&rsquo;ll find a list of the different providers supported:</p>

<h4 id="carto">Carto</h4>

<p><a href="https://carto.com/">Carto</a> is an open, powerful, and intuitive map platform for discovering and predicting key insights underlying the location data in our world.</p>

<h4 id="arcgis-feature-layer">ArcGIS feature layer</h4>

<p><a href="https://www.arcgis.com/index.html">ArcGIS</a> server is a complete, cloud-based mapping platform. You can learn more about ArcGIS <a href="https://www.arcgis.com/index.html">here</a>.</p>

<h4 id="google-earth-engine">Google Earth Engine</h4>

<p><a href="https://earthengine.google.com/">Google Earth Engine</a> combines a multi-petabyte catalog of satellite imagery and geospatial datasets with planetary-scale analysis capabilities and makes it available for scientists, researchers, and developers to detect changes, map trends, and quantify differences on the Earth’s surface.</p>

<h4 id="web-map-services">Web Map Services</h4>

<p><a href="https://docs.geoserver.org/stable/en/user/services/wms/index.html">WMS</a> connector provides access to data served through OGC WMS protocol standard.</p>

<h4 id="rasdaman-raster-data-manager">Rasdaman (Raster Data Manager)</h4>

<p><a href="https://www.rasdaman.com/">Rasdaman</a> is a database with capabilities for storage, manipulation and retrieval of multidimensional arrays.</p>

<h4 id="nex-gddp">NEX-GDDP</h4>

<p>The <a href="https://www.nasa.gov/nex">NASA Earth Exchange Global Daily Downscaled Projections (NEX-GDDP)</a> dataset is comprised of downscaled climate scenarios for the globe that are derived from the General Circulation Model (GCM) runs conducted under the Coupled Model Intercomparison Project Phase 5 (CMIP5) and across two of the four greenhouse gas emissions scenarios known as Representative Concentration Pathways (RCPs).</p>

<p><em>Note: While you may find and use existing dataset of this type, creation of new NEX-GDDP based datasets is restricted to specific users.</em></p>

<h4 id="bigquery">BigQuery</h4>

<p><a href="https://cloud.google.com/bigquery">BigQuery</a> is a serverless, highly scalable, and cost-effective cloud data warehouse designed to help you make informed decisions quickly, so you can transform your business with ease.</p>

<p><em>Note: While you may find and use existing dataset of this type, creation of new BigQuery based datasets is restricted to specific users.</em></p>

<h4 id="loca">Loca</h4>

<p><a href="http://loca.ucsd.edu/">LOCA</a>, which stands for Localized Constructed Analogs, is a technique for downscaling climate model projections of the future climate.</p>

<p><em>Note: While you may find and use existing dataset of this type, creation of new LOCA based datasets is restricted to specific users.</em></p>

<h4 id="comma-separated-values-csv">Comma-Separated Values (CSV)</h4>

<p>Data provided in the form of a Comma-Separated Values (CSV) document.</p>

<h4 id="tab-separated-values-tsv">Tab-Separated Values (TSV)</h4>

<p>Data provided in the form of a Tab-Separated Values (TSV) document.</p>

<h4 id="javascript-object-notation-json">JavaScript Object Notation (JSON)</h4>

<p>Data provided in the form of a JSON document.</p>

<h4 id="extensible-x-markup-language-xml">Extensible (X) Markup Language (XML)</h4>

<p>Data provided in the form of a XML document.</p>

<h3 id="dataset-connector-type">Dataset connector type</h3>

<p>Each dataset provider has an associated <strong>connector type</strong>, which you can determine using the table below. </p>

<table><thead>
<tr>
<th>Connector type</th>
<th>Providers</th>
</tr>
</thead><tbody>
<tr>
<td>document</td>
<td><code class="prettyprint">csv</code>, <code class="prettyprint">json</code>, <code class="prettyprint">tsv</code>, <code class="prettyprint">xml</code></td>
</tr>
<tr>
<td>rest</td>
<td><code class="prettyprint">cartodb</code>, <code class="prettyprint">featureservice</code>, <code class="prettyprint">gee</code>, <code class="prettyprint">bigquery</code>, <code class="prettyprint">rasdaman</code>, <code class="prettyprint">nexgddp</code>, <code class="prettyprint">loca</code></td>
</tr>
<tr>
<td>wms</td>
<td><code class="prettyprint">wms</code></td>
</tr>
</tbody></table>

<p>The connector type reflects an important aspect of a dataset: where is the actual data kept, and how is it accessed:</p>

<ul>
<li><code class="prettyprint">document</code> connector type: a dataset that uses this connector type has its data hosted on the RW API database. For example,   datasets with provider <code class="prettyprint">json</code> are based on user provided JSON files, and have the <code class="prettyprint">document</code> connector type. This means that, on dataset creation, the content of the provided JSON files is copied onto an internal RW API database, and future queries will get their data from that database - the actual JSON files are not used after the creation process is done.</li>
<li><code class="prettyprint">rest</code> connector type: a dataset that uses this connector type proxies the underlying service specified as <code class="prettyprint">provider</code>. For example, a dataset that uses the provider <code class="prettyprint">cartodb</code> has the connector type <code class="prettyprint">rest</code>. This means that queries to that dataset will cause the API to query the carto URL provided, and pass the result to the user. Apart from temporary caches, the actual data is never kept on the RW API itself. The underlying carto table needs to exist and be accessible for the RW API dataset to work.</li>
<li><code class="prettyprint">wms</code> connector type: this connector type is used only for datasets that use the <code class="prettyprint">wms</code> provider. The RW API does not access the data for these datasets. </li>
</ul>

          <h2 id="query">Query</h2>

<p>In the previous section, we covered the concept of a RW API dataset which, in simple terms, is a way to tell the RW API that your data exists, and where. While cataloging datasets in a public repository is useful, making that data easily accessible is one of the main goals of the RW API. This is where <strong>queries</strong> come in.</p>

<p>In the context of the RW API, a dataset query is very similar an <a href="https://en.wikipedia.org/wiki/SQL">SQL</a> query would be to a database - it&rsquo;s a specially crafted statement that allows you to express what data you want, from which dataset, and with which structure. The RW API will use that query to get you the data you need, in the format you asked for, so that it&rsquo;s easy to use in the context of your applications. While it doesn&rsquo;t comply (nor does it attempt to) with any of the formal <a href="https://en.wikipedia.org/wiki/SQL">SQL</a> specifications, RW API queries use a SQL-like syntax that will be very familiar to anyone who has worked with a relational database in the past. If that&rsquo;s not your case, there are many tutorials out there that will help you learn the basics in no time.</p>

<p>Using this common, SQL-based syntax, RW API queries allow you to query its datasets using a common API and syntax, no matter where the actual underlying data is hosted. Querying a carto dataset is the same as querying a JSON document or a BigQuery table. This is one of the main goals of the RW API, and one of most valuable features we offer you, the end user - using a single tool and language, you can quickly query data from a wide range of sources, on a broad set of topics.</p>

<p>In the <a href="#query9">query endpoint documentation</a> below, we&rsquo;ll go into more detail on how you can submit your queries to the API, the specifics of more advanced operations and detailed limitations of querying the RW API but, for now, there are 3 high-level ideas that you should keep in mind:</p>

<h3 id="all-queries-should-be-select-queries">All queries should be <code class="prettyprint">SELECT</code> queries</h3>

<p>Querying in the RW API is meant to be used only to read data, not to manipulate it. If you have used SQL before, you know it can be used to modify data, but, as a rule of thumb, that&rsquo;s not the approach used in the RW API. If you&rsquo;d like to modify the data of a dataset, you should use the <a href="#updating-a-dataset">dataset update</a> endpoints instead. The only exception to this is for deleting data from document-based datasets - check <a href="index-rw.html#deleting-data-from-a-dataset">here</a> for more details.</p>

<h3 id="not-all-sql-constructs-are-supported">Not all SQL constructs are supported</h3>

<p>If you&rsquo;ve used SQL in the past, you know how powerful (and complex) it can be. Things like nested queries or joins can be hard to use and even more to maintain, even without the added complexity of an environment where multiple data providers coexist. That&rsquo;s why the RW API limits its support to basic SQL syntax, so we can focus on delivering a tool that&rsquo;s simple and easy to use for most users. The <a href="#supported-sql-syntax-reference">supported SQL syntax reference</a> section below will go into more detail on what&rsquo;s supported and what&rsquo;s not, and will help you understand the specifics of what you can achieve with RW API queries.</p>

<h3 id="some-operations-will-depend-on-the-provider-of-the-dataset-you-39-re-querying">Some operations will depend on the provider of the dataset you&rsquo;re querying</h3>

<p>Our goal is to provide a common querying interface across all datasets, independent of their provider. While we believe we&rsquo;ve achieved it in most cases, RW API queries can only be as powerful as the underling provider (and their own APIs) allows them to be. There are cases in which a given SQL construct or function is supported for a given provider, but not for another. The <a href="#supported-sql-syntax-reference">supported SQL syntax reference</a> below has more details on these limitations, per provider.</p>

          <h2 id="layer">Layer</h2>

<p>Apart from the possibility of fetching data from multiple data sources using a common interface, the RW API provides you with features to help you visualize such data. A <strong>layer</strong> is one of the resources that you can use to help you make custom visualizations for your data, and they play a very important role when visualizing datasets that contain geospatial data.</p>

<p>A layer is a visual specification of how the data of a dataset can be rendered and styled on a map. It stores data that will help your applications render dataset data as a map layer, using tools like <a href="https://leafletjs.com/">Leaflet</a>, <a href="https://docs.mapbox.com/mapbox-gl-js/api/">Mapbox GL JS</a> or <a href="https://github.com/Vizzuality/layer-manager">Layer Manager</a>. In this sense, it&rsquo;s important to emphasise that a layer object does not store the actual data to be represented - it instead stores the information that those rendering tools will use to render your data. Rephrasing it: the data should come from the dataset (through queries), while a layer provides the information about how that data is meant to be rendered by the corresponding rendering tool.</p>

<p>In the <a href="#layer8">layer endpoint documentation</a>, we&rsquo;ll go into more detail on how you can manage layers, as well as the existing limitations that you might run into when using layers. However, for now, there are 3 high-level ideas that you should keep in mind:</p>

<h3 id="the-layer-does-not-interact-with-dataset-data">The layer does not interact with dataset data</h3>

<p>Layers store visual configurations needed for rendering styling a given dataset&rsquo;s data. However, they do not interact with the dataset data in any way. It is your responsibility, as a RW API user, to build the appropriate queries to retrieve the data that you want to display (read more about <a href="#dataset">datasets</a> or <a href="#query">how you can query datasets to obtain their data</a>). Remember, use layers as a complement of dataset queries, not a replacement.</p>

<h3 id="most-of-layer-fields-are-free-form">Most of layer fields are free-form</h3>

<p>Many of the fields in the layer object are free-form, meaning the RW API does not apply any restriction to whatever is saved in those fields. This is great, because it allows for a very high level of flexibility for users, but has the downside of making it harder to document how to use layers. We tried our best to provide clear and consistent specifications for all the fields of a layer, but keep in mind that this high level of flexibility makes it harder to deliver a concrete description.</p>

<h3 id="different-applications-and-rendering-tools-use-layers-in-different-ways">Different applications and rendering tools use layers in different ways</h3>

<p>At the moment, most applications using the layer endpoints have adapted layers to tailor fit their needs, taking advantage of the flexibility that free-form fields bring. This means that, when navigating through the catalog of available layers, you might run into very different ways of implementing and using layers. Once again, we will try our best to cover the different ways of using and managing layers, but keep in mind that there is currently no standard way of using layers.</p>

<p>As layers are typically managed within the realm of a RW API based application, they typically contain data that covers the needs of that application&rsquo;s specific rendering tool. This again means that you may find varying structure in the data contained in a layer.</p>

          <h2 id="widget">Widget</h2>

<p>You have fetched your data from your <a href="#dataset">dataset</a> using <a href="#query">queries</a>. And you know how to build custom visualizations for geospatial data using <a href="#layer">layers</a>. Yet, sometimes you want to build a plain graphical representation of your data - whether it is geo-referenced or not: this is when <strong>widgets</strong> come in handy.</p>

<p>A <strong>widget</strong> is a visual specification of how to style and render the data of a dataset (think pie, bar or line charts).</p>

<p>As with layers, each widget has a single dataset associated with it, and a dataset can be associated with many widgets. You can represent the same data in different ways by creating different widgets for the same dataset. The same widget can store independent configuration values for each RW API based application. It can also contain the required configuration for rendering the same visualization using different rendering tools.</p>

<p>However, this association between widgets and datasets is only for organizational purposes. As such, like in the case of layers, the widget itself does not interact with the dataset data. You can either use the widget&rsquo;s <code class="prettyprint">queryUrl</code> field to store the query to get the widget&rsquo;s data or store it inside the free form <code class="prettyprint">widgetConfig</code> object. In any of these cases, it is your responsibility as an API user to query the data that will be used for rendering the widget.</p>

<p>In the <a href="#widget9">widget endpoint documentation</a>, you can get into more detail on how you can manage widgets.</p>

<h3 id="widget-configuration-using-vega-grammar">Widget configuration using Vega grammar</h3>

<p>As in the case of layers (where many fields are free-form), the RW API does not apply any restriction to the data saved in the widget configuration field (<code class="prettyprint">widgetConfig</code>). This allows for a very high level of flexibility for users but has the downside of making it harder to document how to use widgets.</p>

<p>However, the existing widgets&rsquo; standard approach for building widget configuration objects is using <a href="https://github.com/vega/vega">Vega grammar</a>. Vega is a visualization grammar, a declarative format for creating interactive visualization designs. You can then use a chart library that supports Vega grammar syntax (such as <a href="https://d3js.org/">d3.js</a>) to render the widget and get your graphical representation.</p>

<p>Please note that, in any case, you can use whatever configuration format you wish since the <code class="prettyprint">widgetConfig</code> field is free-form.</p>

          <h2 id="metadata">Metadata</h2>

<p>Understanding the context of data, empowering users to find and make informed decisions about its suitability is another important goal of the Resource Watch API (RW API). For example, a user may be looking to answer questions like, <em>&ldquo;Does this dataset provide information about tree cover in my region?&rdquo;</em>, <em>&ldquo;What are the physical units?&rdquo;</em>, <em>&ldquo;How was this measured?&rdquo;</em>, and <em>&ldquo;How should I provide proper attribution to the data provider?&rdquo;</em>.</p>

<p>Answers to these questions can be stored in a resource&rsquo;s <a href="https://guides.ucf.edu/metadata/intrometadata">metadata</a>. By definition, metadata is always associated with another entity. In the context of the RW API, metadata objects will always contain information about either a <a href="https://resource-watch.github.io/doc-api/index-rw.html#dataset">dataset</a>, a <a href="https://resource-watch.github.io/doc-api/index-rw.html#layer">layer</a> or a <a href="https://resource-watch.github.io/doc-api/index-rw.html#widget">widget</a>.</p>

<p>Content-wise, the RW API aims to provide a good balance between structure and flexibility with its metadata service, providing a group of common fields you&rsquo;ll find on all metadata elements, as well as giving API users the tools to create metadata that meets the individual needs of their applications. Through a mix of both types of fields, these are some of the recommended information you should aim to provide when specifying the metadata for one of your resources:</p>

<ul>
<li><strong>Title/Name</strong> – Name given to the resource.</li>
<li><strong>Description</strong> – A description of the resource.</li>
<li><strong>Author</strong> – The entities or persons produced the data.</li>
<li><strong>Source</strong> – Where the original data was sourced from, and how to access said source.</li>
<li><strong>Contact information</strong> – A way to contact the author.</li>
<li><strong>Schema</strong> – Description of the data structure, like column names, types, descriptions, etc.</li>
<li><strong>License</strong> – Information about the rights held in and over the resource.</li>
</ul>

<p>As we&rsquo;ll see in further details when covering the metadata endpoints, a RW API metadata object has a few structured but optional fields to capture some of the general details described above, while also allowing you to specify your own custom fields for ease of extension and flexibility, should you want to provide additional levels of detail about your resources. It will also give you the tools to only specify a subset of the suggested elements above, should you decide to use that approach.</p>

<p>Besides being associated with a single RW API resource (dataset, widget, or layer), metadata objects must also identify the language in which they are written, as well as the <a href="https://resource-watch.github.io/doc-api/index-rw.html#applications">application</a> they are associated with. This allows a single resource, say a dataset, to have its metadata translated into different languages, and be adjusted to meet the needs of different applications. We&rsquo;ll go into further details on these when we cover the metadata endpoints in their dedicated section.</p>

          <h2 id="geostore">Geostore</h2>

<p>Allowing users to interact with data in the context of geographic data structures, such as the boundaries of countries or the location of power plants, is an important goal of the Resource Watch API (RW API). For example a user maybe looking to answer questions like <em>&ldquo;How much tree cover is there in my region?&rdquo;</em> or <em>&ldquo;How many power-plants are situated on the coast?&rdquo;</em>.</p>

<p>Both these questions imply defining the (geographical) boundaries of the question. In the case of regions these are often expressed as bounding polygons, however as seen in the examples above, geographic structures may also represent lines (such as the coast-line) or point (locations of power-plants). All of which are efficiently represented using the <a href="https://www.spatialpost.com/raster-vector-data-model/">Vector data model</a>.</p>

<p>The Resource Watch API allows users to define custom vector data structures in <a href="https://en.wikipedia.org/wiki/GeoJSON">GeoJSON</a> format. It allows the storage of <a href="https://en.wikipedia.org/wiki/Simple_Features">simple geographical features</a>, and, being an extension of <a href="https://es.wikipedia.org/wiki/JSON">JSON</a>, its format is familiar to API users. In the context of the RW API, these custom geographical structures are called <strong>geostores</strong>. </p>

<h3 id="geojson-object">GeoJSON object</h3>

<p>If you are not familiar with GeoJSON this <a href="https://developer.here.com/blog/an-introduction-to-geojson">article</a> gives a quick overview, for the brave you can also check out the <a href="https://geojson.org/">specifications</a>. Being an Open Standard most <a href="https://en.wikipedia.org/wiki/Geographic_information_system">GIS</a> support export of GeoJSON, for example <a href="https://en.wikipedia.org/wiki/QGIS">QGIS</a>. If you are creating your own GeoJSON objects the <a href="https://github.com/geojson/schema">JSON Schema docs describing the different GeoJSON object types</a> can be useful.</p>

<p>Assuming you are now familiar with the basic structure of GeoJSON, next we will highlight some important considerations about how Geostore treats GeoJSON objects.</p>

<ul>
<li>GeoJSON objects are always stored and returned as a <code class="prettyprint">FeatureCollection</code>; when creating a geostore using a <code class="prettyprint">Feature</code> or <code class="prettyprint">Geometry</code> it is always converted to a <code class="prettyprint">FeatureCollection</code>.</li>
<li>When creating a geostore from a <code class="prettyprint">FeatureCollection</code> only the first <code class="prettyprint">Feature</code> is stored, all other features are discarded with no warning.</li>
<li>Geostore retains all <code class="prettyprint">Feature</code> properties.</li>
<li>All geometry types are accepted, except <code class="prettyprint">GeometryCollection</code>.</li>
<li>GeoJSON <a href="https://tools.ietf.org/html/rfc7946#section-4">only supports one geographic coordinate reference system [CRS]</a>, using the World Geodetic System 1984 (WGS 84) datum, with longitude and latitude units of decimal degrees. Other CRS are not supported. Geostore does not check for the validity of the coordinate CRS.</li>
<li>During creation the GeoJSON geometry is checked for geometric validity and, if required, an attempt is made to repair the geometry (using <a href="https://postgis.net/docs/ST_MakeValid.html">ST_MakeValid</a>).</li>
</ul>

<h3 id="what-are-geostores-used-for">What are geostores used for?</h3>

<p>Geostores are a core part of many of the analysis and data provided by the API, and the primary way for defining geographical boundaries in the RW API.</p>

<p>Using geostores, you can, for example, create areas of interest and get notified about deforestation and fire alerts in geographical areas of your interest. Using the <a href="https://www.globalforestwatch.org/">GFW website</a>, you can even draw a custom shape of your interest. This shape gets translated into a geostore, which you can then use to subscribe to deforestation and fire alerts.</p>

<p>Additionally, you can query certain RW API datasets providing an ID of a geostore as a query parameter. This will restrict the returned data to the points that fit inside the geostore with ID provided. So you can directly query data specific to a geographic boundary identified by the geostore provided.</p>

<p>The Geostore API also aims at providing a curated list of shapes for ISO country, GADM admin region, or protected areas from WDPA. These endpoints are used by other services in the API as the source of truth for geographic representations.</p>

          <h2 id="area-of-interest">Area of Interest</h2>

<p>Areas of interest are custom polygons representative of geographical regions that API users may have a particular interest on. Users can define their own custom Areas of Interest or select from predefined areas supported by the API, and can subscribe to deforestation alerts <a href="https://www.globalforestwatch.org/howto/webinars/webinar-glad-alerts.html">(GLAD alerts)</a> or fire alerts <a href="https://data.globalforestwatch.org/datasets/9ebf069428b140d59fc796fef2e1faa8">(VIIRS alerts)</a> that happen inside those areas. Areas of interest can be managed using the endpoints provided by the <a href="index-rw.html#areas-v2">Areas service</a>, while the subscription logic of notifying API users is handled by the <a href="index-rw.html#subscriptions">Subscriptions service</a>. Your areas of interest can also be managed by accessing your <a href="https://www.globalforestwatch.org/my-gfw/">MyGFW</a> account on the Global Forest Watch website.</p>

<h3 id="email-and-webhook-notifications">Email and webhook notifications</h3>

<p>While creating an area, you have the option to subscribe to deforestation alerts (GLAD alerts), fire alerts (VIIRS fire alerts) and/or a monthly summary of both GLAD and VIIRS alerts in the area of interest defined. Each notification also has the option of being received by the API user as an email or a POST to a webhook URL.</p>

<ul>
<li>GLAD notifications are sent daily, starting after 10:00 AM (EST - Eastern Time).</li>
<li>VIIRS notifications are sent daily, starting after 7:00 AM (EST - Eastern Time).</li>
<li>Monthly summary notifications are sent monthly, starting after 11:00 AM (EST - Eastern Time) of the first day of every month.</li>
</ul>

<h3 id="different-ways-of-defining-areas-of-interest">Different ways of defining areas of interest</h3>

<p>Areas of interest can be defined in one of four ways. Keep in mind that all of these different methods of creating areas can also be used while logged in with your account on the <a href="https://www.globalforestwatch.org/">Global Forest Watch website</a>:</p>

<ul>
<li>by referencing a country, one of its regions, or a subregion within a region - countries are identified by their <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3">ISO 3166-1 alpha-3 code</a>, and regions and subregions are identified by their respective GADM id, which can be obtained from <a href="https://gadm.org/data.html">the GADM dataset</a>.</li>
<li>by referencing a specific protected area by the id of that area in the <a href="https://www.protectedplanet.net/">World Database on Protected Areas (WDPA)</a>.</li>
<li>by referencing the ID and type of a land use area provided by different datasets - currently, the following land use datasets are supported: 

<ul>
<li><strong>mining</strong> for <a href="http://api.resourcewatch.org/v1/dataset/c2142922-84d9-4564-8216-a4867b9e48c5">mining areas</a>.</li>
<li><strong>logging</strong> for <a href="https://wri-01.carto.com/tables/gfw_oil_palm/public/map">Congo Basin logging roads</a>. </li>
<li><strong>oilpalm</strong> for <a href="https://wri-01.carto.com/tables/gfw_woodfiber/public/map">palm oil plantations</a>.</li>
<li><strong>fiber</strong> for <a href="https://wri-01.carto.com/tables/osm_logging_roads/public/map">wood fiber plantations</a>.</li>
</ul></li>
<li>by <a href="#create-geostore">creating a specific geostore using</a> the <a href="#geostore">RW API Geostore service</a>, and using its ID.</li>
</ul>

<p>Read more on how to create areas using the different methods in the <a href="index-rw.html#creating-an-area">Areas v2 endpoints</a> section.</p>

          <h1 id="authentication">Authentication</h1>

<p>The RW API provides most of its data through endpoints that are available to all users, without requiring any form of registration. However, some actions, like uploading data or flagging a resource as a favourite, require having a user account and using an access token when issuing requests to the API.</p>

<p>In this section you will learn the very basics of how you can quickly create a user account and use your token to authenticate requests. For more in-depth details on authentication, token and user management, refer to the <a href="#user-management">User Management</a> section of the documentation.</p>

<h2 id="logging-in-or-registering-a-new-user-account">Logging in or registering a new user account</h2>

<p>The easiest way to access your account is through the <a href="https://api.resourcewatch.org/auth/sign-up">login page</a> of the RW API. Here you can authenticate using your existing Facebook, Google, Twitter or Apple account, or you can register or login using your email address and password. </p>

<p><em>Note: if you create a new user account using email and password, a confirmation link will be sent to the email address you provided. Your account will only be active once you&rsquo;ve clicked the link in that email, so ensure that you use a valid email address. If you don&rsquo;t receive this email message within a few minutes, check your spam.</em></p>

<p>Once you&rsquo;ve successfully logged in using your browser, you&rsquo;ll see a &ldquo;Welcome to the RW API message&rdquo; on your browser. You can now generate user tokens.</p>

<p><img src="images/authentication/auth-success.png" alt="Auth success" /></p>

<h2 id="how-to-generate-your-private-token">How to generate your private token</h2>

<p>The RW API uses JWT <a href="https://tools.ietf.org/html/rfc7519">(JSON Web Tokens)</a> tokens to identify and authenticate its users. If your are not familiar with the details of JWT, just think of them as a very long strings of characters that you need to attach to your requests to the RW API, to prove that you are you.</p>

<p>To get you token, you first need to login using your browser and the steps above. No matter which login strategy you prefer, once you&rsquo;ve logged in, you can visit <a href="https://api.resourcewatch.org/auth/generate-token">https://api.resourcewatch.org/auth/generate-token</a> to get your token.</p>

<p><strong>Warning</strong>: treat a token in the same way you would treat a password - don&rsquo;t share it and always store it in a safe place (like a password manager, for example). A token is sufficient to authenticate you on the RW API, meaning that, if someone else gains access to your token, they&rsquo;ll be able to do anything that you would be able to do on the RW API, even without access to your Facebook/Google/Twitter/Apple login or your email and password.</p>

<h2 id="how-to-use-your-private-token-to-authenticate-a-request">How to use your private token to authenticate a request</h2>

<blockquote>
<p>Example of how a request with a token is structured</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
  "dataset": {
    "name":"World Database on Protected Areas -- Global",
    "connectorType":"rest",
    "provider":"cartodb",
    "connectorUrl":"https://wri-01.carto.com/tables/wdpa_protected_areas/table",
    "application":[
      "gfw", 
      "forest-atlas"
    ]
  }
}'</span>
</code></pre>
<p>Once you have your token, you can use it to authenticate your requests to the RW API. Depending on which endpoints you are trying to use, certain actions may become available by simply authenticating your request. Other will require your account to have a special role or applications, which we&rsquo;ll cover in more detail in the <a href="#user-management">User Management</a> documentation.</p>

<p>Tokens must be provided in HTTP request header, named as <code class="prettyprint">Authorization</code>, with the structure <code class="prettyprint">Bearer &lt;your token&gt;</code>.</p>

<p>Once generated, a token is valid until any of the associated user information (name, email, or associated applications) changes. If your token becomes invalid, you will need to log in and go to <a href="https://api.resourcewatch.org/auth/generate-token">https://api.resourcewatch.org/auth/generate-token</a> to generate a new token.</p>

          <h1 id="contact">Contact</h1>

<p>The following contact endpoints are available</p>

<h2 id="contact-us">Contact us</h2>

<p>Sends a contact form including a topic, email address, and a message. </p>

<h3 id="example">Example</h3>

<p>Contact form sent using the type <code class="prettyprint">General question or feedback</code>, the email address <code class="prettyprint">example@example.com</code> and the message <code class="prettyprint">This is a text</code>:</p>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/contact-us <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> -d <span class="se">\</span>
    <span class="s1">'{
        "topic": "General question or feedback",
        "email": "example.example@vizzuality.com",
        "text": "This is a test"
    }'</span>
</code></pre>
          <h1 id="dataset">Dataset</h1>

<h2 id="what-is-a-dataset">What is a dataset?</h2>

<p>If you are new to the RW API, or want to learn more about the concept of a dataset, we strongly encourage you to read the <a href="#dataset">dataset concept</a> documentation first. It gives you a brief and clear description of what a dataset is, and what it can do for you.</p>

<p>Once you&rsquo;ve read that section, you can come back here to learn more details about using the RW API&rsquo;s datasets feature. The RW API is home to many datasets uploaded by <a href="https://www.wri.org/">WRI</a>, its partner organizations, or by API users like you. These datasets contain a lot of information about a wide range of topics that you may want to learn about or build on top of. To find out more about finding and accessing the datasets already available on the RW API, check out the documentation on <a href="#getting-all-datasets">getting datasets</a>. A nice, visual way to explore existing datasets is by using the <a href="https://resourcewatch.org/">Resource Watch</a> website. </p>

<p>You can also <a href="#creating-a-dataset">create you own datasets</a> on the RW API, if you&rsquo;d like to share your data with the world, or 
 if you are looking to use the RW API and its features to gain insights into your data.</p>

<h2 id="getting-all-datasets">Getting all datasets</h2>

<p>This endpoint will allow you to get the list of the datasets available in the API, and it&rsquo;s a great place for new users to start exploring the RW API. By default, this endpoint will give you a paginated list of 10 datasets. In the sections below, we&rsquo;ll explore how you can customize this endpoint call to match your needs. </p>

<p>For a detailed description of each field, check out the <a href="#dataset-reference">Dataset reference</a> section.</p>

<blockquote>
<p>Getting a list of datasets</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00f2be42-1ee8-4069-a55a-16a988f2b7a0"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Glad points"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Glad-points-1490086842129"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"subtitle"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"data4sdgs"</span><span class="p">],</span><span class="w">
            </span><span class="s2">"dataPath"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributesPath"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"connectorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"document"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"csv"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58333dcfd9f39b189ca44c75"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"connectorUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://gfw2-data.s3.amazonaws.com/alerts-tsv/glad_headers.csv"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"sources"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"data"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"overwrite"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"geoInfo"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"legend"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">},</span><span class="w">
            </span><span class="s2">"clonedHost"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"errorMessage"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-13T10:45:46.368Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"widgetRelevantProps"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"layerRelevantProps"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?page[number]=99&amp;page[size]=10"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"prev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?page[number]=2&amp;page[size]=10"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">99</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">990</span><span class="p">,</span><span class="w">
    </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="pagination">Pagination</h3>

<p>The RW API lists many of its resources as pages, as opposed to showing all results at once. By default, datasets are listed in pages of 10 datasets each, and the first page is loaded. However, you can customize this behavior using the following query parameters:  </p>

<blockquote>
<p>Custom pagination: load page 2 using 25 results per page</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?page[number]<span class="o">=</span>2&amp;page[size]<span class="o">=</span>25
</code></pre>
<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Default</th>
</tr>
</thead><tbody>
<tr>
<td>page[size]</td>
<td style="text-align: center">The number elements per page. Values above 100 are not officially supported.</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">10</td>
</tr>
<tr>
<td>page[number]</td>
<td style="text-align: center">The page number</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">1</td>
</tr>
</tbody></table>

<h3 id="search">Search</h3>

<blockquote>
<p>Search for datasets</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?search<span class="o">=</span>wind
</code></pre>
<p>The dataset service offers a simple yet powerful search mechanism that will help you look for datasets. The query argument <code class="prettyprint">search</code> allows you to specify a search string that will match:</p>

<ul>
<li>The dataset name.</li>
<li>The dataset&rsquo;s metadata name.</li>
<li>The dataset&rsquo;s metadata description.</li>
<li>The <a href="#graph">relational graph</a> node list.</li>
</ul>

<h3 id="filters">Filters</h3>

<blockquote>
<p>Filtering datasets</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?name<span class="o">=</span>birds&amp;provider<span class="o">=</span>cartodb
</code></pre>
<blockquote>
<p>Matching vocabulary tags</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?vocabulary[legacy]<span class="o">=</span>umd
</code></pre>
<p>The dataset list provides a wide range of parameters that you can use to tailor your dataset listing. Most of these parameters reflect fields you&rsquo;ll find in a dataset itself (which you can learn more about in the <a href="#dataset-reference">Dataset reference</a> section), while others are convenience filters for things like user role or favourites.</p>

<p>Filtering datasets adheres to the conventions defined in the <a href="index-rw.html#filtering">Filter guidelines for the RW API</a>, so we strongly recommend reading that section before proceeding. In addition to these conventions, you can use the following fields as filters supported by the dataset list endpoint:</p>

<table><thead>
<tr>
<th>Filter</th>
<th>Description</th>
<th>Type</th>
<th>Expected values</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Filter returned datasets by the name of the dataset.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>slug</td>
<td>Filter returned datasets by the slug of the dataset.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>type</td>
<td>Filter returned datasets by dataset type.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>subtitle</td>
<td>Filter returned datasets by dataset subtitle.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>application</td>
<td>Applications associated to this dataset. Read more about this field <a href="index-rw.html#applications">here</a>.</td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>applicationConfig</td>
<td>If the dataset has <code class="prettyprint">applicationConfig</code> data (i.e. contains a non-empty object in the <code class="prettyprint">applicationConfig</code> field)</td>
<td>Boolean</td>
<td><code class="prettyprint">true</code> or <code class="prettyprint">false</code></td>
</tr>
<tr>
<td>dataPath</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>attributesPath</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>connectorType</td>
<td>Filter returned datasets by the type of connector used.</td>
<td>String</td>
<td><code class="prettyprint">rest</code>, <code class="prettyprint">document</code> or <code class="prettyprint">wms</code></td>
</tr>
<tr>
<td>provider</td>
<td>Dataset provider this include inner connectors and 3rd party ones</td>
<td>String</td>
<td><a href="index-rw.html#creating-a-dataset">Check the available providers when creating a dataset</a></td>
</tr>
<tr>
<td>connectorUrl</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>sources</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>tableName</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>userId</td>
<td>Filter results by the owner of the dataset. Does not support regexes.</td>
<td>String</td>
<td>valid user id</td>
</tr>
<tr>
<td>status</td>
<td>Filter results by the current status of the dataset.</td>
<td>String</td>
<td><code class="prettyprint">pending</code>, <code class="prettyprint">saved</code> or <code class="prettyprint">failed</code></td>
</tr>
<tr>
<td>overwrite</td>
<td>If the data can be overwritten (only for being able to make dataset updates)</td>
<td>Boolean</td>
<td><code class="prettyprint">true</code>or <code class="prettyprint">false</code></td>
</tr>
<tr>
<td>errorMessage</td>
<td>If this dataset is in <code class="prettyprint">error</code> state, this field may contain additional details about the error.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>mainDateField</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>published</td>
<td>If the dataset is published or not.</td>
<td>Boolean</td>
<td><code class="prettyprint">true</code>or <code class="prettyprint">false</code></td>
</tr>
<tr>
<td>env</td>
<td>Environment to which the dataset belongs. Multiple values can be combined using <code class="prettyprint">,</code> as a separator. Does not support regexes. Read more about this field in the <a href="index-rw.html#environments">Environments concept section</a>.</td>
<td>String</td>
<td>any valid text. Defaults to <code class="prettyprint">production</code>.</td>
</tr>
<tr>
<td>geoInfo</td>
<td>If it contains interceptable geographical info</td>
<td>Boolean</td>
<td><code class="prettyprint">true</code>or <code class="prettyprint">false</code></td>
</tr>
<tr>
<td>protected</td>
<td>If the dataset is protected.</td>
<td>Boolean</td>
<td><code class="prettyprint">true</code>or <code class="prettyprint">false</code></td>
</tr>
<tr>
<td>taskId</td>
<td>Id of the latest task associated with this dataset. Typically only present in <code class="prettyprint">document</code> connectorType datasets</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.lat</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.long</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.date</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.region</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.country</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.nested</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.integer</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.short</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.byte</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.double</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.byte</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.float</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.half_float</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.scaled_float</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.boolean</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.binary</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.text</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.keyword</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>clonedHost.hostProvider</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>clonedHost.hostUrl</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>clonedHost.hostId</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>clonedHost.hostType</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>clonedHost.hostPath</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>widgetRelevantProps</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>layerRelevantProps</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>subscribable</td>
<td>If the dataset is subscribable (i.e. contains a non-empty object in the <code class="prettyprint">subscribable</code> field)</td>
<td>Boolean</td>
<td><code class="prettyprint">true</code> or <code class="prettyprint">false</code></td>
</tr>
<tr>
<td>user.role</td>
<td>Filter results by the role of the owner of the dataset. If the requesting user does not have the ADMIN role, this filter is ignored.</td>
<td>String</td>
<td><code class="prettyprint">ADMIN</code>, <code class="prettyprint">MANAGER</code> or <code class="prettyprint">USER</code></td>
</tr>
<tr>
<td>vocabulary[name]</td>
<td>Filter returned datasets by vocabulary tags. Does not support regexes.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>collection</td>
<td>Filter returned datasets collection id. Does not support regexes.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>favourite</td>
<td>Filter by favourited datasets. See <a href="#favorites">this section</a> for more info. Does not support regexes.</td>
<td>String</td>
<td>any valid text</td>
</tr>
</tbody></table>

<h3 id="sorting">Sorting</h3>

<h4 id="basics-of-sorting">Basics of sorting</h4>

<blockquote>
<p>Sorting datasets</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?sort<span class="o">=</span>name
</code></pre>
<blockquote>
<p>Sorting datasets by multiple criteria</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?sort<span class="o">=</span>name,description
</code></pre>
<blockquote>
<p>Sort by name descending, description ascending</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?sort<span class="o">=</span>-name,+description
</code></pre>
<blockquote>
<p>Sorting datasets by the role of the user who owns the dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?sort<span class="o">=</span>user.role
</code></pre>
<p>The Dataset service currently supports sorting using the <code class="prettyprint">sort</code> query parameter. Sorting dataset adheres to the conventions defined in the <a href="index-rw.html#sorting">Sorting guidelines for the RW API</a>, so we strongly recommend reading that section before proceeding. Additionally, you can check out the <a href="#dataset-reference">Dataset reference</a> section for a detailed description of the fields you can use when sorting. In addition to all dataset model fields, you can sort the returned results by the name (using <code class="prettyprint">user.name</code>) or role (using <code class="prettyprint">user.role</code>) of the user owner of the dataset. Keep in mind that sorting by user data is restricted to ADMIN users.</p>

<h4 id="special-sorting-criteria">Special sorting criteria</h4>

<blockquote>
<p>Sorting datasets with special criteria</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?sort<span class="o">=</span>-most-favorited
</code></pre><pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?sort<span class="o">=</span>relevance&amp;status<span class="o">=</span>saved&amp;search<span class="o">=</span>agriculture
</code></pre>
<p>Special search criteria must be used as sole sorting criteria, as it&rsquo;s not possible to combine any of them with any other search criteria. The following criteria can be used for special sorting in datasets:</p>

<ul>
<li><code class="prettyprint">most-viewed</code> delegates sorting to the graph component, sorting by the datasets that have been queried more frequently. Supports ascending/descending order.</li>
<li><code class="prettyprint">most-favorited</code>: delegates sorting to the graph component, sorting by the datasets that have been more favorited. Supports ascending/descending order.</li>
<li><code class="prettyprint">relevance</code>: delegates sorting to the metadata component, sorting by the datasets which metadata better match the search criteria. Can only be used in conjunction with a <code class="prettyprint">search</code> parameter. Does not support ascending order.</li>
</ul>

<p>You can specify the sorting order by prepending the criteria with either <code class="prettyprint">-</code> for descending order or <code class="prettyprint">+</code> for ascending order. By default, ascending order is assumed.</p>

<h3 id="include-entities-associated-with-the-datasets">Include entities associated with the datasets</h3>

<blockquote>
<p>Loads metadata and widgets associated with each dataset:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?includes<span class="o">=</span>metadata,widget
</code></pre><pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"06c44f9a-aae7-401e-874c-de13b7764959"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Historical Precipitation -- U.S. (Puget Sound Lowlands)"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Historical-Precipitation-US-Puget-Sound-Lowlands-1490086842133"</span><span class="p">,</span><span class="w">
                </span><span class="err">...</span><span class="w">
                </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">  

                        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57a2251d5cd6980a00e054d9"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="s2">"widget"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">  
                        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"73f00267-fe34-42aa-a611-13b102f38d75"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?includes=widget%2Cmetadata&amp;page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?includes=widget%2Cmetadata&amp;page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?includes=widget%2Cmetadata&amp;page[number]=223&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"prev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?includes=widget%2Cmetadata&amp;page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?includes=widget%2Cmetadata&amp;page[number]=2&amp;page[size]=10"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">223</span><span class="p">,</span><span class="w">
        </span><span class="s2">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">2228</span><span class="p">,</span><span class="w">
        </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Loading layers for the given dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET http://api.resourcewatch.org/dataset?includes<span class="o">=</span>layer
</code></pre>
<blockquote>
<p>Loading the information about the user who authored the dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?includes<span class="o">=</span>user
</code></pre>
<p>When fetching datasets, you can request additional entities to be loaded. The following entities are available:</p>

<ul>
<li><code class="prettyprint">widget</code> - loads all widgets associated with each dataset.</li>
<li><code class="prettyprint">layer</code> - loads all layers associated with each dataset.</li>
<li><code class="prettyprint">vocabulary</code> - loads all vocabulary entities associated with each dataset.</li>
<li><code class="prettyprint">metadata</code> - loads all metadata associated with each dataset.</li>
<li><code class="prettyprint">user</code> - loads the name, email address and role of the author of the dataset. If you do not issue this request as an <code class="prettyprint">ADMIN</code> user, or if no user data is available, the <code class="prettyprint">user</code> object will be empty.</li>
</ul>

<p><strong>Note:</strong> If you include related entities (e.g. layers) with query filters, the filters will not cascade to the related entities.</p>

<h2 id="getting-a-dataset-by-id-or-slug">Getting a dataset by id or slug</h2>

<blockquote>
<p>Getting a dataset by id:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/dataset/51943691-eebc-4cb4-bdfb-057ad4fc2145"</span>
</code></pre>
<blockquote>
<p>Getting a dataset by slug:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/dataset/Timber-Production-RDC"</span>
</code></pre>
<blockquote>
<p>Response (equal for both cases):</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
    <span class="s2">"data"</span>: <span class="o">{</span>
        <span class="s2">"id"</span>: <span class="s2">"51943691-eebc-4cb4-bdfb-057ad4fc2145"</span>,
        <span class="s2">"type"</span>: <span class="s2">"dataset"</span>,
        <span class="s2">"attributes"</span>: <span class="o">{</span>
            <span class="s2">"name"</span>: <span class="s2">"Timber Production RDC"</span>,
            <span class="s2">"slug"</span>: <span class="s2">"Timber-Production-RDC"</span>,
            <span class="s2">"type"</span>: null,
            <span class="s2">"subtitle"</span>: null,
            <span class="s2">"application"</span>: <span class="o">[</span><span class="s2">"forest-atlas"</span><span class="o">]</span>,
            <span class="s2">"dataPath"</span>: null,
            <span class="s2">"attributesPath"</span>: null,
            <span class="s2">"connectorType"</span>: <span class="s2">"document"</span>,
            <span class="s2">"provider"</span>: <span class="s2">"csv"</span>,
            <span class="s2">"userId"</span>: <span class="s2">"58750a56dfc643722bdd02ab"</span>,
            <span class="s2">"connectorUrl"</span>: <span class="s2">"http://wri-forest-atlas.s3.amazonaws.com/COD/temp/annual%20timber%20production%20DRC%20%28test%29%20-%20Sheet1.csv"</span>,
            <span class="s2">"sources"</span>: <span class="o">[]</span>,
            <span class="s2">"tableName"</span>: <span class="s2">"index_51943691eebc4cb4bdfb057ad4fc2145"</span>,
            <span class="s2">"status"</span>: <span class="s2">"saved"</span>,
            <span class="s2">"overwrite"</span>: <span class="nb">false</span>,
            <span class="s2">"legend"</span>: <span class="o">{</span>
                <span class="s2">"date"</span>: <span class="o">[</span><span class="s2">"year"</span><span class="o">]</span>,
                <span class="s2">"region"</span>: <span class="o">[]</span>,
                <span class="s2">"country"</span>: <span class="o">[]</span>,
                <span class="s2">"long"</span>: <span class="s2">""</span>,
                <span class="s2">"lat"</span>: <span class="s2">""</span>
            <span class="o">}</span>,
            <span class="s2">"clonedHost"</span>: <span class="o">{}</span>,
            <span class="s2">"errorMessage"</span>: null,
            <span class="s2">"createdAt"</span>: <span class="s2">"2017-01-25T21:48:27.535Z"</span>,
            <span class="s2">"updatedAt"</span>: <span class="s2">"2017-01-25T21:48:28.675Z"</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p>If you know the id or the <code class="prettyprint">slug</code> of a dataset, then you can access it directly. Both id and <code class="prettyprint">slug</code> are case-sensitive.</p>

<p>Using this endpoint, you can also <a href="#include-entities-associated-with-the-datasets">include entities associated with the dataset</a>, in the same way you do when loading multiple datasets. </p>

<blockquote>
<p>Getting a dataset by its including its relationships:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/06c44f9a-aae7-401e-874c-de13b7764959?includes<span class="o">=</span>metadata,vocabulary,widget,layer
</code></pre>
<h2 id="getting-multiple-datasets-by-ids">Getting multiple datasets by ids</h2>

<p>This endpoint allows you to load multiple datasets by id in a single request.</p>

<h4 id="errors-for-getting-multiple-datasets-by-ids">Errors for getting multiple datasets by ids</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>ids: ids can not be empty.</td>
<td>The required <code class="prettyprint">ids</code> field is missing in the request body.</td>
</tr>
</tbody></table>

<blockquote>
<p>Getting multiple datasets by their ids:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/find-by-ids <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
    "ids": [
        "0706f039-b929-453e-b154-7392123ae99e",
        "0c630feb-8146-4fcc-a9be-be5adcb731c8",
    ]
}'</span>
</code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="w">    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0706f039-b929-453e-b154-7392123ae99e"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Social Vulnerability Index (2006-2010) -- U.S. (New Hampshire)"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Social-Vulnerability-Index-2006-2010-US-New-Hampshire-1490086842541"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tabular"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"subtitle"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
              </span><span class="err">...</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0c630feb-8146-4fcc-a9be-be5adcb731c8"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USGS Land Cover - Impervious Surface (2001) -- U.S. (Alaska)"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USGS-Land-Cover-Impervious-Surface-2001-US-Alaska-1490086842439"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"raster"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"subtitle"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
              </span><span class="err">...</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="creating-a-dataset">Creating a dataset</h2>

<p>So you are ready to create your first dataset on the RW API? Great, welcome aboard! These instruction will help you create your dataset on the RW API, so you can start sharing your data with the world and taking full advantage of all the RW API features on your projects.</p>

<p>Before creating a dataset, there are a few things you must know and do:</p>

<ul>
<li>In order to be able to create a dataset, you need to be <a href="#authentication">authenticated</a>.</li>
<li>Depending on your user account&rsquo;s role, you may have permission to create a dataset but not delete it afterwards - read more about this in <a href="index-rw.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
<li>All data uploaded to the RW API will be publicly visible and available to other users. </li>
</ul>

<p>The first thing to consider when creating a dataset is where your data currently is - this will determine the <a href="#dataset-providers">Dataset provider</a> you will need to use and, with it, a set of things you need to take into account - we&rsquo;ll cover each provider in detail shortly. When building your request to the RW API to create your dataset, you will need to take into account both the general details that follow, plus the details for the <code class="prettyprint">provider</code> you are using. Be sure to review both sections when creating your datasets, to avoid any pitfalls.</p>

<p>Creating a dataset is done using a POST request and passing the relevant data as body files. The supported body fields are as defined on the <a href="#dataset-reference">dataset reference</a> section, but the minimum field list you must specify for all datasets is:</p>

<ul>
<li>name</li>
<li>application</li>
<li>connectorType</li>
<li>provider </li>
</ul>

<p>Additionally, depending on the data provider you will be using, other fields may be required - we&rsquo;ll cover those in detail in each provider&rsquo;s specific documentation.</p>

<p>A successful dataset creation request will return a 200 HTTP code, and the dataset details as stored on the RW API. PAy special attention to the <code class="prettyprint">id</code> or the <code class="prettyprint">slug</code>, as those will allow you to <a href="#getting-a-dataset-by-id-or-slug">access your dataset</a> later.</p>

<p><strong>There&rsquo;s one aspect of the dataset creation process that you need to keep in mind: it is an asynchronous process.</strong> This means that a successful call to the create dataset endpoint will <em>start</em> the process, but the dataset may not be immediately available to be used. The <code class="prettyprint">status</code> field will tell you if the dataset creation process is in progress (status set to <code class="prettyprint">pending</code>), if something went wrong (<code class="prettyprint">failed</code>, in which case the <code class="prettyprint">errorMessage</code> field will have a short description of what went wrong) or if the dataset is available to be used (when status is <code class="prettyprint">saved</code>). The amount of time it takes for a newly created dataset to go from <code class="prettyprint">pending</code> to <code class="prettyprint">saved</code> depends on the provider and amount of data. Just keep in mind that you need to wait for the status to be set to <code class="prettyprint">saved</code> before starting to use your datasets. You should <a href="#getting-a-dataset-by-id-or-slug">check your dataset</a> manually to see when the <code class="prettyprint">status</code> is updated.</p>

<h4 id="errors-for-creating-a-dataset">Errors for creating a dataset</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><code class="prettyprint">&lt;field&gt;</code>: <code class="prettyprint">&lt;field&gt;</code> can not be empty</td>
<td>Your are missing a required field value.</td>
</tr>
<tr>
<td>400</td>
<td><code class="prettyprint">&lt;field&gt;</code>: empty or invalid <code class="prettyprint">&lt;field&gt;</code></td>
<td>The provided value for <code class="prettyprint">&lt;field&gt;</code> is invalid. This is usually happens if an invalid value type is provided, but certain fields use more advanced validation rules, that may produce this error message if validation fails (ie: on a carto dataset, the <code class="prettyprint">connectorUrl</code> must contain a valid carto URL).</td>
</tr>
<tr>
<td>400</td>
<td>provider: must be valid <list of valid providers></td>
<td>Your <code class="prettyprint">provider</code> value is invalid. The <code class="prettyprint">&lt;list of valid providers&gt;</code> will contain the list of providers that are supported for the <code class="prettyprint">connectorType</code> you specified.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You are not authenticated. If creating a BigQuery dataset, you may also see this message if you are authenticated. Refer to the <a href="#bigquery49">BigQuery documentation</a> for more details.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden - User does not have access to this dataset&rsquo;s application</td>
<td>You are trying to create a dataset with one or more <code class="prettyprint">application</code> values that are not associated with your user account.</td>
</tr>
</tbody></table>

<h3 id="carto-datasets">Carto datasets</h3>

<blockquote>
<p>Example of creating a dataset based on CartoDB data with the minimum fields required</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
  "dataset": {
    "name":"World Database on Protected Areas -- Global",
    "connectorType":"rest",
    "provider":"cartodb",
    "connectorUrl":"https://wri-01.carto.com/tables/wdpa_protected_areas/table",
    "application":[
      "gfw", 
      "forest-atlas"
    ]
  }
}'</span>
</code></pre>
<p>To create a dataset connected to a Carto data source, besides the common required fields, you must provide the following required data:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Example value</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">connectorType</code></td>
<td style="text-align: center">The type of connector. Must be set to <code class="prettyprint">rest</code>.</td>
<td style="text-align: right"><code class="prettyprint">rest</code></td>
</tr>
<tr>
<td><code class="prettyprint">provider</code></td>
<td style="text-align: center">The provider should be set to <code class="prettyprint">cartodb</code>.</td>
<td style="text-align: right"><code class="prettyprint">cartodb</code></td>
</tr>
<tr>
<td><code class="prettyprint">connectorUrl</code></td>
<td style="text-align: center">The URL for the CartoDB table that this dataset will be using.</td>
<td style="text-align: right"><code class="prettyprint">https://wri-01.carto.com/tables/wdpa_protected_areas/table</code></td>
</tr>
</tbody></table>

<p>The RW API will use the information above to directly query the Carto account specified on the <code class="prettyprint">connectorUrl</code> field whenever this dataset is accessed on the RW API. This has a few implications that you should be aware of:</p>

<ul>
<li>The Carto URL provided will be publicly visible to all RW API users.</li>
<li>The Carto account will see increased traffic.</li>
<li>Any changes made to the data hosted on Carto will be automatically reflected on the data served by the RW API for this dataset.</li>
<li>If you restructure or delete your Carto table, the corresponding RW API dataset will be in an invalid state, and you should delete it.</li>
</ul>

<p>The <code class="prettyprint">tableName</code> value of a carto-based dataset will automatically be filled with the name of the carto table corresponding to the dataset.</p>

<p>When creating a Carto based-dataset, the RW API will try to validate the <code class="prettyprint">connectorUrl</code> by trying to connect to the corresponding Carto table - the result of this will determine if the dataset&rsquo;s status will be set to <code class="prettyprint">saved</code> or <code class="prettyprint">error</code>.</p>

<h3 id="arcgis-feature-layer">ArcGIS feature layer</h3>

<blockquote>
<p>Example of creating a dataset based on ArcGIS feature layer data with the minimum fields required</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
  "dataset": {
    "connectorType":"rest",
    "provider":"featureservice",
    "connectorUrl":"https://services.arcgis.com/uDTUpUPbk8X8mXwl/arcgis/rest/services/Public_Schools_in_Onondaga_County/FeatureServer/0?f=json",
    "application":[
     "prep"
    ],
    "name":"Uncontrolled Public-Use Airports -- U.S."
  }
}'</span>
</code></pre>
<p>To create a dataset using ArcGIS feature layer as data source, besides the common required fields, you must provide the following required data:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Example value</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">connectorType</code></td>
<td style="text-align: center">The type of connector. Must be set to <code class="prettyprint">rest</code>.</td>
<td style="text-align: right"><code class="prettyprint">rest</code></td>
</tr>
<tr>
<td><code class="prettyprint">provider</code></td>
<td style="text-align: center">The provider should be set to <code class="prettyprint">featureservice</code>.</td>
<td style="text-align: right"><code class="prettyprint">featureservice</code></td>
</tr>
<tr>
<td><code class="prettyprint">connectorUrl</code></td>
<td style="text-align: center">The URL for the JSON data in ArcGIS services this dataset will be using.</td>
<td style="text-align: right">https://services.arcgis.com/uuid/arcgis/rest/services/example/FeatureServer/0?f=json</td>
</tr>
</tbody></table>

<p>The RW API will use the information above to directly query the ArcGIS feature layer server specified on the <code class="prettyprint">connectorUrl</code> field whenever this dataset is accessed on the RW API. This has a few implications that you should be aware of:</p>

<ul>
<li>The ArcGIS feature layer URL provided will be publicly visible to all RW API users.</li>
<li>The ArcGIS feature layer server will see increased traffic.</li>
<li>Any changes made to the data hosted on ArcGIS feature layer will be automatically reflected on the data served by the RW API for this dataset.</li>
<li>If you restructure or delete your ArcGIS feature layer dataset, the corresponding RW API dataset will be in an invalid state, and you should delete it.</li>
</ul>

<p>The <code class="prettyprint">tableName</code> value of a ArcGIS-based dataset will automatically be filled with the name of the ArcGIS feature layer table corresponding to the dataset.</p>

<p>When creating a ArcGIS-based dataset, the RW API will try to validate the <code class="prettyprint">connectorUrl</code> by trying to connect to the corresponding ArcGIS Feature Layer - the result of this will determine if the dataset&rsquo;s status will be set to <code class="prettyprint">saved</code> or <code class="prettyprint">error</code>.</p>

<h3 id="google-earth-engine">Google Earth Engine</h3>

<blockquote>
<p>Example of creating a dataset based on Google Earth Engine data with the minimum fields required</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
  "dataset": {
    "connectorType":"rest",
    "provider":"gee",
    "tableName": "JRC/GSW1_0/GlobalSurfaceWater"
    "application":[
     "rw"
    ],
    "name":"Water occurrence"
  }
}'</span>
</code></pre>
<p>To create a dataset using Google Earth Engine (GEE) as data source, besides the common required fields, you must provide the following required data:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Example value</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">connectorType</code></td>
<td style="text-align: center">The type of connector. Must be set to <code class="prettyprint">rest</code>.</td>
<td style="text-align: right"><code class="prettyprint">rest</code></td>
</tr>
<tr>
<td><code class="prettyprint">provider</code></td>
<td style="text-align: center">The provider should be set to <code class="prettyprint">gee</code>.</td>
<td style="text-align: right"><code class="prettyprint">gee</code></td>
</tr>
<tr>
<td><code class="prettyprint">tableName</code></td>
<td style="text-align: center">Relative path of the dataset within GEE.</td>
<td style="text-align: right">users/resourcewatch_wri/dataset_name</td>
</tr>
</tbody></table>

<p>The RW API will use the information above to directly query the GEE dataset specified on the <code class="prettyprint">tableName</code> field whenever this dataset is accessed on the RW API. This has a few implications that you should be aware of:</p>

<ul>
<li>The GEE resource name provided will be publicly visible to all RW API users.</li>
<li>Any changes made to the data hosted on GEE will be automatically reflected on the data served by the RW API for this dataset.</li>
<li>If you restructure or delete your GEE dataset, the corresponding RW API dataset will be in an invalid state, and you should delete it.</li>
</ul>

<p>When creating a GEE-based dataset, the RW API will try to validate it by connecting to the corresponding dataset GEE - the result of this will determine if the dataset&rsquo;s status will be set to <code class="prettyprint">saved</code> or <code class="prettyprint">error</code>.</p>

<h3 id="wms">WMS</h3>

<blockquote>
<p>Example of creating a dataset based on WMS data with the minimum fields required</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s1">'https://api.resourcewatch.org/v1/dataset'</span> -d <span class="se">\</span>
-H <span class="s1">'Authorization: Bearer &lt;your-token&gt;'</span>  <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span> -d <span class="se">\</span>
<span class="s1">'{
   "dataset": {
     "application": [
       "rw"
     ],
     "name": "Seasonal variability",
     "connectorType": "wms",
     "provider":"wms",
     "connectorUrl":"http://gis-gfw.wri.org/arcgis/rest/services/prep/nex_gddp_indicators/MapServer/6?f=pjson"
   }
 }
'</span>
</code></pre>
<p>To create a dataset using WMS as data source, you should provide the following data:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Example value</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">connectorType</code></td>
<td style="text-align: center">The type of connector. Must be set to <code class="prettyprint">wms</code>.</td>
<td style="text-align: right"><code class="prettyprint">wms</code></td>
</tr>
<tr>
<td><code class="prettyprint">provider</code></td>
<td style="text-align: center">The provider should be set to <code class="prettyprint">wms</code>.</td>
<td style="text-align: right"><code class="prettyprint">wms</code></td>
</tr>
<tr>
<td><code class="prettyprint">connectorUrl</code></td>
<td style="text-align: center">URL of the server hosting the data in WMS format.</td>
<td style="text-align: right"><code class="prettyprint">https://maps.heigit.org/osm-wms/service?request=GetCapabilities&amp;service=WMS</code></td>
</tr>
</tbody></table>

<p>The RW API will use the information above to directly query the WMS dataset specified on the <code class="prettyprint">connectorUrl</code> field whenever this dataset is accessed on the RW API. This has a few implications that you should be aware of:</p>

<ul>
<li>The WMS server URL provided will be publicly visible to all RW API users.</li>
<li>Any changes made to the data hosted on the WMS server data will be automatically reflected on the data served by the RW API for this dataset.</li>
<li>If you restructure or delete your WMS server data, the corresponding RW API dataset will be in an invalid state, and you should delete it.</li>
</ul>

<p>When creating a WMS-based dataset, no validation is done - the dataset is automatically created in a <code class="prettyprint">saved</code> state.</p>

<h3 id="document-based-datasets-json-csv-tsv-or-xml">Document based datasets: JSON, CSV, TSV or XML</h3>

<blockquote>
<p>Creating a CSV dataset with data provided by externally hosted files:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
  "dataset": {
    "connectorType":"document",
    "provider":"csv",
    "sources": [
      "https://gfw2-data.s3.amazonaws.com/alerts-tsv/glad_headers_1.csv",
      "https://gfw2-data.s3.amazonaws.com/alerts-tsv/glad_headers_2.csv",
      "https://gfw2-data.s3.amazonaws.com/alerts-tsv/glad_headers_3.csv"
    ],
    "application":[
     "gfw"
    ],
    "name":"Glad points"
  }
}'</span>
</code></pre>
<blockquote>
<p>Creating a JSON dataset with data provided on the request body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
  "dataset": {
    "connectorType":"document",
    "provider":"json",
    "application":[
     "your", "apps"
    ],
    "data": {"myData":[
            {"name":"nameOne", "id":"random1"},
            {"name":"nameTow", "id":"random2"}
          ]},
    "name":"Example JSON Dataset"
  }
}'</span>
</code></pre>
<p>This dataset hosts data from files in JSON, CSV, TSV or XML format.</p>

<p>Here&rsquo;s a breakdown of the fields you need to specify when creating a document type dataset, besides the common required fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Example value</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">connectorType</code></td>
<td style="text-align: center">The type of connector. Must be set to <code class="prettyprint">document</code>.</td>
<td style="text-align: right"><code class="prettyprint">document</code></td>
</tr>
<tr>
<td><code class="prettyprint">provider</code></td>
<td style="text-align: center">The type of data you are uploading. Must be one of the following: <code class="prettyprint">csv</code>, <code class="prettyprint">tsv</code>, <code class="prettyprint">json</code> or <code class="prettyprint">xml</code>.</td>
<td style="text-align: right"><code class="prettyprint">csv</code>, <code class="prettyprint">tsv</code>, <code class="prettyprint">json</code> or <code class="prettyprint">xml</code></td>
</tr>
<tr>
<td><code class="prettyprint">connectorUrl</code></td>
<td style="text-align: center">URL from which to source data.</td>
<td style="text-align: right">http://gis-gfw.wri.org/arcgis/rest/services/prep/nex_gddp_indicators/MapServer/6?f=pjson</td>
</tr>
<tr>
<td><code class="prettyprint">sources</code></td>
<td style="text-align: center">List of URLs from which to source data.</td>
<td style="text-align: right">[&lsquo;http://gis-gfw.wri.org/arcgis/rest/services/prep/nex_gddp_indicators/MapServer/6?f=pjson&rsquo;,&#39;http://gis-gfw.wri.org/arcgis/rest/services/prep/nex_gddp_indicators/MapServer/7?f=pjson&rsquo;]</td>
</tr>
<tr>
<td><code class="prettyprint">data</code></td>
<td style="text-align: center">JSON DATA only for json connector if connectorUrl not present.</td>
<td style="text-align: right">[{&ldquo;key&rdquo;:&ldquo;value1&rdquo;},{&ldquo;key&rdquo;:&ldquo;value2&rdquo;}]]</td>
</tr>
</tbody></table>

<p>When creating a document based dataset, you have multiple ways of providing your data to the API, of which you should use only one:</p>

<ul>
<li>The <code class="prettyprint">sources</code> field expects a list of URL containing files in the format matching your <code class="prettyprint">provider</code> value. This is the recommended way of uploading data.</li>
<li>The <code class="prettyprint">connectorUrl</code> field is similar to <code class="prettyprint">sources</code>, but it only accepts a single value. <strong>Deprecation notice</strong>: The previously used <code class="prettyprint">connectorUrl</code> field should be considered deprecated when creating document-based datasets.</li>
<li>If creating a dataset based on JSON data, you can upload the data on the actual request you issue to the API, inside the <code class="prettyprint">data</code> field.</li>
</ul>

<p>The data passed in <code class="prettyprint">sources</code> or <code class="prettyprint">connectorUrl</code> must be available on a publicly accessible URLs, specified in the <code class="prettyprint">sources</code> array field or the <code class="prettyprint">connectorUrl</code> single value field. The URLs must be an accessible CSV, TSV or XML file, non-compressed - zip, tar, tar.gz, etc are not supported. <code class="prettyprint">sources</code> allows you to specify multiple URLs for a single dataset, provided all files have the same format and data structure. This is particularly useful when creating very large datasets, as it will allow the creation process to be parallelized. No warranties are provided about the order in which the files or their parts are imported.</p>

<p><em>Notice: If you want to create a dataset from a file you have, but that it&rsquo;s not available on a public URL, check out our docs for <a href="#uploading-a-dataset">uploading a dataset</a>.</em></p>

<p>Unlike with other dataset types, when the dataset is created, the data is copied from the provided source into the API&rsquo;s internal Elasticsearch instance, which is the source used for subsequent queries or other operations. This has a few implications that you should be aware of:</p>

<ul>
<li>The URLs provided in <code class="prettyprint">sources</code> or <code class="prettyprint">connectorUrl</code> will be publicly visible to all RW API users.</li>
<li>On dataset creation, those URLs will be visited as the API loads and copies your data.</li>
<li>Queries to the dataset will use the API&rsquo;s internal copy of your data. If you wish to update that data, see the documentation below on how to update your data.</li>
<li>If the URLs provided become unavailable after the creation process is over, the dataset will continue to work normally - your data will still be available online.</li>
</ul>

<p><em>Notice: When creating a document-based dataset, if any of the fields has a numerical name (for example, column: <code class="prettyprint">3</code>), a string named <code class="prettyprint">col_</code> will be appended to the beginning of the name of the column. This way, an uploaded column named <code class="prettyprint">3</code> will become <code class="prettyprint">col_3</code>.</em></p>

<p><em>Tip: If you want to periodically and automatically update your document based dataset with new data, check out the <a href="#dataset-automatic-synchronization">dataset automatic synchronization</a> functionality.</em></p>

<p>When creating a document-based dataset, the RW API will start a complex process that copies your data into the API&rsquo;s internal database, and perform certain indexing actions. This process is called a <strong>Task</strong>, and is given a <code class="prettyprint">taskId</code> that is stored on the dataset&rsquo;s field with the same name. Depending on the size of your dataset, this may take from a few seconds to a few hours to complete. The result of this import process will determine if the dataset&rsquo;s status will be set to <code class="prettyprint">saved</code> or <code class="prettyprint">error</code>. You can follow this process by using the <code class="prettyprint">taskId</code> value with the <a href="#get-a-single-task">Tasks API</a>.</p>

<h4 id="using-the-legend-fields-to-define-field-types">Using the legend fields to define field types</h4>

<p>By default, when creating a document based dataset, the data is ingested by the API and the field types are automatically determined by the underlying Elasticsearch <a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.5/mapping.html#_dynamic_mapping">dynamic mapping API</a>.
However, in some scenarios, it may be desirable to specify some or all of these mappings manually, to match each field type to its Elasticsearch equivalent.</p>

<p>When defining manual mappings, you don&rsquo;t need to map every single field. When processing the data, if a field is found for which there isn&rsquo;t a manual mapping, Elasticsearch will fallback to its dynamic mapping algorithm to try and guess that field&rsquo;s type. This API only supports a single explicit mapping per field, meaning you cannot declare a given field as both <code class="prettyprint">text</code> and <code class="prettyprint">keyword</code> for example.</p>

<p>Field mapping can only be defined on dataset creation. Should you want to change these mappings, you can only do so by creating a new dataset with the new mapping structure.</p>

<p>The <code class="prettyprint">legend</code> field allows explicitly identifying the following mappings:</p>

<table><thead>
<tr>
<th>Mapping</th>
<th style="text-align: center">Notes</th>
</tr>
</thead><tbody>
<tr>
<td>lat</td>
<td style="text-align: center">If <code class="prettyprint">lat</code> and <code class="prettyprint">long</code> are both provided, a <code class="prettyprint">the_geom</code> mapping is added</td>
</tr>
<tr>
<td>long</td>
<td style="text-align: center">If <code class="prettyprint">lat</code> and <code class="prettyprint">long</code> are both provided, a <code class="prettyprint">the_geom</code> mapping is added</td>
</tr>
<tr>
<td>date</td>
<td style="text-align: center">Name of columns with date values (ISO Format)</td>
</tr>
<tr>
<td>country</td>
<td style="text-align: center">Name of columns with country values (ISO3 code)</td>
</tr>
<tr>
<td>region</td>
<td style="text-align: center">Name of columns with region values (ISO3 code)</td>
</tr>
<tr>
<td></td>
<td style="text-align: center"></td>
</tr>
<tr>
<td>nested</td>
<td style="text-align: center"><a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.5/nested.html">Nested objects</a> need to be explicitly identified in order to be indexed.</td>
</tr>
<tr>
<td></td>
<td style="text-align: center"></td>
</tr>
<tr>
<td>integer</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>short</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>byte</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>double</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>float</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>half_float</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>scaled_float</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>boolean</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>binary</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>text</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>keyword</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
</tbody></table>

<p>For more details on the characteristics of each of the basic data types, refer to the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.5/mapping.html#_field_datatypes">Elasticsearch documentation</a>.</p>

<h4 id="uploading-a-dataset-file">Uploading a dataset file</h4>

<blockquote>
<p>Upload raw data for using in a dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/upload <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-F <span class="nv">provider</span><span class="o">=</span>csv,
-F <span class="nv">dataset</span><span class="o">=</span>@&lt;your-file&gt;
</code></pre>
<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"connectorUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw.dataset.raw/some-file.csv"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Country (region)"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Positive affect"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Negative affect"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Social support"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Freedom"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Corruption"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Generosity"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Using the returned connectorUrl to create a new dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>
<span class="s1">'{
  "dataset": {
    "connectorType":"document",
    "provider":"csv",
    "connectorUrl":"rw.dataset.raw/some-file.csv",
    "application":[
     "your", "apps"
    ],
    "name":"Example RAW Data Dataset"
  }
}'</span>
</code></pre>
<p>The <code class="prettyprint">upload</code> endpoint allows you to create datasets on the API from local files that aren&rsquo;t available online. 
If your file is up to 4MB in size, you can upload it to the API by using the <code class="prettyprint">upload</code> endpoint. 
This endpoint accepts a file in the &ldquo;dataset&rdquo; field of your POST request, and a <code class="prettyprint">provider</code> that matches your file type and extension. 
The supported formats/extensions are: csv, json, tsv, xml, tif, tiff and geo.tiff.
The request uploads the file to the API, and returns a specially crafted <code class="prettyprint">connectorUrl</code> value, and a list of fields found in your file.
With this data, you can create a document type dataset by passing it to the <code class="prettyprint">connectorUrl</code> value of a <a href="#document-based-datasets-json-csv-tsv-or-xml">new document type dataset</a>.</p>

<h4 id="errors-for-upload-a-dataset-file">Errors for upload a dataset file</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>- no file to check -</td>
<td>A file was not provided, or was provided in the wrong request field.</td>
</tr>
<tr>
<td>400</td>
<td>- dataset: file dataset can not be a empty file -</td>
<td>A file was not provided, or was provided in the wrong request field.</td>
</tr>
<tr>
<td>400</td>
<td>provider: provider must be in [csv,json,tsv,xml,tif,tiff,geo.tiff].</td>
<td>A file was not provided, or was provided in the wrong request field.</td>
</tr>
<tr>
<td>400</td>
<td>- dataset: file too large -</td>
<td>Your file is larger than 4MB.</td>
</tr>
<tr>
<td>400</td>
<td>- dataset: file <your file name> is bad file type. -</td>
<td>The <code class="prettyprint">provider</code> value must match the extension of the uploaded file.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to upload a file.</td>
</tr>
</tbody></table>

<h2 id="updating-a-dataset">Updating a dataset</h2>

<p>There are multiple options to update a dataset, depending on what modification you are trying to achieve, and the underlying data provider of the dataset itself. This section covers the different endpoints that allow you to modify a dataset, their details, and helps you pick the option that best fits your scenario. We recommend reviewing all of them before proceeding, so you can find the endpoint that best matches your needs.</p>

<h3 id="updating-the-fields-of-a-dataset">Updating the fields of a dataset</h3>

<blockquote>
<p>Example request for updating the name of a dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/dataset/&lt;dataset-id-or-slug&gt; <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> -d <span class="se">\</span>
<span class="s1">'{
    "name": "Another name for the dataset"
}'</span>
</code></pre>
<p>In order to modify the fields of a dataset, you can use the patch dataset endpoint. 
This endpoint allows you to modify most of your dataset&rsquo;s details, like the name or publishing status, but can also be used to modify internal fields of a dataset, like <code class="prettyprint">connectorType</code>. 
When making these changes, be mindful that some of these fields are critical to the correct behavior of the dataset, and providing incorrect values may break your dataset. 
There are other endpoints documented in this page that allow you to perform certain update-like operations (ie. update data on a document-type dataset), so refer to those first before using this endpoint. 
Also important to keep in mind is the fact that this endpoint does not perform validation on things like <code class="prettyprint">connectorUrl</code>/<code class="prettyprint">sources</code> URLs.</p>

<p>All the fields in the <a href="#dataset-reference">dataset reference</a> can be modified, except the following:</p>

<ul>
<li><code class="prettyprint">slug</code></li>
<li><code class="prettyprint">userId</code></li>
<li><code class="prettyprint">createdAt</code></li>
<li><code class="prettyprint">updatedAt</code></li>
</ul>

<p>Additionally, certain fields have special behavior associated with them:</p>

<ul>
<li><code class="prettyprint">status</code> can only be modified by users with <code class="prettyprint">ADMIN</code> role or by other microservices.</li>
<li><code class="prettyprint">taskId</code> and <code class="prettyprint">errorMessage</code> can only be modified by other microservices.</li>
<li><code class="prettyprint">published</code> can only be modified by users with <code class="prettyprint">ADMIN</code> role.</li>
<li><code class="prettyprint">env</code> changes will not only affect the dataset, but also related widgets and layers. Refer to the PATCH <code class="prettyprint">/widget/change-environment/&lt;dataset id&gt;/&lt;env&gt;</code> and the the PATCH <code class="prettyprint">/layer/change-environment/&lt;dataset id&gt;/&lt;env&gt;</code> endpoints respectively for more details.</li>
</ul>

<p>When passing new values for Object type fields, the new value will fully overwrite the previous one. It&rsquo;s up to you, as an API user, to build any merging logic into your application.</p>

<p>To perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must be logged in and belong to the same application as the dataset</li>
<li>the user must comply with <a href="index-rw.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
</ul>

<p>Use this endpoint when:</p>

<ul>
<li>Modifying the fields of a dataset, like name, and not the data itself.</li>
<li>Modifying the source of data for any dataset that&rsquo;s not document based (<code class="prettyprint">connectorType</code> values other than <code class="prettyprint">document</code>).</li>
<li>Making advanced changes to a dataset.</li>
</ul>

<h4 id="errors-for-updating-the-fields-of-a-dataset">Errors for updating the fields of a dataset</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to update a dataset.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code class="prettyprint">ADMIN</code> role, or have role <code class="prettyprint">MANAGER</code> and be the dataset&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the dataset).</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to update a dataset with one or more <code class="prettyprint">application</code> values that are not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Dataset with id <id> doesn&rsquo;t exist</td>
<td>A dataset with the provided id does not exist.</td>
</tr>
</tbody></table>

<h3 id="concatenate-and-append-data-to-a-document-based-dataset">Concatenate and append data to a document based dataset</h3>

<blockquote>
<p>Concatenate data using external data source:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/:dataset_id/concat <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
    "provider": "json",
    "sources": ["&lt;csv1Url&gt;", "&lt;csv2Url&gt;", "&lt;csv3Url&gt;"],
    "dataPath": "data... etc"
}'</span>
</code></pre>
<blockquote>
<p>Append data using external data source:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/:dataset_id/append <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
    "provider": "json",
    "sources": ["&lt;csvUrl&gt;"],
    "dataPath": "data... etc"
}'</span>
</code></pre>
<blockquote>
<p>Concatenate data using JSON array in post body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/:dataset_id/concat <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
    "provider": "json",
    "data": [{},{}]
}'</span>
</code></pre>
<p>Using these endpoints, you can add more data to an already existing dataset. They are exclusively available for document based datasets - you&rsquo;ll get a <code class="prettyprint">404</code> error if you use them on a dataset of a different type. You can either provide the URL for the file containing the data you wish to add, or simply provide that data in the body of your request, as a JSON object.</p>

<p>These process are asynchronous and not instantaneous. Immediately when triggered, these requests will cause the dataset&rsquo;s <code class="prettyprint">status</code> to be set to <code class="prettyprint">pending</code>, meaning you will not be able to issue new overwrite, concatenate or append requests. Once the request has been fully processed, the status will be automatically set to <code class="prettyprint">saved</code>. Depending on factors like API load or the size of the data being uploaded, this may take from a few minutes to a few hours to occur. The API does not issue any notification when the asynchronous operation is finished.</p>

<p>In order to perform these operation, the following conditions must be met:</p>

<ul>
<li>the dataset&rsquo;s <code class="prettyprint">overwrite</code> property must be set to <code class="prettyprint">true</code>.</li>
<li>the dataset&rsquo;s <code class="prettyprint">status</code> property must be set to <code class="prettyprint">saved</code>.</li>
<li>the user must comply with <a href="index-rw.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
<li>the user must have at least one overlapping application with the ones associated with the dataset.</li>
</ul>

<p>While they ultimately achieve a very similar end result, concatenate and append rely on different internal processes, each with its own characteristics.</p>

<ul>
<li>The concatenate process relies on a slower approach to ensure the operation is atomic. Until the operation is completed, you will see the dataset data as it was before the concatenate operation was triggered. If the operation fails, the old version of the data is kept accessible as it was before the concatenation process was started. There&rsquo;s a known issue where concatenating new data to already existing large datasets may result in failure.</li>
<li>The append operation relies on a faster process that does not offer atomicity. The new data is simply added to the current dataset, and any queries done while this process is taking place may produce results based on the preexisting data mixed with parts of the newly added values. Should the operation fail halfway, your dataset may contain all the preexisting records as well as part (but not all) of the newly added ones.</li>
</ul>

<aside class="notice">
    Using the previous <code class="prettyprint">url</code> field to pass the url of a single file is still permitted but is now deprecated in favor of <code class="prettyprint">sources</code>.
</aside>

<p>Here&rsquo;s a more detailed description of the request&rsquo;s body fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Values</th>
<th style="text-align: right">Required</th>
</tr>
</thead><tbody>
<tr>
<td>provider</td>
<td style="text-align: center">Dataset provider this include inner connectors and 3rd party ones</td>
<td style="text-align: right">String</td>
<td style="text-align: right">A valid dataset provider</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>sources</td>
<td style="text-align: center">List of URLs from which to source data</td>
<td style="text-align: right">Array</td>
<td style="text-align: right">URL array</td>
<td style="text-align: right">Yes, unless JSON data is provided using the <code class="prettyprint">data</code> field</td>
</tr>
<tr>
<td>data</td>
<td style="text-align: center">JSON DATA only for json connector if connectorUrl not present</td>
<td style="text-align: right">Array</td>
<td style="text-align: right">[{},{},{}]</td>
<td style="text-align: right">Yes for JSON if <code class="prettyprint">sources</code> is not present</td>
</tr>
<tr>
<td>dataPath</td>
<td style="text-align: center">Path to the data in a JSON file-based datasets</td>
<td style="text-align: right">String</td>
<td style="text-align: right">&ldquo;</td>
<td style="text-align: right">No</td>
</tr>
</tbody></table>

<p><em>Tip: If you want to periodically and automatically concatenate data to your document based dataset, check out the <a href="#dataset-automatic-synchronization">dataset automatic synchronization</a> functionality.</em></p>

<p>Use this endpoint when:</p>

<ul>
<li>Adding new data to an existing document based dataset, without modifying/removing the existing one.</li>
</ul>

<h4 id="errors-for-concatenating-and-appending-data-to-a-document-based-dataset">Errors for concatenating and appending data to a document based dataset</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Dataset is not in saved status</td>
<td>The dataset&rsquo;s <code class="prettyprint">status</code> value is not set to <code class="prettyprint">saved</code>. Refer to <a href="#dataset-reference">dataset reference</a> for more details on this field and its values.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to update a dataset.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code class="prettyprint">ADMIN</code> role, or have role <code class="prettyprint">MANAGER</code> and be the dataset&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the dataset).</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to update a dataset with one or more <code class="prettyprint">application</code> values that are not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Endpoint not found</td>
<td>A dataset with the provided id does not exist, or does not have <code class="prettyprint">connectorType</code> with value <code class="prettyprint">document</code>.</td>
</tr>
<tr>
<td>409</td>
<td>Dataset locked. Overwrite false.</td>
<td>The dataset you&rsquo;re trying to modify has <code class="prettyprint">overwrite</code> value set to <code class="prettyprint">false</code>, to explicitly prevent data modifications.</td>
</tr>
</tbody></table>

<h3 id="overwrite-data-for-a-document-based-dataset">Overwrite data for a document based dataset</h3>

<blockquote>
<p>Overwrite data using external data source:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/:dataset_id/data-overwrite <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
   "sources": ["&lt;url of the data source&gt;"],
   "provider": "csv"
}'</span>
</code></pre>
<blockquote>
<p>Overwrite data using JSON array in post body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/:dataset_id/data-overwrite <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
   "data": [{},{}],
   "provider": "csv"
}'</span>
</code></pre>
<p>Using this endpoint, you can add or completely replace the data of an already existing dataset. 
It&rsquo;s exclusively available for document based datasets - you&rsquo;ll get a <code class="prettyprint">404</code> error if you use it on a dataset of a different type. 
All previously existing data will be permanently deleted. 
You can either provide the URL(s) for the file(s) containing the data you wish to add, or simply provide that data in the body of your request, as a JSON object. 
There are no requirements regarding similarity of the data structure between existing and new data - your overwrite data can have a completely different data schema.</p>

<p>This process is asynchronous and not instantaneous. Immediately when triggered, this request will cause the dataset&rsquo;s <code class="prettyprint">status</code> to be set to <code class="prettyprint">pending</code>, meaning you will not be able to issue new overwrite or concat requests, and will not yet be able to access the new data yet. Once the request has been fully processed, the status will be automatically set to <code class="prettyprint">saved</code> and the new data will be accessible. Depending on factors like API load or the size of the data being uploaded, this may take from a few minutes to a few hours to occur. The API does not issue any notification when the asynchronous operation is finished.</p>

<p>In order to perform this operation, the following conditions must be met:</p>

<ul>
<li>the dataset&rsquo;s <code class="prettyprint">overwrite</code> property must be set to <code class="prettyprint">true</code>.</li>
<li>the dataset&rsquo;s <code class="prettyprint">status</code> property must be set to <code class="prettyprint">saved</code>.</li>
<li>the user must comply with <a href="index-rw.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
<li>the user must have at least one overlapping application with the ones associated with the dataset.</li>
</ul>

<p>Here&rsquo;s a more detailed description of the request&rsquo;s body fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Values</th>
<th style="text-align: right">Required</th>
</tr>
</thead><tbody>
<tr>
<td>provider</td>
<td style="text-align: center">Dataset provider this include inner connectors and 3rd party ones</td>
<td style="text-align: right">String</td>
<td style="text-align: right">A valid dataset provider</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>sources</td>
<td style="text-align: center">List of URLs from which to source data</td>
<td style="text-align: right">Array</td>
<td style="text-align: right">URL array</td>
<td style="text-align: right">Yes, unless JSON data is provided using the <code class="prettyprint">data</code> field</td>
</tr>
<tr>
<td>data</td>
<td style="text-align: center">JSON DATA only for json connector if connectorUrl not present</td>
<td style="text-align: right">Array</td>
<td style="text-align: right">[{},{},{}]</td>
<td style="text-align: right">Yes for JSON if <code class="prettyprint">sources</code> is not present</td>
</tr>
<tr>
<td>legend</td>
<td style="text-align: center">The schema of the new data. If none is provided, a guessing mechanism will be used. The existing <code class="prettyprint">legend</code> value of the dataset will be ignored and overwritten in all <code class="prettyprint">overwrite</code> operations. See <a href="#legend">the legend section</a> above for more details.</td>
<td style="text-align: right">Object</td>
<td style="text-align: right"></td>
<td style="text-align: right">No</td>
</tr>
</tbody></table>

<p><em>Tip: If you want to periodically and automatically overwrite the data on your document based dataset, check out the <a href="#dataset-automatic-synchronization">dataset automatic synchronization</a> functionality.</em></p>

<h4 id="errors-for-overwriting-data-for-a-document-based-dataset">Errors for overwriting data for a document based dataset</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Dataset is not in saved status</td>
<td>The dataset&rsquo;s <code class="prettyprint">status</code> value is not set to <code class="prettyprint">saved</code>. Refer to <a href="#dataset-reference">dataset reference</a> for more details on this field and its values.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to update a dataset.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code class="prettyprint">ADMIN</code> role, or have role <code class="prettyprint">MANAGER</code> and be the dataset&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the dataset).</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to update a dataset with one or more <code class="prettyprint">application</code> values that are not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Endpoint not found</td>
<td>A dataset with the provided id does not exist, or does not have <code class="prettyprint">connectorType</code> with value <code class="prettyprint">document</code>.</td>
</tr>
<tr>
<td>409</td>
<td>Dataset locked. Overwrite false.</td>
<td>The dataset you&rsquo;re trying to modify has <code class="prettyprint">overwrite</code> value set to <code class="prettyprint">false</code>, to explicitly prevent data modifications.</td>
</tr>
</tbody></table>

<p>Use this endpoint when:</p>

<ul>
<li>Fully replacing the data of an existing document based dataset, while keeping other values like id or name.</li>
<li>Modifying the structure of the data for a document based dataset.</li>
</ul>

<h2 id="cloning-a-dataset">Cloning a dataset</h2>

<blockquote>
<p>Example request for cloning a dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/5306fd54-df71-4e20-8b34-2ff464ab28be/clone <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
-H <span class="s2">"Content-Type: application/json"</span> -d <span class="se">\</span>
<span class="s1">'{
  "dataset": {
    "datasetUrl": "/query/5306fd54-df71-4e20-8b34-2ff464ab28be?sql=select%20%2A%20from%20data%20limit%2010",
    "application": [
      "your",
      "apps"
    ],
    "legend": {...},
    "applicationConfig" : {...}
  }
}'</span>
</code></pre>
<p>This endpoint allows you to create a new, json based dataset, from the result of a RW API endpoint call. The basic usage example would be to create a new dataset based on a custom query to an existing dataset - this is illustrated in the example <code class="prettyprint">curl</code> call in this section. Other use cases could be converting the result of an analysis endpoint into a dataset, or capturing the result of a query to a REST based dataset (cartodb, arcgis, etc) to an internal json representation of the same data, that is kept in the API database.   </p>

<p>In order to perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must belong to the applications specified in the request body.</li>
<li>the user must comply with <a href="index-rw.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
</ul>

<p>The request requires two fields to be present:</p>

<ul>
<li><code class="prettyprint">datasetUrl</code>: the URL from where to load the data to populate the new dataset. Must be RW API, relative path, like <code class="prettyprint">/query/5306fd54-df71-4e20-8b34-2ff464ab28be?sql=select%20%2A%20from%20data%20limit%2010</code>.</li>
<li><code class="prettyprint">application</code>: the array of applications to which the new dataset will belong.</li>
</ul>

<p>Additionally, you can optionally specify these fields:</p>

<ul>
<li><code class="prettyprint">legend</code>: field structure and type of the new dataset. Refer to <a href="#dataset-reference">dataset reference</a> for more details.</li>
<li><code class="prettyprint">applicationConfig</code>: application-specific configuration. Refer to <a href="#dataset-reference">dataset reference</a> for more details. If not provided, it will be copied from the original dataset.</li>
<li><code class="prettyprint">published</code>: if the user has <code class="prettyprint">ADMIN</code> role, they can set this value to <code class="prettyprint">true</code>. </li>
</ul>

<p>For the fields in the following list, values will be copied from the original dataset to the new one, unless specified:</p>

<ul>
<li><code class="prettyprint">name</code>: copied from the original dataset, with a timestamp appended, to ensure uniqueness.</li>
<li><code class="prettyprint">subtitle</code></li>
<li><code class="prettyprint">dataPath</code>: will always be set to <code class="prettyprint">data</code>, matching the expected response structure of RW API responses like <code class="prettyprint">/query</code> that encapsulate the &quot;real&rdquo; data in a <code class="prettyprint">data</code> json object.</li>
<li><code class="prettyprint">connectorType</code>: will be set to <code class="prettyprint">document</code></li>
<li><code class="prettyprint">provider</code>: will be set to <code class="prettyprint">json</code></li>
<li><code class="prettyprint">attributesPath</code></li>
<li><code class="prettyprint">tableName</code></li>
<li><code class="prettyprint">dataLastUpdated</code></li>
<li><code class="prettyprint">overwrite</code></li>
<li><code class="prettyprint">published</code>: if the user has role <code class="prettyprint">ADMIN</code> and does not explicitly set <code class="prettyprint">published</code> to <code class="prettyprint">true</code> on the request body, this value is inherited. Otherwise, it&rsquo;s set to <code class="prettyprint">false</code>.</li>
</ul>

<p>Datasets created through a cloning operation will have a specific <code class="prettyprint">clonedHost</code> object, with additional data. Refer to <a href="#dataset-reference">dataset reference</a> for more details on the content of this field. </p>

<p>The dataset cloning requests accepts an optional <code class="prettyprint">full</code> boolean query parameter that, when set to <code class="prettyprint">true</code>, will clone of vocabulary-related data and metadata from the original dataset to the new one.</p>

<h4 id="errors-for-cloning-a-dataset">Errors for cloning a dataset</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><field>: <field> can not be empty.</td>
<td>The required field identified in the error message is missing in the request body.</td>
</tr>
<tr>
<td>400</td>
<td>- application: must be a non-empty array -</td>
<td><code class="prettyprint">application</code> must be specified as an array.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to clone a dataset.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code class="prettyprint">ADMIN</code> role, or have role <code class="prettyprint">MANAGER</code> and be the dataset&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the dataset).</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden - User does not have access to this dataset&rsquo;s application</td>
<td>You specified an <code class="prettyprint">application</code> in your request body that is not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Dataset with id <id> doesn&rsquo;t exist</td>
<td>A dataset with the provided id does not exist.</td>
</tr>
</tbody></table>

<h2 id="deleting-a-dataset">Deleting a dataset</h2>

<p>Use this endpoint if you wish to delete a dataset. Deleting a dataset of type document (<code class="prettyprint">connectorType</code> with value <code class="prettyprint">document</code>) will cause the API&rsquo;s internal copy of said data to be deleted. Dataset types that proxy data from an external source (ie. carto, gee, etc) will be deleted without modifying said external source.</p>

<p>When deleting a dataset that is associated with multiple <code class="prettyprint">application</code> values, the user issuing the request must be associated with all of them in order for the dataset to be deleted. If that&rsquo;s not the case, the <code class="prettyprint">application</code> values associated with the user will be removed from the dataset&rsquo;s <code class="prettyprint">application</code> list, and no further action will be taken - the dataset itself and its associated resources will continue to exist. The dataset is only actually deleted if the user has access to all of the <code class="prettyprint">application</code> to which the dataset belongs. </p>

<p>Besides deleting the dataset itself, this endpoint also deletes graph vocabularies, layers, widgets and metadata related to the dataset itself. These delete operations are issued in this order, and prior to deleting the dataset itself, but are not atomic - if one of them fails (for example, if attempting to delete a protected resource), the following ones are canceled, but the already deleted elements are not restored. </p>

<p>In order to delete a dataset, the following conditions must be met:</p>

<ul>
<li>the dataset&rsquo;s <code class="prettyprint">protected</code> property must be set to <code class="prettyprint">false</code>.</li>
<li>the user must be logged in and belong to the same application as the dataset</li>
<li>the user must comply with <a href="index-rw.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
</ul>

<blockquote>
<p>Example request for deleting a dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt; <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
-H <span class="s2">"Content-Type: application/json"</span>
</code></pre>
<h4 id="errors-for-deleting-a-dataset">Errors for deleting a dataset</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Dataset is protected</td>
<td>You are attempting to delete a dataset that has <code class="prettyprint">protected</code> set to prevent deletion.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to delete a dataset.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code class="prettyprint">ADMIN</code> role, or have role <code class="prettyprint">MANAGER</code> and be the dataset&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the dataset)</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to delete a dataset with one or more <code class="prettyprint">application</code> values that are not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Dataset with id <id> doesn&rsquo;t exist</td>
<td>A dataset with the provided id does not exist.</td>
</tr>
</tbody></table>

<h2 id="dataset-automatic-synchronization">Dataset automatic synchronization</h2>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>
<span class="s1">'{
    "connectorType":"document",
    "provider":"csv",
    "connectorUrl":"&lt;csvUrl&gt;",
    "application":[
     "your", "apps"
    ],
    "name":"Example SYNC Dataset",
    "overwrite": true,
    "sync": {
        "action":"concat",
        "cronPattern":"0 * * * * *",
        "url":"&lt;updateCsvUrl&gt;"
    }
}'</span>
</code></pre>
<p>Certain datasets contain data that evolves frequently over time, and you, as the creator of this dataset, what to ensure that it&rsquo;s up-to-date. As we&rsquo;ve seen before, if your data is hosted on one of the supported 3rd party data providers, like Carto or Arcgis, your data will be proxied, so users of the RW API will always see the latest version of your data. However, if you uploaded your data from a file, your data is copied to the RW API database at the time of the dataset&rsquo;s creation, so keeping it up-to-date requires a different approach. It&rsquo;s with scenario in mind that the RW API offers the automatic synchronization mechanism.</p>

<p>The automatic synchronization mechanism is available for document based datasets only, and you can configure it when <a href="#creating-a-dataset">creating</a> or <a href="#updating-the-fields-of-a-dataset">updating</a> a dataset. When enabled, it will schedule an automatic, periodic task, that will update your document based dataset&rsquo;s data, based on data from an URL you provide. This means that, once configured, you just have to make sure the automatic synchronization mechanism can find the newest version of the data at the specified URL, and the RW API will take care of the actual data update process for you.</p>

<p>To configure automatic synchronization on dataset creation or update, you need to pass a <code class="prettyprint">sync</code> object on your calls to the respective endpoints, next to the other fields. See the included example for a clearer idea of how creating a dataset with automatic synchronization looks like.</p>

<p>There are 3 fields, all required, that you need to specify inside the <code class="prettyprint">sync</code> object:</p>

<ul>
<li><code class="prettyprint">action</code>: choose either <code class="prettyprint">concat</code> or <code class="prettyprint">overwrite</code>. See more details above about <a href="#concatenate-and-append-data-to-a-document-based-dataset">concatenating</a> and <a href="#overwrite-data-for-a-document-based-dataset">overwriting</a> dataset data. Append operations, as documented in the section above, is not supported.</li>
<li><code class="prettyprint">cronPattern</code>: <a href="https://en.wikipedia.org/wiki/Cron">cron</a> expression representing when and how frequently the synchronization process should take place. The host executing these tasks use UTC timezone.</li>
<li><code class="prettyprint">url</code>: publicly available URL from where the automatic synchronization mechanism will load the data to replace/concatenate to your dataset. </li>
</ul>

<p>Internally, the automatic synchronization mechanism will call either the <a href="#concatenate-and-append-data-to-a-document-based-dataset">dataset concatenation</a> or <a href="#overwrite-data-for-a-document-based-dataset">dataset overwrite</a> endpoint. 
If that internal request fails - for example, if <code class="prettyprint">overwrite</code> is set to <code class="prettyprint">false</code> - the sync process will fail silently. 
If you have the <code class="prettyprint">ADMIN</code> role, you can use the <code class="prettyprint">/v1/task</code> endpoint to see scheduled tasks and their error output, but otherwise this failure will be invisible to end users.</p>

<p>On the other hand, if the request goes through, but the concatenation/overwrite process fails - for example, if the URL provided is not available - then your dataset <code class="prettyprint">status</code> will be set to <code class="prettyprint">error</code> and the <code class="prettyprint">errorMessage</code> field will give you a simple description of what happened.</p>

<p>To see the details (including the date) of the last operation performed on the dataset, use the link in the <code class="prettyprint">taskId</code> field.</p>

<h2 id="flush-dataset-cache">Flush dataset cache</h2>

<blockquote>
<p>Flush dataset&rsquo;s cache</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/0c630feb-8146-4fcc-a9be-be5adcb731c8/flush <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight shell"><code>OK
</code></pre>
<p>Flushes the cache for the specified dataset. Take into account that only the dataset itself, query results and fields will be flushed. Any other relation, like metadata, layers or widgets linked to the specified dataset will not be affected by this action.</p>

<p>In order to flush a dataset&rsquo;s cache, the following conditions must be met:</p>

<ul>
<li>the user must be logged in.</li>
<li>the user must comply with <a href="index-rw.html#role-based-access-control">the RW API role-based access control guidelines</a>.<br></li>
</ul>

<h4 id="errors-for-flushing-a-dataset-39-s-cache">Errors for flushing a dataset&rsquo;s cache</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to delete a dataset.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code class="prettyprint">ADMIN</code> role, or have role <code class="prettyprint">MANAGER</code> and be the dataset&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the dataset)</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to delete a dataset with one or more <code class="prettyprint">application</code> values that are not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Dataset with id <id> doesn&rsquo;t exist</td>
<td>A dataset with the provided id does not exist.</td>
</tr>
</tbody></table>

<h2 id="recover">Recover</h2>

<blockquote>
<p>Recover dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/0c630feb-8146-4fcc-a9be-be5adcb731c8/recover <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight shell"><code>OK
</code></pre>
<p>Resets a dataset&rsquo;s <code class="prettyprint">status</code> to <code class="prettyprint">saved</code> and clears its errors. Keep in mind that this does NOT modify the dataset in any other way - if the underling dataset&rsquo;s data was inconsistent for any reason, this endpoint will not change it, and it&rsquo;s up to you to fix it using a <code class="prettyprint">data-overwrite</code> or other endpoints.</p>

<p>In order to recover a dataset, the user must be logged in and have the <code class="prettyprint">ADMIN</code> role.</p>

<h4 id="errors-for-recovering-a-dataset">Errors for recovering a dataset</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged with to be able to delete a dataset.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to have the <code class="prettyprint">ADMIN</code> role.</td>
</tr>
<tr>
<td>404</td>
<td>Dataset with id <id> doesn&rsquo;t exist</td>
<td>A dataset with the provided id does not exist.</td>
</tr>
</tbody></table>

<h2 id="dataset-reference">Dataset reference</h2>

<p>This section gives you a complete view at the properties that are maintained as part of dataset. When interacting with a dataset (on get, on create, etc) you will find most of these properties available to you, although they may be organized in a slightly different structure (ie: on get, everything but the <code class="prettyprint">id</code> is nested inside an <code class="prettyprint">attributes</code> object).</p>

<p>You can find more details in the <a href="https://github.com/resource-watch/dataset/blob/master/app/src/models/dataset.model.js">source code</a>.</p>

<table><thead>
<tr>
<th>Field name</th>
<th>Type</th>
<th>Required</th>
<th>Default value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Yes (autogenerated)</td>
<td></td>
<td>Unique Id of the dataset. Auto generated on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Name of the dataset.</td>
</tr>
<tr>
<td>slug</td>
<td>String</td>
<td>Yes (autogenerated)</td>
<td></td>
<td>Slug of the dataset. Auto generated on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td>Type of the dataset.</td>
</tr>
<tr>
<td>subtitle</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td>Subtitle of the dataset.</td>
</tr>
<tr>
<td>application</td>
<td>Array</td>
<td>Yes</td>
<td></td>
<td>Applications associated with this dataset. Read more about this field <a href="index-rw.html#applications">here</a>.</td>
</tr>
<tr>
<td>applicationConfig</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Key-value storage of application-specific data. Use the <code class="prettyprint">application</code> value as key and a JSON Object as the value to store complex, extensible data.</td>
</tr>
<tr>
<td>dataPath</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td>Path to the data in a JSON file-based datasets.</td>
</tr>
<tr>
<td>attributesPath</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td></td>
</tr>
<tr>
<td>connectorType</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Type of connector. <code class="prettyprint">wms</code> for WMS-based datasets, <code class="prettyprint">rest</code> for datasets that rely on external data sources (carto, arcgis, etc) or <code class="prettyprint">document</code> for file-based datasets (JSON, CSV, etc).</td>
</tr>
<tr>
<td>provider</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Dataset provider.</td>
</tr>
<tr>
<td>userId</td>
<td>String</td>
<td>Yes (autopopulated)</td>
<td></td>
<td>Id of the user who created the dataset. Set automatically on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>connectorUrl</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td>Path to the source of the data. On datasets with <code class="prettyprint">document</code> connectorType, <code class="prettyprint">sources</code> should be used instead.</td>
</tr>
<tr>
<td>sources</td>
<td>Array</td>
<td>No</td>
<td>null</td>
<td>Path to the source files of the data. Only used on datasets with <code class="prettyprint">document</code> connectorType.</td>
</tr>
<tr>
<td>tableName</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td>Additional value used to locate the dataset within a given underlying provider. Refer to the documentation of the different connector for more details.</td>
</tr>
<tr>
<td>status</td>
<td>String</td>
<td>No</td>
<td>pending</td>
<td>Status of the dataset. <code class="prettyprint">saved</code> means the dataset is available to use, <code class="prettyprint">pending</code> means an operation is ongoing and the dataset is temporarily unavailable, <code class="prettyprint">error</code> means the dataset is in an invalid state and requires further action before becoming available.</td>
</tr>
<tr>
<td>overwrite</td>
<td>Boolean</td>
<td>No</td>
<td>false</td>
<td>If the data can be overwritten (only for being able to update dataset)</td>
</tr>
<tr>
<td>errorMessage</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td>If this dataset is in <code class="prettyprint">error</code> state, this field may contain additional details about the error.</td>
</tr>
<tr>
<td>mainDateField</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td></td>
</tr>
<tr>
<td>published</td>
<td>Boolean</td>
<td>Yes</td>
<td>true</td>
<td>If the dataset is published or not.</td>
</tr>
<tr>
<td>env</td>
<td>String</td>
<td>Yes</td>
<td>production</td>
<td>Environment to which the dataset belongs. Read more about this field in the <a href="index-rw.html#environments">Environments concept section</a>.</td>
</tr>
<tr>
<td>geoInfo</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td>If it contains interceptable geographical info</td>
</tr>
<tr>
<td>protected</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td>If the dataset is protected. A protected dataset cannot be deleted.</td>
</tr>
<tr>
<td>taskId</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td>Id of the latest task associated with this dataset. Typically only present in <code class="prettyprint">document</code> connectorType datasets</td>
</tr>
<tr>
<td>subscribable</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Information about the dataset being subscribable for alerts. More info about this can be found on the <a href="#subscriptions">Subscriptions</a> section of the docs.</td>
</tr>
<tr>
<td>legend.lat</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Dataset field representing a latitude value.</td>
</tr>
<tr>
<td>legend.long</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Dataset field representing a longitude value.</td>
</tr>
<tr>
<td>legend.*</td>
<td>Array</td>
<td>No</td>
<td></td>
<td>Different keys corresponding to data types. Each key may have an array of strings, referencing dataset fields that match that data type. Used functionally for document-based datasets, but may also be set by the user as reference for other types. See <a href="#using-the-legend-fields-to-define-field-types">this section</a> for more details.</td>
</tr>
<tr>
<td>clonedHost.hostProvider</td>
<td>String</td>
<td>No</td>
<td></td>
<td>When cloning a dataset, this will retain the <code class="prettyprint">provider</code> value of the original dataset.</td>
</tr>
<tr>
<td>clonedHost.hostUrl</td>
<td>String</td>
<td>No</td>
<td></td>
<td>When cloning a dataset, this will retain the <code class="prettyprint">connectorUrl</code> value of the original dataset.</td>
</tr>
<tr>
<td>clonedHost.hostId</td>
<td>String</td>
<td>No</td>
<td></td>
<td>When cloning a dataset, this will retain the <code class="prettyprint">Id</code> value of the original dataset.</td>
</tr>
<tr>
<td>clonedHost.hostType</td>
<td>String</td>
<td>No</td>
<td></td>
<td>When cloning a dataset, this will retain the <code class="prettyprint">connectorType</code> value of the original dataset.</td>
</tr>
<tr>
<td>clonedHost.hostPath</td>
<td>String</td>
<td>No</td>
<td></td>
<td>When cloning a dataset, this will retain the <code class="prettyprint">tableName</code> value of the original dataset.</td>
</tr>
<tr>
<td>widgetRelevantProps</td>
<td>Array</td>
<td>No</td>
<td></td>
<td>Group of relevant props of a widget.</td>
</tr>
<tr>
<td>layerRelevantProps</td>
<td>Array</td>
<td>No</td>
<td></td>
<td>Group of relevant props of a layer.</td>
</tr>
<tr>
<td>dataLastUpdated</td>
<td>Date</td>
<td>No</td>
<td></td>
<td>User defined date of when a dataset was last updated.</td>
</tr>
<tr>
<td>userName</td>
<td>String</td>
<td>No (autogenerated)</td>
<td>null</td>
<td>Name of the user who created the dataset. This value is used only internally, and is never directly exposed through the API. Cannot be modified by users.</td>
</tr>
<tr>
<td>userRole</td>
<td>String</td>
<td>No (autogenerated)</td>
<td>null</td>
<td>Role of the user who created the dataset. This value is used only internally, and is never directly exposed through the API. Cannot be modified by users.</td>
</tr>
<tr>
<td>createdAt</td>
<td>Date</td>
<td>No (autogenerated)</td>
<td><current date></td>
<td>Automatically maintained date of when the dataset was created. Cannot be modified by users.</td>
</tr>
<tr>
<td>updatedAt</td>
<td>Date</td>
<td>No (autogenerated)</td>
<td><current date></td>
<td>Automatically maintained date of when the dataset was last updated. Cannot be modified by users.</td>
</tr>
</tbody></table>

          <h1 id="query">Query</h1>

<p>In order to retrieve data from datasets, you can send queries to the API using a syntax very similar to SQL. Using these endpoints, you can also download the results of a particular query. If you are new to the RW API, or want to learn more about the concept of a querying datasets, we strongly encourage you to read the <a href="#query">query concept</a> documentation first. It gives you a brief and clear description of what a query is, and what it is useful for.</p>

<p><em>Please note that some SQL features might not be supported. Check <a href="index-rw.html#supported-sql-syntax-reference">here</a> for a reference of the SQL features&rsquo; support for each dataset provider.</em></p>

<h2 id="querying-datasets">Querying datasets</h2>

<blockquote>
<p>Structure of the endpoint for executing a query:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query/&lt;dataset.id&gt;?sql=SELECT * FROM &lt;dataset.tableName&gt;'</span>
</code></pre>
<p>In order to query a dataset, you&rsquo;ll need two pieces of information:</p>

<ul>
<li>The id of the dataset you&rsquo;re trying to query.</li>
<li>The SQL query that represents the data you are trying to retrieve.</li>
</ul>

<p>The <a href="#dataset6">dataset documentation</a> covers different ways that you can use to browse the existing dataset catalog or upload your own, all of which will give you the details of a dataset, including the dataset id you&rsquo;ll need to query it.</p>

<p>The SQL query will have to be custom built by you to fit your needs, but a good starting point for newcomers would be something like <code class="prettyprint">SELECT * FROM &lt;dataset.tableName&gt; limit 10</code>.</p>

<p><em>Notice: the <code class="prettyprint">limit</code> parameter restricts our results to 10 rows, and is not required. However, for our learning purposes, this is useful, as it keeps the API responses small and fast.</em></p>

<p>Most of the SQL query is up to you to define, based on your needs and the <a href="#supported-sql-syntax-reference">support provided for the dataset type you are using</a>. The <code class="prettyprint">FROM</code> clause, however, does use a special value - the dataset&rsquo;s <code class="prettyprint">tableName</code> value, which you can also get from the <a href="#dataset6">dataset documentation</a> described above.</p>

<blockquote>
<p>Example endpoint for executing a query:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query/098b33df-6871-4e53-a5ff-b56a7d989f9a?sql=SELECT cartodb_id, iso, name_0, name_1, type_1 FROM gadm28_adm1 limit 10'</span>
</code></pre>
<p>With both pieces of information at hand, you can now send your query to the API and get the response. The example <code class="prettyprint">cURL</code> to the side shows how that would look like.</p>

<h3 id="query-response-body">Query response body</h3>

<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"cartodb_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1830</span><span class="p">,</span><span class="w">
            </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MEX"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name_0"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mexico"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ciudad de México"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Distrito Federal"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"cartodb_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1109</span><span class="p">,</span><span class="w">
            </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HTI"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name_0"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Haiti"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"L'Artibonite"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Département"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"cloneUrl"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"http_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/dataset/098b33df-6871-4e53-a5ff-b56a7d989f9a/clone"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"datasetUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/query/098b33df-6871-4e53-a5ff-b56a7d989f9a?sql=SELECT%20*%20FROM%20gadm28_adm1%20limit%2010"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="s2">"your"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"apps"</span><span class="w">
                    </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The following table describes the response body fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>Array</td>
<td>Array of objects that correspond to the result of the query execution. The data structure varies according to <code class="prettyprint">SELECT</code> clause of your query, or the structure of dataset being queried.</td>
</tr>
<tr>
<td>meta</td>
<td>Object</td>
<td>Object with metadata regarding the query executed.</td>
</tr>
<tr>
<td>meta.cloneUrl</td>
<td>Object</td>
<td>Object with information for creating a new dataset from the current query execution.</td>
</tr>
<tr>
<td>meta.cloneUrl.http_method</td>
<td>String</td>
<td>The HTTP method that should be used for the request to create a new dataset from the current query execution. Read the documentation on <a href="#cloning-a-dataset">cloning a dataset</a> for more info.</td>
</tr>
<tr>
<td>meta.cloneUrl.url</td>
<td>String</td>
<td>The API endpoint path that should be used for the request to create a new dataset from the current query execution.</td>
</tr>
<tr>
<td>meta.cloneUrl.body</td>
<td>Object</td>
<td>The body request data that should be provided for creating a new dataset from the current query execution.</td>
</tr>
</tbody></table>

<h3 id="query-endpoint-parameters">Query endpoint parameters</h3>

<blockquote>
<p>Example of requesting the query results as CSV data:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date from gadm28_adm1 limit 2&amp;format=csv'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight plaintext"><code>"alert__date",
"_id"
"2019-04-12",
"AW6O0fqMLu2ttL7ZDM4P"
"2015-08-22",
"AW6O0fqMLu2ttL7ZDM4T"
</code></pre>
<blockquote>
<p>Example of requesting to freeze the query results:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date from gadm28_adm1 limit 2&amp;freeze=true'</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://storage.googleapis.com/query-freeze/1589458072773.json"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The following parameters can be provided as query parameters, in order to customize the output of the response returned:</p>

<table><thead>
<tr>
<th>Query parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sql</td>
<td>The SQL query to be executed. This parameter changes the data returned in the query response body.</td>
<td>String</td>
<td>Yes</td>
</tr>
<tr>
<td>format</td>
<td>The format of the returned response. By default, JSON format is assumed (<code class="prettyprint">json</code>), but you can also request the response as CSV (<code class="prettyprint">csv</code>), in which case the returned response will contain the CSV contents of the response. <strong>This parameter will only be considered for document-based datasets.</strong></td>
<td>String</td>
<td>No</td>
</tr>
<tr>
<td>freeze</td>
<td>The <code class="prettyprint">freeze</code> parameter, when provided as <code class="prettyprint">true</code>, will create a file with the results of the execution of the query and return the URL for that file. <strong>Please note that you should be authenticated in order to request freezing the results of query executions.</strong></td>
<td>Boolean</td>
<td>No</td>
</tr>
<tr>
<td>geostore</td>
<td>Read more about the geostore query parameter <a href="index-rw.html#filter-query-results-by-geostore">here</a>.</td>
<td>String</td>
<td>No</td>
</tr>
</tbody></table>

<h4 id="filter-query-results-by-geostore">Filter query results by geostore</h4>

<blockquote>
<p>Example query providing a geostore id as query parameter to filter the results:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query/1d7085f7-11c7-4eaf-a29a-5a4de57d010e?sql=SELECT * FROM dis_001_significant_earthquakes LIMIT 5&amp;geostore=972c24e1da2c2baacc7572ee9501abdc'</span>
</code></pre>
<p>Some dataset providers support receiving a <code class="prettyprint">geostore</code> query parameter. When providing this parameter, you can request geo-referenced data that fits within the bounding box of the geostore with id provided. You can obtain the id of the geostore using the <a href="#geostore">RW API Geostore API</a>. If the data is not geo-referenced, or if the dataset provider does not support the <code class="prettyprint">geostore</code> query parameter, it will be ignored.</p>

<p>The following providers support this parameter:</p>

<ul>
<li>CartoDB (<code class="prettyprint">carto</code>)</li>
<li>ArcGIS (<code class="prettyprint">featureservice</code>)</li>
<li>Google Earth Engine (<code class="prettyprint">gee</code>)</li>
<li>BigQuery (<code class="prettyprint">bigquery</code>)</li>
<li>Rasdaman (<code class="prettyprint">rasdaman</code>)</li>
<li>NEX-GDDP (<code class="prettyprint">nexgddp</code>)</li>
<li>Loca (<code class="prettyprint">loca</code>)</li>
</ul>

<h3 id="alternative-ways-for-querying-datasets">Alternative ways for querying datasets</h3>

<p>While the GET request described above is the recommended way of querying datasets, there are other ways to query the RW API datasets that may be more suited for specific use cases.</p>

<h4 id="using-the-dataset-slug-instead-of-the-id">Using the dataset slug instead of the id</h4>

<blockquote>
<p>Example query not using the dataset id in the request path, and using the dataset slug in the FROM clause:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date from gadm28_adm1 limit 2'</span>
curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query/Glad-Alerts-Daily-Geostore-User-Areas_3?sql=SELECT alert__date from gadm28_adm1 limit 2'</span>
</code></pre>
<p>When referencing a dataset&rsquo;s id in a query, you have the option to use the dataset&rsquo;s slug instead, obtaining the same result. This is also applicable to the alternative query methods described in the sections below.</p>

<h4 id="post-requests">POST requests</h4>

<blockquote>
<p>The same query executed as GET, and as a POST request providing the SQL as request body param:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date from gadm28_adm1 limit 2'</span>
curl -i -X POST <span class="s1">'https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e'</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
-d <span class="s1">'{
    "sql": "SELECT alert__date from gadm28_adm1 limit 2"
}'</span>
</code></pre>
<p>Using the GET request is the recommended approach, as it allows HTTP caching of your result - subsequent requests for the same query will see a great performance increase, even if they are made by a different application or client.</p>

<p>Alternatively, you can also query a dataset using a POST request. POST requests are not cached, so you will not benefit from these speed improvements. However, GET requests can sometimes hit URL length restrictions, should your query string be too long. Using a POST request is the recommended solution for these cases. See the example on the side to see how you can query a dataset with a POST request.</p>

<h4 id="dataset-id-as-the-from-clause">Dataset id as the FROM clause</h4>

<blockquote>
<p>Three different but equivalent syntaxes for the same query:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query/098b33df-6871-4e53-a5ff-b56a7d989f9a?sql=SELECT cartodb_id, iso, name_0, name_1, type_1 FROM gadm28_adm1 limit 10'</span>

curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query?sql=SELECT cartodb_id, iso, name_0, name_1, type_1 FROM 098b33df-6871-4e53-a5ff-b56a7d989f9a limit 10'</span>

curl -i -X POST <span class="s1">'https://api.resourcewatch.org/v1/query'</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
-d <span class="s1">'{
    "sql": "SELECT cartodb_id, iso, name_0, name_1, type_1 FROM 098b33df-6871-4e53-a5ff-b56a7d989f9a limit 10"
}'</span>

</code></pre>
<p>The examples we&rsquo;ve seen so far expect the URL to have the <code class="prettyprint">/query/&lt;dataset id or slug&gt;?sql=SELECT * FROM &lt;dataset.tableName&gt;</code> format. However, you can also use the equivalent
<code class="prettyprint">/query?sql=SELECT * FROM &lt;dataset id&gt;</code> syntax. You can also use this alternative syntax with POST requests.</p>

<h4 id="redundant-from-clause-document-based-datasets-only">Redundant FROM clause (document based datasets only)</h4>

<blockquote>
<p>Example query providing a document-based dataset id in the request path or as the FROM clause:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query?sql=SELECT alert__date FROM 9be3bf63-97fc-4bb0-b913-775ccae3cf9e limit 10'</span>
curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date FROM data limit 10'</span>
</code></pre>
<p>When querying a document based dataset using either GET or POST <code class="prettyprint">/query/&lt;dataset id or slug&gt;</code> request, the <code class="prettyprint">FROM</code> clause is required but ignored, meaning you don&rsquo;t have to provide the dataset&rsquo;s <code class="prettyprint">tableName</code> as you normally would. The example on the side illustrates this.</p>

<h2 id="downloading-data-from-a-dataset">Downloading data from a dataset</h2>

<blockquote>
<p>Structure of the endpoint for downloading the results of a query:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download/&lt;dataset.id&gt;?sql=SELECT * FROM &lt;dataset.tableName&gt;'</span>
</code></pre>
<blockquote>
<p>Example endpoint for downloading the results of a query:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download/098b33df-6871-4e53-a5ff-b56a7d989f9a?sql=SELECT cartodb_id, iso, name_0, name_1, type_1 FROM gadm28_adm1 limit 10'</span>
</code></pre>
<p>The download endpoint allows you to download the results of the execution of a query over a dataset. This endpoint is greatly based on the <a href="index-rw.html#querying-datasets">query datasets</a> endpoint, so we strongly suggest you read that section of the documentation.</p>

<p><strong>Note: Some dataset providers do not support downloading query results. You can download query results for the following dataset providers:</strong></p>

<ul>
<li>Google Earth Engine</li>
<li>Document-based datasets</li>
<li>Carto</li>
<li>BigQuery</li>
<li>ArcGIS FeatureService</li>
</ul>

<p>Like when querying datasets, in order to download the results of the execution of query, you&rsquo;ll need two pieces of information:</p>

<ul>
<li>The id of the dataset you&rsquo;re trying to download the query execution results.</li>
<li>The SQL query that represents the data you are trying to download.</li>
</ul>

<p>The <a href="#dataset6">dataset documentation</a> covers different ways that you can use to browse the existing dataset catalog or upload your own, all of which will give you the details of a dataset, including the dataset id you&rsquo;ll need to query it.</p>

<p>The SQL query will have to be custom built by you to fit your needs, but a good starting point for newcomers would be something like <code class="prettyprint">SELECT * FROM &lt;dataset.tableName&gt; limit 10</code>.</p>

<p><em>Notice: the <code class="prettyprint">limit</code> parameter restricts our results to 10 rows, and is not required. However, for our learning purposes, this is useful, as it keeps the API responses small and fast.</em></p>

<p>As with the query endpoint, the <code class="prettyprint">FROM</code> clause should reference the dataset&rsquo;s <code class="prettyprint">tableName</code> value, which you can also get from the <a href="#dataset6">dataset documentation</a> described above. And also, don&rsquo;t forget that you can check the <a href="#supported-sql-syntax-reference">support provided for the dataset type you are using</a> if you are having trouble writing your SQL query.</p>

<h3 id="download-response-body">Download response body</h3>

<blockquote>
<p>Example of downloading query results (by default, CSV data is assumed):</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date, alert__count from gadm28_adm1 limit 2'</span>
</code></pre>
<blockquote>
<p>Example CSV response:</p>
</blockquote>
<pre class="highlight plaintext"><code>"alert__date",
"alert__count",
"_id"
"2019-04-12",
5,
"AW6O0fqMLu2ttL7ZDM4P"
"2015-08-22",
6,
"AW6O0fqMLu2ttL7ZDM4T"
</code></pre>
<blockquote>
<p>Example of downloading query results requesting format as JSON:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date, alert__count from gadm28_adm1 limit 2&amp;format=json'</span>
</code></pre>
<blockquote>
<p>Example JSON response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"alert__date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-04-12"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"alert__count"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
            </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AW6O0fqMLu2ttL7ZDM4P"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"alert__date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-22"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"alert__count"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
            </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AW6O0fqMLu2ttL7ZDM4T"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The response body of executing the download endpoint will contain the data to be downloaded. You can use the <code class="prettyprint">format</code> query parameter to customize the format of the data returned. By default, <code class="prettyprint">format=csv</code> will be assumed, so you will receive the corresponding query results the actual CSV data in the response body. If you provide <code class="prettyprint">format=json</code>, the returned result will be a JSON object with a <code class="prettyprint">data</code> index containing the results of the execution of the query provided.</p>

<h3 id="download-execution-errors">Download execution errors</h3>

<p>Calling the download endpoint might sometimes result in an error being returned. The following table describes the possible errors that can occur when downloading query execution results:</p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>SQL or FS required</td>
<td>The required <code class="prettyprint">sql</code> field is missing either as query string parameter or in the request body.</td>
</tr>
<tr>
<td>400</td>
<td>- format: format must be in [json,csv]. -</td>
<td>If provided, <code class="prettyprint">format</code> must be either <code class="prettyprint">csv</code> or <code class="prettyprint">json</code>.</td>
</tr>
<tr>
<td>500</td>
<td>Internal server error</td>
<td>The error message might vary in this case.</td>
</tr>
</tbody></table>

<h3 id="download-endpoint-parameters">Download endpoint parameters</h3>

<blockquote>
<p>Example of requesting to freeze the download results:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date from gadm28_adm1 limit 2&amp;freeze=true'</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://storage.googleapis.com/query-freeze/1589458072773.json"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>You can use the following query parameters to customize the output of the download query execution results endpoint:</p>

<table><thead>
<tr>
<th>Query parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sql</td>
<td>The SQL query to be executed. This parameter changes the data returned in the query response body.</td>
<td>String</td>
<td>Yes</td>
</tr>
<tr>
<td>format</td>
<td>The format of the returned response. By default, CSV format is assumed (<code class="prettyprint">csv</code>), but you can also request the response as JSON (<code class="prettyprint">json</code>). Check the section on the <a href="index-rw.html#download-response-body">download endpoint response body</a> for some examples of how the <code class="prettyprint">format</code> query parameter can be used.</td>
<td>String</td>
<td>No</td>
</tr>
<tr>
<td>freeze</td>
<td>The <code class="prettyprint">freeze</code> parameter, when provided as <code class="prettyprint">true</code>, will create a file with the results of the execution of the query and return the URL for that file. <strong>Please note that you should be authenticated in order to request freezing the results of query executions.</strong></td>
<td>Boolean</td>
<td>No</td>
</tr>
<tr>
<td>geostore</td>
<td>Read more about the geostore query parameter <a href="index-rw.html#filter-download-results-by-geostore">here</a>.</td>
<td>String</td>
<td>No</td>
</tr>
</tbody></table>

<h4 id="filter-download-results-by-geostore">Filter download results by geostore</h4>

<blockquote>
<p>Example download request providing a geostore id as query parameter to filter the results:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download/1d7085f7-11c7-4eaf-a29a-5a4de57d010e?sql=SELECT * FROM dis_001_significant_earthquakes LIMIT 5&amp;geostore=972c24e1da2c2baacc7572ee9501abdc'</span>
</code></pre>
<p>Some dataset providers support receiving a <code class="prettyprint">geostore</code> query parameter. When providing this parameter, you can request geo-referenced data that fits within the bounding box of the geostore with id provided. You can obtain the id of the geostore using the <a href="index-rw.html#geostore">RW API Geostore API</a>. If the data is not geo-referenced, or if the dataset provider does not support the <code class="prettyprint">geostore</code> query parameter, it will be ignored.</p>

<p>The following providers support this parameter:</p>

<ul>
<li>CartoDB (<code class="prettyprint">carto</code>)</li>
<li>ArcGIS (<code class="prettyprint">featureservice</code>)</li>
<li>Google Earth Engine (<code class="prettyprint">gee</code>)</li>
<li>BigQuery (<code class="prettyprint">bigquery</code>)</li>
<li>Rasdaman (<code class="prettyprint">rasdaman</code>)</li>
<li>NEX-GDDP (<code class="prettyprint">nexgddp</code>)</li>
<li>Loca (<code class="prettyprint">loca</code>)</li>
</ul>

<h3 id="alternative-ways-for-downloading-query-execution-results">Alternative ways for downloading query execution results</h3>

<p>As in the case of <a href="index-rw.html#alternative-ways-for-querying-datasets">querying datasets</a>, there are some alternative ways that you can use for downloading query execution results. While the GET request described above is the recommended way of downloading query results, there are other ways to download query results that may be more suited for specific use cases.</p>

<h4 id="using-the-dataset-slug-instead-of-the-id">Using the dataset slug instead of the id</h4>

<blockquote>
<p>Example request for downloading the query execution results not using the dataset id in the request path, and using the dataset slug in the FROM clause:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date from gadm28_adm1 limit 2'</span>
curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download/Glad-Alerts-Daily-Geostore-User-Areas_3?sql=SELECT alert__date from gadm28_adm1 limit 2'</span>
</code></pre>
<p>When referencing a dataset&rsquo;s id in th SQL query, you have the option to use the dataset&rsquo;s slug instead, obtaining the same result. This is also applicable to the alternative download methods described in the sections below.</p>

<h4 id="post-requests">POST requests</h4>

<blockquote>
<p>The same download request executed as GET, and as a POST request providing the SQL as request body param:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date from gadm28_adm1 limit 2'</span>
curl -i -X POST <span class="s1">'https://api.resourcewatch.org/v1/download/9be3bf63-97fc-4bb0-b913-775ccae3cf9e'</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
-d <span class="s1">'{
    "sql": "SELECT alert__date from gadm28_adm1 limit 2"
}'</span>
</code></pre>
<p>Using the GET request is the recommended approach, as it allows HTTP caching of your result - subsequent requests for the same download endpoint call will see a great performance increase, even if they are made by a different application or client.</p>

<p>Alternatively, you can also download the query results using a POST request. POST requests are not cached, so you will not benefit from these speed improvements. However, GET requests can sometimes hit URL length restrictions, should your SQL query string be too long. Using a POST request is the recommended solution for these cases. See the example on the side to see how you can download the query execution results with a POST request.</p>

<h4 id="dataset-id-as-the-from-clause">Dataset id as the FROM clause</h4>

<blockquote>
<p>Three different but equivalent syntaxes for the same call to the download endpoint:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download/098b33df-6871-4e53-a5ff-b56a7d989f9a?sql=SELECT cartodb_id, iso, name_0, name_1, type_1 FROM gadm28_adm1 limit 10'</span>

curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download?sql=SELECT cartodb_id, iso, name_0, name_1, type_1 FROM 098b33df-6871-4e53-a5ff-b56a7d989f9a limit 10'</span>

curl -i -X POST <span class="s1">'https://api.resourcewatch.org/v1/download'</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
-d <span class="s1">'{
    "sql": "SELECT cartodb_id, iso, name_0, name_1, type_1 FROM 098b33df-6871-4e53-a5ff-b56a7d989f9a limit 10"
}'</span>

</code></pre>
<p>The examples we&rsquo;ve seen so far expect the URL to have the <code class="prettyprint">/download/&lt;dataset id or slug&gt;?sql=SELECT * FROM &lt;dataset.tableName&gt;</code> format. However, you can also use the equivalent <code class="prettyprint">/download?sql=SELECT * FROM &lt;dataset id&gt;</code> syntax. This alternative syntax is also available for POST requests.</p>

<h4 id="redundant-from-clause-document-based-datasets-only">Redundant FROM clause (document-based datasets only)</h4>

<blockquote>
<p>Example download providing a document-based dataset id in the request path or as the FROM clause:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download?sql=SELECT alert__date FROM 9be3bf63-97fc-4bb0-b913-775ccae3cf9e limit 10'</span>
curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date FROM data limit 10'</span>
</code></pre>
<p>When downloading the query results for a document based dataset using either GET or POST <code class="prettyprint">/download/&lt;dataset id or slug&gt;</code> request, the <code class="prettyprint">FROM</code> clause is required but ignored, meaning you don&rsquo;t have to provide the dataset&rsquo;s <code class="prettyprint">tableName</code> as you normally would. The example on the side illustrates this.</p>

<h2 id="deleting-data-from-a-dataset">Deleting data from a dataset</h2>

<blockquote>
<p>Example requests to delete data from a dataset:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query/:dataset_id?sql=DELETE FROM index_bf86b945c4ec41d2b5b7af00f3f61423'</span>
curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query/:dataset_id?sql=DELETE FROM index_bf86b945c4ec41d2b5b7af00f3f61423 WHERE x = "y"'</span>
</code></pre>
<p>Write queries such as <code class="prettyprint">INSERT</code> or <code class="prettyprint">UPDATE</code> are not supported in the RW API. You can use dataset endpoints to <a href="index-rw.html#concatenate-and-append-data-to-a-document-based-dataset">append</a> or <a href="index-rw.html#overwrite-data-for-a-document-based-dataset">overwrite</a> a given dataset&rsquo;s data, but you cannot use SQL to write data into the datasets.</p>

<p>Most providers do not support <code class="prettyprint">DELETE</code> queries either. However, in the case of <strong>document-based datasets</strong> (i.e. where the <code class="prettyprint">connectorType</code> is <code class="prettyprint">document</code>), you can delete the dataset&rsquo;s data via SQL <code class="prettyprint">DELETE</code> query. Executing a <code class="prettyprint">DELETE</code> query requires authentication, and additionally, one of the following conditions must be met:</p>

<ul>
<li>have role <code class="prettyprint">MANAGER</code> and own the dataset;</li>
<li>have role <code class="prettyprint">ADMIN</code> and belong to all the apps to which the dataset is associated.</li>
</ul>

<p>If the query is successfully executed, the request will return an HTTP response with status code <code class="prettyprint">204 No Content</code>. Please note that executing a delete query is an <strong>asynchronous process</strong> - as in the case of appending or overwriting a dataset&rsquo;s data, the dataset will have its status updated to <code class="prettyprint">pending</code>, and updated once again to <code class="prettyprint">saved</code> once the deletion process is completed.</p>

<h3 id="delete-query-execution-errors">Delete query execution errors</h3>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>Not authorized to execute DELETE query - the logged user provided does not meet at least one of the conditions required to be able to delete the dataset data.</td>
</tr>
<tr>
<td>400</td>
<td>Unsupported query element detected</td>
<td>The SQL query provided is not valid, or the syntax provided is not supported.</td>
</tr>
</tbody></table>

<h2 id="supported-sql-syntax-reference">Supported SQL syntax reference</h2>

<p>This section details the support for SQL syntax for the different dataset providers RW API supports. Keep in mind that your HTTP request parameters (like <code class="prettyprint">sql</code>) should always be escaped according to the official HTTP specification. You can use <a href="https://www.urlencoder.org/">this online tool</a> as an example of proper URL parameter encoding.</p>

<h3 id="cartodb-datasets">CartoDB datasets</h3>

<p>This section describes the SQL support for querying datasets with provider <code class="prettyprint">cartodb</code>.</p>

<table><thead>
<tr>
<th>Supported</th>
<th>Feature</th>
<th>Example URL</th>
</tr>
</thead><tbody>
<tr>
<td>YES</td>
<td>SELECT: Selecting all columns using wildcard</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20LIMIT%205">SELECT * FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Count all rows</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20count(*)%20FROM%20edi">SELECT count(*) FROM edi</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Selecting specific columns</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%2C%20overall_score%20FROM%20edi%20LIMIT%205">SELECT region, overall_score FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Selecting DISTINCT values for specific columns</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20DISTINCT(region)%20FROM%20edi%20LIMIT%205">SELECT DISTINCT(region) FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>SELECT: Selecting columns AND counting all rows</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%2C%20count(*)%20FROM%20edi%20LIMIT%205">SELECT region, count(*) FROM edi LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Aliasing aggregate function results such as AVG in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20AVG(overall_score)%20as%20alias%20FROM%20edi%20LIMIT%205">SELECT AVG(overall_score) as alias FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (AVG) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20AVG(overall_score)%20FROM%20edi%20LIMIT%205">SELECT AVG(overall_score) FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (MAX) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20MAX(overall_score)%20FROM%20edi%20LIMIT%205">SELECT MAX(overall_score) FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (MIN) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20MIN(overall_score)%20FROM%20edi%20LIMIT%205">SELECT MIN(overall_score) FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (SUM) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20SUM(overall_score)%20FROM%20edi%20LIMIT%205">SELECT SUM(overall_score) FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset id in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query?sql=SELECT%20*%20FROM%200b9f0100-ce5b-430f-ad8f-3363efa05481%20LIMIT%205">SELECT * FROM 0b9f0100-ce5b-430f-ad8f-3363efa05481 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset slug in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query?sql=SELECT%20*%20FROM%20Environmental-Democracy-Index-1490086842552%20LIMIT%205">SELECT * FROM Environmental-Democracy-Index-1490086842552 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset tableName in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20LIMIT%205">SELECT * FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Greater than filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20overall_score%20%3E%202%20LIMIT%205">SELECT * FROM edi WHERE overall_score &gt; 2 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Greater than or equal filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20overall_score%20%3E%3D%202%20LIMIT%205">SELECT * FROM edi WHERE overall_score &gt;= 2 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Equality filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20overall_score%20%3D%202.1%20LIMIT%205">SELECT * FROM edi WHERE overall_score = 2.1 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Lower than filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20overall_score%20%3C%202.2%20LIMIT%205">SELECT * FROM edi WHERE overall_score &lt; 2.2 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Lower than or equal filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20overall_score%20%3C%3D%202.2%20LIMIT%205">SELECT * FROM edi WHERE overall_score &lt;= 2.2 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Conjunction (AND) filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20overall_score%20%3C%3D%202.2%20AND%20justice_pillar_score%20%3E%201%20LIMIT%205">SELECT * FROM edi WHERE overall_score &lt;= 2.2 AND justice_pillar_score &gt; 1 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Disjunction (OR) filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20overall_score%20%3C%3D%202.2%20OR%20justice_pillar_score%20%3E%201%20LIMIT%205">SELECT * FROM edi WHERE overall_score &lt;= 2.2 OR justice_pillar_score &gt; 1 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: BETWEEN filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20overall_score%20BETWEEN%202%20AND%202.2%20LIMIT%205">SELECT * FROM edi WHERE overall_score BETWEEN 2 AND 2.2 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: LIKE filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20region%20LIKE%20'Europ%25'%20LIMIT%205">SELECT * FROM edi WHERE region LIKE &lsquo;Europ%&rsquo; LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Group results by a single column</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%20FROM%20edi%20GROUP%20BY%20region%20LIMIT%205">SELECT region FROM edi GROUP BY region LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Group results by multiple columns</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%2C%20overall_score%20FROM%20edi%20GROUP%20BY%20region%2C%20overall_score%20LIMIT%205">SELECT region, overall_score FROM edi GROUP BY region, overall_score LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Aggregate functions used with GROUP BY statements</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%2C%20COUNT(*)%20as%20count%20FROM%20edi%20GROUP%20BY%20region%20LIMIT%205">SELECT region, COUNT(*) as count FROM edi GROUP BY region LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>GROUP BY: Special grouping by range function</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20count(*)%20FROM%20edi%20GROUP%20BY%20range(overall_score%2C%200%2C1%2C2%2C3%2C4)%20LIMIT%205">SELECT count(*) FROM edi GROUP BY range(overall_score, 0,1,2,3,4) LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by one column</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%20FROM%20edi%20ORDER%20BY%20region%20LIMIT%205">SELECT region FROM edi ORDER BY region LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by one column descending</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%20FROM%20edi%20ORDER%20BY%20region%20DESC%20LIMIT%205">SELECT region FROM edi ORDER BY region DESC LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by multiple column</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%2C%20overall_score%20FROM%20edi%20ORDER%20BY%20region%2C%20overall_score%20LIMIT%205">SELECT region, overall_score FROM edi ORDER BY region, overall_score LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by multiple column descending</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%2C%20overall_score%20FROM%20edi%20ORDER%20BY%20region%2C%20overall_score%20DESC%20LIMIT%205">SELECT region, overall_score FROM edi ORDER BY region, overall_score DESC LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>LIMIT: Limit the number of returned results</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%20FROM%20edi%20LIMIT%205">SELECT region FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>OFFSET: Offset the returned results</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%20FROM%20edi%20LIMIT%205%20OFFSET%2010">SELECT region FROM edi LIMIT 5 OFFSET 10</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>OFFSET: Offset the returned results using short syntax</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%20FROM%20edi%20LIMIT%205%2C%2010">SELECT region FROM edi LIMIT 5, 10</a></strong></td>
</tr>
</tbody></table>

<h4 id="cartodb-geo-spatial-query-support">CartoDB geo-spatial query support</h4>

<p>CartoDB datasets can be queried using <a href="https://postgis.net/docs/reference.html">PostGIS functions</a>. This means if your dataset contains geo-referenced data, you can execute PostGIS functions on the data to extract the information you need. The table below displays some examples of supported PostGIS functions:</p>

<table><thead>
<tr>
<th>Supported</th>
<th>Feature</th>
<th>Example URL</th>
</tr>
</thead><tbody>
<tr>
<td>YES</td>
<td><a href="https://postgis.net/docs/RT_ST_MetaData.html">PostGIS: ST_MetaData</a></td>
<td><a href="https://api.resourcewatch.org/v1/query/16df8ada-87cc-4907-adce-a98bc4e91856?sql=SELECT%20ST_METADATA(the_raster_webmercator)%20FROM%20sp_richness%20LIMIT%205">SELECT ST_METADATA(the_raster_webmercator) FROM sp_richness LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td><a href="https://postgis.net/docs/RT_ST_BandMetaData.html">PostGIS: ST_BandMetaData</a></td>
<td><a href="https://api.resourcewatch.org/v1/query/16df8ada-87cc-4907-adce-a98bc4e91856?sql=SELECT%20ST_BANDMETADATA(the_raster_webmercator)%20FROM%20sp_richness%20LIMIT%205">SELECT ST_BANDMETADATA(the_raster_webmercator) FROM sp_richness LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td><a href="https://postgis.net/docs/RT_ST_SummaryStats.html">PostGIS: ST_SummaryStats</a></td>
<td><a href="https://api.resourcewatch.org/v1/query/16df8ada-87cc-4907-adce-a98bc4e91856?sql=SELECT%20ST_SUMMARYSTATS(the_raster_webmercator%2C%20true)%20FROM%20sp_richness%20LIMIT%205">SELECT ST_SUMMARYSTATS(the_raster_webmercator, true) FROM sp_richness LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td><a href="https://postgis.net/docs/RT_ST_Histogram.html">PostGIS: ST_Histogram</a></td>
<td><a href="https://api.resourcewatch.org/v1/query/16df8ada-87cc-4907-adce-a98bc4e91856?sql=SELECT%20ST_HISTOGRAM(the_raster_webmercator)%20FROM%20sp_richness%20LIMIT%205">SELECT ST_HISTOGRAM(the_raster_webmercator) FROM sp_richness LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td><a href="https://postgis.net/docs/RT_ST_ValueCount.html">PostGIS: ST_ValueCount</a></td>
<td><a href="https://api.resourcewatch.org/v1/query/16df8ada-87cc-4907-adce-a98bc4e91856?sql=SELECT%20ST_VALUECOUNT(the_raster_webmercator)%20FROM%20sp_richness%20LIMIT%205">SELECT ST_VALUECOUNT(the_raster_webmercator) FROM sp_richness LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>Using PostGIS functions in WHERE clause</td>
<td><a href="https://api.resourcewatch.org/v1/query/16df8ada-87cc-4907-adce-a98bc4e91856?sql=SELECT%20*%20FROM%20sp_richness%20WHERE%20ST_METADATA(the_raster_webmercator)%20IS%20NOT%20NULL%20LIMIT%205">SELECT * FROM sp_richness WHERE ST_METADATA(the_raster_webmercator) IS NOT NULL LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>Using PostGIS functions in GROUP BY clause</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/16df8ada-87cc-4907-adce-a98bc4e91856?sql=SELECT%20*%20FROM%20sp_richness%20GROUP%20BY%20ST_SUMMARYSTATS(the_raster_webmercator%2C%20true)%20IS%20NOT%20NULL%20LIMIT%205">SELECT * FROM sp_richness GROUP BY ST_SUMMARYSTATS(the_raster_webmercator, true) IS NOT NULL LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>Using PostGIS functions in ORDER BY clause</td>
<td><a href="https://api.resourcewatch.org/v1/query/16df8ada-87cc-4907-adce-a98bc4e91856?sql=SELECT%20*%20FROM%20sp_richness%20ORDER%20BY%20ST_METADATA(the_raster_webmercator)%20IS%20NOT%20NULL%20LIMIT%205">SELECT * FROM sp_richness ORDER BY ST_METADATA(the_raster_webmercator) IS NOT NULL LIMIT 5</a></td>
</tr>
</tbody></table>

<h3 id="arcgis-feature-service-datasets">ArcGIS Feature Service datasets</h3>

<p>This section describes the SQL support for querying datasets with connector type <code class="prettyprint">rest</code> and provider <code class="prettyprint">featureservice</code>.</p>

<table><thead>
<tr>
<th>Supported</th>
<th>Feature</th>
<th>Example URL</th>
</tr>
</thead><tbody>
<tr>
<td>YES</td>
<td>SELECT: Selecting all columns using wildcard</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20*%20FROM%20cdonexradMapServer0%20LIMIT%205">SELECT * FROM cdonexradMapServer0 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Count all rows</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20count(*)%20FROM%20cdonexradMapServer0">SELECT count(*) FROM cdonexradMapServer0</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Selecting specific columns</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20STATION_NAME%2C%20ELEVATION%20FROM%20cdonexradMapServer0%20LIMIT%205">SELECT STATION_NAME, ELEVATION FROM cdonexradMapServer0 LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>SELECT: Selecting DISTINCT values for specific columns</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20DISTINCT(STATION_NAME)%20FROM%20cdonexradMapServer0%20LIMIT%205">SELECT DISTINCT(STATION_NAME) FROM cdonexradMapServer0 LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>SELECT: Selecting columns AND counting all rows</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20STATION_NAME%2C%20count(*)%20FROM%20cdonexradMapServer0%20LIMIT%205">SELECT STATION_NAME, count(*) FROM cdonexradMapServer0 LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Aliasing aggregate function results such as AVG in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20AVG(ELEVATION)%20as%20alias%20FROM%20cdonexradMapServer0%20LIMIT%205">SELECT AVG(ELEVATION) as alias FROM cdonexradMapServer0 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (AVG) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20AVG(ELEVATION)%20FROM%20cdonexradMapServer0%20LIMIT%205">SELECT AVG(ELEVATION) FROM cdonexradMapServer0 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (MAX) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20MAX(ELEVATION)%20FROM%20cdonexradMapServer0%20LIMIT%205">SELECT MAX(ELEVATION) FROM cdonexradMapServer0 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (MIN) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20MIN(ELEVATION)%20FROM%20cdonexradMapServer0%20LIMIT%205">SELECT MIN(ELEVATION) FROM cdonexradMapServer0 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (SUM) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20SUM(ELEVATION)%20FROM%20cdonexradMapServer0%20LIMIT%205">SELECT SUM(ELEVATION) FROM cdonexradMapServer0 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset id in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query?sql=SELECT%20*%20FROM%200b9e546c-f42a-4b26-bad3-7d606f58961c%20LIMIT%205">SELECT * FROM 0b9e546c-f42a-4b26-bad3-7d606f58961c LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset slug in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query?sql=SELECT%20*%20FROM%20NOAA-NEXt-Generation-RADar-NEXRAD-Products-Locations-1490086842546%20LIMIT%205">SELECT * FROM NOAA-NEXt-Generation-RADar-NEXRAD-Products-Locations-1490086842546 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset tableName in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20*%20FROM%20cdonexradMapServer0%20LIMIT%205">SELECT * FROM cdonexradMapServer0 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Greater than filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20*%20FROM%20cdonexradMapServer0%20WHERE%20ELEVATION%20%3E%203587%20LIMIT%205">SELECT * FROM cdonexradMapServer0 WHERE ELEVATION &gt; 3587 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Greater than or equal filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20*%20FROM%20cdonexradMapServer0%20WHERE%20ELEVATION%20%3E%3D%203587%20LIMIT%205">SELECT * FROM cdonexradMapServer0 WHERE ELEVATION &gt;= 3587 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Equality filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20*%20FROM%20cdonexradMapServer0%20WHERE%20ELEVATION%20%3D%205870%20LIMIT%205">SELECT * FROM cdonexradMapServer0 WHERE ELEVATION = 5870 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Lower than filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20*%20FROM%20cdonexradMapServer0%20WHERE%20ELEVATION%20%3C%205000%20LIMIT%205">SELECT * FROM cdonexradMapServer0 WHERE ELEVATION &lt; 5000 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Lower than or equal filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20*%20FROM%20cdonexradMapServer0%20WHERE%20ELEVATION%20%3C%3D%205000%20LIMIT%205">SELECT * FROM cdonexradMapServer0 WHERE ELEVATION &lt;= 5000 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Conjunction (AND) filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20*%20FROM%20cdonexradMapServer0%20WHERE%20ELEVATION%20%3C%3D%205000%20AND%20LATITUDE%20%3E%2035.23333%20LIMIT%205">SELECT * FROM cdonexradMapServer0 WHERE ELEVATION &lt;= 5000 AND LATITUDE &gt; 35.23333 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Disjunction (OR) filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20*%20FROM%20cdonexradMapServer0%20WHERE%20ELEVATION%20%3C%3D%205000%20OR%20LATITUDE%20%3E%2035.23333%20LIMIT%205">SELECT * FROM cdonexradMapServer0 WHERE ELEVATION &lt;= 5000 OR LATITUDE &gt; 35.23333 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: BETWEEN filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20*%20FROM%20cdonexradMapServer0%20WHERE%20ELEVATION%20BETWEEN%203587%20AND%205000%20LIMIT%205">SELECT * FROM cdonexradMapServer0 WHERE ELEVATION BETWEEN 3587 AND 5000 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: LIKE filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20*%20FROM%20cdonexradMapServer0%20WHERE%20STATION_NAME%20LIKE%20'AMARI%25'%20LIMIT%205">SELECT * FROM cdonexradMapServer0 WHERE STATION_NAME LIKE &#39;AMARI%&rsquo; LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Group results by a single column</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20STATION_NAME%20FROM%20cdonexradMapServer0%20GROUP%20BY%20STATION_NAME%20LIMIT%205">SELECT STATION_NAME FROM cdonexradMapServer0 GROUP BY STATION_NAME LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Group results by multiple columns</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20STATION_NAME%2C%20ELEVATION%20FROM%20cdonexradMapServer0%20GROUP%20BY%20STATION_NAME%2C%20ELEVATION%20LIMIT%205">SELECT STATION_NAME, ELEVATION FROM cdonexradMapServer0 GROUP BY STATION_NAME, ELEVATION LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>GROUP BY: Aggregate functions used with GROUP BY statements</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20STATION_NAME%2C%20COUNT(*)%20as%20count%20FROM%20cdonexradMapServer0%20GROUP%20BY%20STATION_NAME%20LIMIT%205">SELECT STATION_NAME, COUNT(*) as count FROM cdonexradMapServer0 GROUP BY STATION_NAME LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Special grouping by range function</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20count(*)%20FROM%20cdonexradMapServer0%20GROUP%20BY%20range(ELEVATION%2C%200%2C1%2C2%2C3%2C4)%20LIMIT%205">SELECT count(*) FROM cdonexradMapServer0 GROUP BY range(ELEVATION, 0,1,2,3,4) LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by one column</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20STATION_NAME%20FROM%20cdonexradMapServer0%20ORDER%20BY%20STATION_NAME%20LIMIT%205">SELECT STATION_NAME FROM cdonexradMapServer0 ORDER BY STATION_NAME LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by one column descending</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20STATION_NAME%20FROM%20cdonexradMapServer0%20ORDER%20BY%20STATION_NAME%20DESC%20LIMIT%205">SELECT STATION_NAME FROM cdonexradMapServer0 ORDER BY STATION_NAME DESC LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by multiple column</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20STATION_NAME%2C%20ELEVATION%20FROM%20cdonexradMapServer0%20ORDER%20BY%20STATION_NAME%2C%20ELEVATION%20LIMIT%205">SELECT STATION_NAME, ELEVATION FROM cdonexradMapServer0 ORDER BY STATION_NAME, ELEVATION LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by multiple column descending</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20STATION_NAME%2C%20ELEVATION%20FROM%20cdonexradMapServer0%20ORDER%20BY%20STATION_NAME%2C%20ELEVATION%20DESC%20LIMIT%205">SELECT STATION_NAME, ELEVATION FROM cdonexradMapServer0 ORDER BY STATION_NAME, ELEVATION DESC LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>LIMIT: Limit the number of returned results</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20STATION_NAME%20FROM%20cdonexradMapServer0%20LIMIT%205">SELECT STATION_NAME FROM cdonexradMapServer0 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>OFFSET: Offset the returned results</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20STATION_NAME%20FROM%20cdonexradMapServer0%20LIMIT%205%20OFFSET%2010">SELECT STATION_NAME FROM cdonexradMapServer0 LIMIT 5 OFFSET 10</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>OFFSET: Offset the returned results using short syntax</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/0b9e546c-f42a-4b26-bad3-7d606f58961c?sql=SELECT%20STATION_NAME%20FROM%20cdonexradMapServer0%20LIMIT%205%2C%2010">SELECT STATION_NAME FROM cdonexradMapServer0 LIMIT 5, 10</a></strong></td>
</tr>
</tbody></table>

<p><em>Note: This table was generated automatically with the help of <a href="https://github.com/resource-watch/sql-compatibility-test">this repository</a>. If you are maintaining the docs, please do not edit manually these tables.</em></p>

<h3 id="gee-datasets">GEE datasets</h3>

<p>This section describes the SQL support for querying datasets with connector type <code class="prettyprint">rest</code> and providers <code class="prettyprint">gee</code>.</p>

<table><thead>
<tr>
<th>Supported</th>
<th>Feature</th>
<th>Example URL</th>
</tr>
</thead><tbody>
<tr>
<td>YES</td>
<td>SELECT: Selecting all columns using wildcard</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20*%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205">SELECT * FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Count all rows</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20count(*)%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index">SELECT count(*) FROM users/resourcewatch_wri/foo_024_vegetation_health_index</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Selecting specific columns</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20system%3Aindex%2C%20system%3Aasset_size%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205">SELECT system:index, system:asset_size FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>SELECT: Selecting DISTINCT values for specific columns</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20DISTINCT(system%3Aindex)%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205">SELECT DISTINCT(system:index) FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Selecting columns AND counting all rows</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20system%3Aindex%2C%20count(*)%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205">SELECT system:index, count(*) FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>SELECT: Aliasing aggregate function results such as AVG in SELECT</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20AVG(system%3Aasset_size)%20as%20alias%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205">SELECT AVG(system:asset_size) as alias FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (AVG) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20AVG(system%3Aasset_size)%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205">SELECT AVG(system:asset_size) FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (MAX) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20MAX(system%3Aasset_size)%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205">SELECT MAX(system:asset_size) FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (MIN) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20MIN(system%3Aasset_size)%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205">SELECT MIN(system:asset_size) FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (SUM) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20SUM(system%3Aasset_size)%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205">SELECT SUM(system:asset_size) FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>FROM: Using dataset id in FROM statement</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query?sql=SELECT%20*%20FROM%20c12446ce-174f-4ffb-b2f7-77ecb0116aba%20LIMIT%205">SELECT * FROM c12446ce-174f-4ffb-b2f7-77ecb0116aba LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>FROM: Using dataset slug in FROM statement</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query?sql=SELECT%20*%20FROM%20foo024nrt-Vegetation-Health-Index_replacement_4%20LIMIT%205">SELECT * FROM foo024nrt-Vegetation-Health-Index_replacement_4 LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset tableName in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20*%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205">SELECT * FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Greater than filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20*%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20WHERE%20system%3Aasset_size%20%3E%2036975655%20LIMIT%205">SELECT * FROM users/resourcewatch_wri/foo_024_vegetation_health_index WHERE system:asset_size &gt; 36975655 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Greater than or equal filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20*%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20WHERE%20system%3Aasset_size%20%3E%3D%2036975655%20LIMIT%205">SELECT * FROM users/resourcewatch_wri/foo_024_vegetation_health_index WHERE system:asset_size &gt;= 36975655 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Equality filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20*%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20WHERE%20system%3Aasset_size%20%3D%2037153685%20LIMIT%205">SELECT * FROM users/resourcewatch_wri/foo_024_vegetation_health_index WHERE system:asset_size = 37153685 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Lower than filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20*%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20WHERE%20system%3Aasset_size%20%3C%2037180450%20LIMIT%205">SELECT * FROM users/resourcewatch_wri/foo_024_vegetation_health_index WHERE system:asset_size &lt; 37180450 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Lower than or equal filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20*%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20WHERE%20system%3Aasset_size%20%3C%3D%2037180450%20LIMIT%205">SELECT * FROM users/resourcewatch_wri/foo_024_vegetation_health_index WHERE system:asset_size &lt;= 37180450 LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>WHERE: Conjunction (AND) filtering</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20*%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20WHERE%20system%3Aasset_size%20%3C%3D%2037180450%20AND%20system%3Atime_start%20%3E%201572739200000%20LIMIT%205">SELECT * FROM users/resourcewatch_wri/foo_024_vegetation_health_index WHERE system:asset_size &lt;= 37180450 AND system:time_start &gt; 1572739200000 LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>WHERE: Disjunction (OR) filtering</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20*%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20WHERE%20system%3Aasset_size%20%3C%3D%2037180450%20OR%20system%3Atime_start%20%3E%201572739200000%20LIMIT%205">SELECT * FROM users/resourcewatch_wri/foo_024_vegetation_health_index WHERE system:asset_size &lt;= 37180450 OR system:time_start &gt; 1572739200000 LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>WHERE: BETWEEN filtering</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20*%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20WHERE%20system%3Aasset_size%20BETWEEN%2036975655%20AND%2037180450%20LIMIT%205">SELECT * FROM users/resourcewatch_wri/foo_024_vegetation_health_index WHERE system:asset_size BETWEEN 36975655 AND 37180450 LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>WHERE: LIKE filtering</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20*%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20WHERE%20system%3Aindex%20LIKE%20'foo_024_vegetation_health_index%25'%20LIMIT%205">SELECT * FROM users/resourcewatch_wri/foo_024_vegetation_health_index WHERE system:index LIKE &#39;foo_024_vegetation_health_index%&rsquo; LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>GROUP BY: Group results by a single column</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20system%3Aindex%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20GROUP%20BY%20system%3Aindex%20LIMIT%205">SELECT system:index FROM users/resourcewatch_wri/foo_024_vegetation_health_index GROUP BY system:index LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>GROUP BY: Group results by multiple columns</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20system%3Aindex%2C%20system%3Aasset_size%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20GROUP%20BY%20system%3Aindex%2C%20system%3Aasset_size%20LIMIT%205">SELECT system:index, system:asset_size FROM users/resourcewatch_wri/foo_024_vegetation_health_index GROUP BY system:index, system:asset_size LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>GROUP BY: Aggregate functions used with GROUP BY statements</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20system%3Aindex%2C%20COUNT(*)%20as%20count%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20GROUP%20BY%20system%3Aindex%20LIMIT%205">SELECT system:index, COUNT(*) as count FROM users/resourcewatch_wri/foo_024_vegetation_health_index GROUP BY system:index LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>GROUP BY: Special grouping by range function</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20count(*)%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20GROUP%20BY%20range(system%3Aasset_size%2C%200%2C1%2C2%2C3%2C4)%20LIMIT%205">SELECT count(*) FROM users/resourcewatch_wri/foo_024_vegetation_health_index GROUP BY range(system:asset_size, 0,1,2,3,4) LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>ORDER BY: Ordering results by one column</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20system%3Aindex%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20ORDER%20BY%20system%3Aindex%20LIMIT%205">SELECT system:index FROM users/resourcewatch_wri/foo_024_vegetation_health_index ORDER BY system:index LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>ORDER BY: Ordering results by one column descending</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20system%3Aindex%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20ORDER%20BY%20system%3Aindex%20DESC%20LIMIT%205">SELECT system:index FROM users/resourcewatch_wri/foo_024_vegetation_health_index ORDER BY system:index DESC LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>ORDER BY: Ordering results by multiple column</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20system%3Aindex%2C%20system%3Aasset_size%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20ORDER%20BY%20system%3Aindex%2C%20system%3Aasset_size%20LIMIT%205">SELECT system:index, system:asset_size FROM users/resourcewatch_wri/foo_024_vegetation_health_index ORDER BY system:index, system:asset_size LIMIT 5</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>ORDER BY: Ordering results by multiple column descending</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20system%3Aindex%2C%20system%3Aasset_size%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20ORDER%20BY%20system%3Aindex%2C%20system%3Aasset_size%20DESC%20LIMIT%205">SELECT system:index, system:asset_size FROM users/resourcewatch_wri/foo_024_vegetation_health_index ORDER BY system:index, system:asset_size DESC LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>LIMIT: Limit the number of returned results</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20system%3Aindex%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205">SELECT system:index FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>OFFSET: Offset the returned results</td>
<td><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20system%3Aindex%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205%20OFFSET%2010">SELECT system:index FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5 OFFSET 10</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>OFFSET: Offset the returned results using short syntax</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/c12446ce-174f-4ffb-b2f7-77ecb0116aba?sql=SELECT%20system%3Aindex%20FROM%20users%2Fresourcewatch_wri%2Ffoo_024_vegetation_health_index%20LIMIT%205%2C%2010">SELECT system:index FROM users/resourcewatch_wri/foo_024_vegetation_health_index LIMIT 5, 10</a></strong></td>
</tr>
</tbody></table>

<p><em>Note: This table was generated automatically with the help of <a href="https://github.com/resource-watch/sql-compatibility-test">this repository</a>. If you are maintaining the docs, please do not edit manually these tables.</em></p>

<h3 id="document-based-datasets">Document-based datasets</h3>

<p>This section describes the SQL support for querying datasets with connector type <code class="prettyprint">document</code> and providers <code class="prettyprint">csv</code>, <code class="prettyprint">tsv</code>, <code class="prettyprint">json</code> or <code class="prettyprint">xml</code>.</p>

<p>While the API has it&rsquo;s own query handling mechanism, it mostly relies on <a href="https://opendistro.github.io/for-elasticsearch-docs/docs/sql/">Opendistro for Elasticsearch 1.x SQL support</a>, meaning its limitations will also apply to queries done to document-based datasets.</p>

<table><thead>
<tr>
<th>Supported</th>
<th>Feature</th>
<th>Example URL</th>
</tr>
</thead><tbody>
<tr>
<td>YES</td>
<td>SELECT: Selecting all columns using wildcard</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20LIMIT%205">SELECT * FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Count all rows</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20count(*)%20FROM%20data">SELECT count(*) FROM data</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Selecting specific columns</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%2C%20alert__count%20FROM%20data%20LIMIT%205">SELECT bra_biome__name, alert__count FROM data LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>SELECT: Selecting DISTINCT values for specific columns</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20DISTINCT(bra_biome__name)%20FROM%20data%20LIMIT%205">SELECT DISTINCT(bra_biome__name) FROM data LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Selecting columns AND counting all rows</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%2C%20count(*)%20FROM%20data%20LIMIT%205">SELECT bra_biome__name, count(*) FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Aliasing aggregate function results such as AVG in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20AVG(alert__count)%20as%20alias%20FROM%20data%20LIMIT%205">SELECT AVG(alert__count) as alias FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (AVG) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20AVG(alert__count)%20FROM%20data%20LIMIT%205">SELECT AVG(alert__count) FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (MAX) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20MAX(alert__count)%20FROM%20data%20LIMIT%205">SELECT MAX(alert__count) FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (MIN) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20MIN(alert__count)%20FROM%20data%20LIMIT%205">SELECT MIN(alert__count) FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (SUM) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20SUM(alert__count)%20FROM%20data%20LIMIT%205">SELECT SUM(alert__count) FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset id in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query?sql=SELECT%20*%20FROM%209be3bf63-97fc-4bb0-b913-775ccae3cf9e%20LIMIT%205">SELECT * FROM 9be3bf63-97fc-4bb0-b913-775ccae3cf9e LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset slug in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query?sql=SELECT%20*%20FROM%20Glad-Alerts-Daily-Geostore-User-Areas_3%20LIMIT%205">SELECT * FROM Glad-Alerts-Daily-Geostore-User-Areas_3 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset tableName in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20LIMIT%205">SELECT * FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Greater than filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20alert__count%20%3E%202%20LIMIT%205">SELECT * FROM data WHERE alert__count &gt; 2 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Greater than or equal filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20alert__count%20%3E%3D%202%20LIMIT%205">SELECT * FROM data WHERE alert__count &gt;= 2 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Equality filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20alert__count%20%3D%205%20LIMIT%205">SELECT * FROM data WHERE alert__count = 5 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Lower than filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20alert__count%20%3C%208%20LIMIT%205">SELECT * FROM data WHERE alert__count &lt; 8 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Lower than or equal filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20alert__count%20%3C%3D%208%20LIMIT%205">SELECT * FROM data WHERE alert__count &lt;= 8 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Conjunction (AND) filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20alert__count%20%3C%3D%208%20AND%20alert_area__ha%20%3E%200.1%20LIMIT%205">SELECT * FROM data WHERE alert__count &lt;= 8 AND alert_area__ha &gt; 0.1 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Disjunction (OR) filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20alert__count%20%3C%3D%208%20OR%20alert_area__ha%20%3E%200.1%20LIMIT%205">SELECT * FROM data WHERE alert__count &lt;= 8 OR alert_area__ha &gt; 0.1 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: BETWEEN filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20alert__count%20BETWEEN%202%20AND%208%20LIMIT%205">SELECT * FROM data WHERE alert__count BETWEEN 2 AND 8 LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>WHERE: LIKE filtering</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20bra_biome__name%20LIKE%20'Amaz%25'%20LIMIT%205">SELECT * FROM data WHERE bra_biome__name LIKE &#39;Amaz%&rsquo; LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Group results by a single column</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%20FROM%20data%20GROUP%20BY%20bra_biome__name%20LIMIT%205">SELECT bra_biome__name FROM data GROUP BY bra_biome__name LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Group results by multiple columns</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%2C%20alert__count%20FROM%20data%20GROUP%20BY%20bra_biome__name%2C%20alert__count%20LIMIT%205">SELECT bra_biome__name, alert__count FROM data GROUP BY bra_biome__name, alert__count LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Aggregate functions used with GROUP BY statements</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%2C%20COUNT(*)%20as%20count%20FROM%20data%20GROUP%20BY%20bra_biome__name%20LIMIT%205">SELECT bra_biome__name, COUNT(*) as count FROM data GROUP BY bra_biome__name LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Special grouping by range function</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20count(*)%20FROM%20data%20GROUP%20BY%20range(alert__count%2C%200%2C1%2C2%2C3%2C4)%20LIMIT%205">SELECT count(*) FROM data GROUP BY range(alert__count, 0,1,2,3,4) LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by one column</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%20FROM%20data%20ORDER%20BY%20bra_biome__name%20LIMIT%205">SELECT bra_biome__name FROM data ORDER BY bra_biome__name LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by one column descending</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%20FROM%20data%20ORDER%20BY%20bra_biome__name%20DESC%20LIMIT%205">SELECT bra_biome__name FROM data ORDER BY bra_biome__name DESC LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by multiple column</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%2C%20alert__count%20FROM%20data%20ORDER%20BY%20bra_biome__name%2C%20alert__count%20LIMIT%205">SELECT bra_biome__name, alert__count FROM data ORDER BY bra_biome__name, alert__count LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by multiple column descending</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%2C%20alert__count%20FROM%20data%20ORDER%20BY%20bra_biome__name%2C%20alert__count%20DESC%20LIMIT%205">SELECT bra_biome__name, alert__count FROM data ORDER BY bra_biome__name, alert__count DESC LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>LIMIT: Limit the number of returned results</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%20FROM%20data%20LIMIT%205">SELECT bra_biome__name FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>OFFSET: Offset the returned results</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%20FROM%20data%20LIMIT%205%20OFFSET%2010">SELECT bra_biome__name FROM data LIMIT 5 OFFSET 10</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>OFFSET: Offset the returned results using short syntax</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%20FROM%20data%20LIMIT%205%2C%2010">SELECT bra_biome__name FROM data LIMIT 5, 10</a></strong></td>
</tr>
</tbody></table>

<p><em>Note: This table was generated automatically with the help of <a href="https://github.com/resource-watch/sql-compatibility-test">this repository</a>. If you are maintaining the docs, please do not edit manually these tables.</em></p>

<h4 id="troubleshooting-sql-queries-for-document-based-datasets">Troubleshooting SQL queries for document-based datasets</h4>

<p>This SQL syntax supported when running queries for document-based datasets has some known limitations:</p>

<ul>
<li>Very large SQL queries may run into some parsing issues.</li>
<li>Sorting by aggregated fields is not supported. For instance, the following statement is <strong>not</strong> supported: <code class="prettyprint">GROUP BY age ORDER BY COUNT(*)</code>.</li>
<li>Using aggregation functions on top of scalar functions is also not possible. For instance, the following statement is <strong>not</strong> supported: <code class="prettyprint">SELECT MAX(abs(age))</code>.</li>
<li>Sub-queries are only supported to a small degree, but the usage of <code class="prettyprint">GROUP BY</code> or <code class="prettyprint">HAVING</code> in the sub-query is not supported. For instance, the following statement <strong>is</strong> supported: <code class="prettyprint">SELECT * FROM (SELECT first_name, last_name FROM emp WHERE last_name NOT LIKE &#39;%a%&#39;) WHERE first_name LIKE &#39;A%&#39; ORDER BY 1</code>, but statements with a higher level of complexity than applying simple conditions or orderings in the sub-query might not be supported.</li>
<li>The usage of scalar functions on nested fields in <code class="prettyprint">ORDER BY</code> or <code class="prettyprint">WHERE</code> clauses is limited. For instance, the following statement is <strong>not</strong> supported: <code class="prettyprint">ORDER BY YEAR(dep.start_date)</code>.</li>
</ul>

<p>You can read more about the limitations of using SQL with document-based datasets <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/sql-limitations.html">here</a>.</p>

<h3 id="rasdaman-datasets">Rasdaman datasets</h3>

<p>SQL-like queries can be employed for accessing data stored in Rasdaman datasets. Subsets on the original axes of the data may be provided in the WHERE statement. So far, only operations that result in a single scalar can be obtained from Rasdaman - averages, minimums, maximums.</p>
<pre class="highlight shell"><code>curl -XGET <span class="s1">'https://api.resourcewatch.org/v1/query?sql=SELECT avg(Green) from 18c0b71d-2f55-4a45-9e5b-c35db3ebfe94 where Lat &gt; 0 and  Lat &lt; 45'</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Bearer &lt;token&gt;'</span>
</code></pre>
<h3 id="nex-gddp-and-loca-datasets">NEX-GDDP and Loca datasets</h3>

<blockquote>
<p>Example of a query for a NEX-GDDP/Loca dataset, providing lat and lon as query parameters:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s1">'https://api.resourcewatch.org/v1/query/aaadd6c3-93ea-44bc-ba8b-7af3f40d39e1?sql=SELECT * FROM data&amp;lat=30&amp;lon=9'</span>
</code></pre>
<blockquote>
<p>Example of a query for a NEX-GDDP/Loca dataset, providing a geostore id:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s1">'https://api.resourcewatch.org/v1/query/aaadd6c3-93ea-44bc-ba8b-7af3f40d39e1?sql=SELECT * FROM data&amp;geostore=972c24e1da2c2baacc7572ee9501abdc'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"tasmin"</span><span class="p">:</span><span class="w"> </span><span class="mf">243.6352</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tasmin_q25"</span><span class="p">:</span><span class="w"> </span><span class="mf">243.4849</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tasmin_q75"</span><span class="p">:</span><span class="w"> </span><span class="mf">243.8861</span><span class="p">,</span><span class="w">
      </span><span class="s2">"year"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1971-01-01T00:00:00-01:00"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"tasmin"</span><span class="p">:</span><span class="w"> </span><span class="mf">244.0795</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tasmin_q25"</span><span class="p">:</span><span class="w"> </span><span class="mf">243.7174</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tasmin_q75"</span><span class="p">:</span><span class="w"> </span><span class="mf">244.3168</span><span class="p">,</span><span class="w">
      </span><span class="s2">"year"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1981-01-01T00:00:00-01:00"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"tasmin"</span><span class="p">:</span><span class="w"> </span><span class="mf">244.4218</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tasmin_q25"</span><span class="p">:</span><span class="w"> </span><span class="mf">243.9681</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tasmin_q75"</span><span class="p">:</span><span class="w"> </span><span class="mf">244.5883</span><span class="p">,</span><span class="w">
      </span><span class="s2">"year"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1991-01-01T00:00:00-01:00"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"tasmin"</span><span class="p">:</span><span class="w"> </span><span class="mf">244.697</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tasmin_q25"</span><span class="p">:</span><span class="w"> </span><span class="mf">244.2883</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tasmin_q75"</span><span class="p">:</span><span class="w"> </span><span class="mf">244.8852</span><span class="p">,</span><span class="w">
      </span><span class="s2">"year"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2001-01-01T00:00:00-01:00"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"tasmin"</span><span class="p">:</span><span class="w"> </span><span class="mf">244.7719</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tasmin_q25"</span><span class="p">:</span><span class="w"> </span><span class="mf">244.3449</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tasmin_q75"</span><span class="p">:</span><span class="w"> </span><span class="mf">245.0115</span><span class="p">,</span><span class="w">
      </span><span class="s2">"year"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2011-01-01T00:00:00-01:00"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Like with the other supported providers, you can use a SQL-like syntax to query datasets stored both in NASA NEX-GDDP or in Loca. However, these datasets always contain geo-referenced data, and so they expect that you always provide either a <code class="prettyprint">lat</code> + <code class="prettyprint">lon</code> pair, or a <code class="prettyprint">geostore</code> id, in order to filter the returned data. If you don&rsquo;t provide either a geostore id or a lat+lon pair, the request will fail with status code <code class="prettyprint">400 Bad Request</code>, with the following message: <code class="prettyprint">No coordinates provided. Include geostore or lat &amp; lon</code>.</p>

<p>The examples on the side allow you to understand how you can provide either the <code class="prettyprint">geostore</code> id or the <code class="prettyprint">lat</code> + <code class="prettyprint">lon</code> combination.</p>

<h3 id="wms-datasets">WMS datasets</h3>

<p>Queries to WMS datasets are no longer supported.</p>

          <h1 id="layer">Layer</h1>

<h2 id="what-is-a-layer">What is a layer?</h2>

<p>By now, you are probably already familiar with <a href="#dataset">datasets</a> and <a href="#query">querying</a> them (if you are not, now is a good time to get up to speed on those). Many of the datasets you&rsquo;ll find on the RW API - and perhaps the datasets you are uploading too - contain georeferenced information. If that&rsquo;s the case, then you may want to render your data as a web map layer, and the RW API&rsquo;s <em>layer</em> endpoints can help you with that.</p>

<p>As we&rsquo;ve seen in the <a href="#layer">layer concept docs</a>, a RW API layer may store data in different formats, depending on the needs of its author. This is done using the several open format fields a layer has. To keep this documentation easy to understand, we&rsquo;ll spit our approach to layers into two sections:</p>

<ul>
<li>We&rsquo;ll first discuss the details of the endpoints that allow you to <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a> layers, without focusing on the actual data contained in it.</li>
<li>In an future version of these docs, we&rsquo;ll dive deeper into some of the most common structures used to store data in the layer&rsquo;s open format fields.</li>
</ul>

<p>After viewing the documentation below, consider looking at the <a href="https://resource-watch.github.io/doc-api/tutorials.html#mapbox-webmap-quickstart">webmap tutorial</a> for a step-by-step guide to rendering an actual layer on a web application.</p>

<h2 id="getting-all-layers">Getting all layers</h2>

<blockquote>
<p>Getting a list of layers</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/layer"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e5c3e7c5-19ae-4ca0-a461-71f1f67aa553"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"total-co2-emissions-by-year"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5858f37140621f11066fb2f7"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"rw"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Total CO2 emissions by year"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11de2bc1-368b-42ed-a207-aaff8ece752b"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cartodb"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"layerConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"maxzoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"minzoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"layers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="p">{</span><span class="w">
                                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mapnik"</span><span class="p">,</span><span class="w">
                                </span><span class="s2">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                    </span><span class="s2">"sql"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELECT * cait_2_0_country_ghg_emissions_filtered"</span><span class="p">,</span><span class="w">
                                    </span><span class="s2">"cartocss"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                                    </span><span class="s2">"cartocss_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.3.0"</span><span class="w">
                                </span><span class="p">}</span><span class="w">
                            </span><span class="p">}</span><span class="w">
                        </span><span class="p">]</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"legendConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"marks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rect"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"table"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"applicationConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"staticImageConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/layer?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/layer?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/layer?page[number]=634&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"prev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/layer?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/layer?page[number]=2&amp;page[size]=10"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">63</span><span class="p">,</span><span class="w">
        </span><span class="s2">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">628</span><span class="p">,</span><span class="w">
        </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint allows you to list existing layers and their properties. The result is a paginated list of 10 layers, followed by metadata on total number of layers and pages, as well as useful pagination links. By default, only layers with <code class="prettyprint">env</code> value <code class="prettyprint">production</code> are displayed. In the sections below, we’ll explore how you can customize this endpoint call to match your needs.</p>

<h3 id="getting-all-layers-for-a-dataset">Getting all layers for a dataset</h3>

<blockquote>
<p>Return the layers associated with a dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer"</span>
</code></pre>
<p>When handling layers, it&rsquo;s common to want to limit results to those layers associated with a given dataset. Besides the <a href="#filters132">filters</a> covered below, there&rsquo;s an additional convenience endpoint to get the layers associated with a dataset, as shown in this example. </p>

<h3 id="getting-all-layers-for-multiple-datasets">Getting all layers for multiple datasets</h3>

<blockquote>
<p>Return all layers associated with two datasets</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/layer/find-by-ids"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
-d <span class="s1">'{
    "ids": ["&lt;dataset 1 id&gt;", "&lt;dataset 2 id&gt;"]
}'</span>
</code></pre><pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0dc39924-5736-4898-bda4-49cdc2f3b208"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOAA NEXt-Generation RADar (NEXRAD) Products (Locations)"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"noaa-next-generation-radar-nexrad-products-locations"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0b9e546c-f42a-4b26-bad3-7d606f58961c"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"prep"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"USA"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arcgis"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"legacy"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"layerConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"useCors"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"layers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="mi">0</span><span class="w">
                        </span><span class="p">],</span><span class="w">
                        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://gis.ncdc.noaa.gov/arcgis/rest/services/cdo/nexrad/MapServer"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dynamicMapLayer"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"legendConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"basic"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NEXRAD"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"color"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#FF0000"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"icon"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://gis.ncdc.noaa.gov/arcgis/rest/services/cdo/nexrad/MapServer/0/images/47768c7d812818af98d8da03a04d4fe4"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"interactionConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"applicationConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"staticImageConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-09-07T14:50:22.578Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-12-18T12:08:25.703Z"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0b021478-f4d3-4a1e-ae88-ab97f0085bc9"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Projected change in average precipitation (in)"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"projected-change-in-average-precipitation-between-u-s"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d443beca-d199-4872-9d7d-d82c45e43151"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Projected change in average precipitation for the A2 emissions scenario."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"prep"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"USA"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arcgis"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"legacy"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"layerConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"use-cors"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"layers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="mi">12</span><span class="w">
                        </span><span class="p">],</span><span class="w">
                        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://gis-gfw.wri.org/arcgis/rest/services/prep/nca_figures/MapServer"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="s2">"zoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"center"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"lat"</span><span class="p">:</span><span class="w"> </span><span class="mf">39.6395375643667</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"lng"</span><span class="p">:</span><span class="w"> </span><span class="mf">-99.84375</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dynamicMapLayer"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="mf">-125.61</span><span class="p">,</span><span class="w">
                        </span><span class="mf">24.73</span><span class="p">,</span><span class="w">
                        </span><span class="mf">-66.81</span><span class="p">,</span><span class="w">
                        </span><span class="mf">49.07</span><span class="w">
                    </span><span class="p">]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"legendConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"choropleth"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt; -90"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"color"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#8C5107"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-90 - -60"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"color"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#BF822B"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"interactionConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"applicationConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"staticImageConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-09-15T13:47:39.829Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-02T20:54:17.260Z"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint allows authenticated users to load all layers belonging to multiple datasets in a single request. </p>

<blockquote>
<p>Return all layers associated with two datasets, that are associated with either <code class="prettyprint">rw</code> or <code class="prettyprint">prep</code> applications </p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/layer/find-by-ids"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
-d <span class="s1">'{
    "ids": ["&lt;dataset 1 id&gt;", "&lt;dataset 2 id&gt;"],
    "app" "rw,prep"
}'</span>
</code></pre>
<blockquote>
<p>Return all layers associated with two datasets, that are associated with both <code class="prettyprint">rw</code> and <code class="prettyprint">prep</code> applications simultaneously </p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/layer/find-by-ids"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
-d <span class="s1">'{
    "ids": ["&lt;dataset 1 id&gt;", "&lt;dataset 2 id&gt;"],
    "app" "rw@prep"
}'</span>
</code></pre>
<p>Besides the required <code class="prettyprint">ids</code> array, your request body may optionally include a <code class="prettyprint">app</code> string value if you&rsquo;d like to filter the returned layers by their <code class="prettyprint">application</code>:</p>

<ul>
<li>Use a single value, like <code class="prettyprint">rw</code>, if you want to show only layers that have <code class="prettyprint">rw</code> as one of their applications. </li>
<li>Use a comma separated list, like <code class="prettyprint">rw,prep</code>, if you want to show only layers that have <code class="prettyprint">rw</code> or <code class="prettyprint">prep</code> as one of their applications.</li>
<li>Use a @ separated list, like <code class="prettyprint">rw@prep</code>, if you want to show only layers that have both <code class="prettyprint">rw</code> and <code class="prettyprint">prep</code> as their applications.</li>
<li>Note that the the filters do not need to match on the full application list. For example, the filters <code class="prettyprint">rw,prep</code> and <code class="prettyprint">rw@prep</code> will both match a layer with the application list <code class="prettyprint">[&quot;rw&quot;, &quot;prep&quot;, &quot;gfw&quot;]</code>.</li>
</ul>

<p>Please note that, unlike <a href="#getting-all-layers">getting all layers</a> or <a href="#getting-all-layers-for-a-dataset">getting all layers for a dataset</a>, this endpoint does not come with paginated results, nor does it support <a href="#pagination113">pagination</a>, <a href="#filters114">filtering</a> or <a href="#sorting115">sorting</a> or <a href="#include-related-entities116">including related entities</a> described in their respective sections.</p>

<h3 id="pagination">Pagination</h3>

<p>By default, layers are listed in pages of 10 layers each, and the first page is loaded. However, you can customize this behavior using the following query parameters:  </p>

<blockquote>
<p>Custom pagination: load page 2 using 25 results per page</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/layer?page[number]=2&amp;page[size]=25"</span>
</code></pre>
<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Default</th>
</tr>
</thead><tbody>
<tr>
<td>page[size]</td>
<td style="text-align: center">The number elements per page. Values above 100 are not officially supported.</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">10</td>
</tr>
<tr>
<td>page[number]</td>
<td style="text-align: center">The page number</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">1</td>
</tr>
</tbody></table>

<h3 id="filters">Filters</h3>

<blockquote>
<p>Return the layers filtered by those whose name contains emissions</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/layer?name=emissions"</span>
</code></pre>
<blockquote>
<p>Return the layers filtered by dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/layer?dataset=11de2bc1-368b-42ed-a207-aaff8ece752b"</span>
curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/dataset/11de2bc1-368b-42ed-a207-aaff8ece752b/layer"</span>
</code></pre>
<blockquote>
<p>Filter layers by published status</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/layer?published=false"</span>
</code></pre>
<blockquote>
<p>Filter layers by environment</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/layer?env=staging"</span>
</code></pre>
<blockquote>
<p>Return the layers filtered by those whose applications contain rw</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/layer?app=rw"</span>
</code></pre>
<p>The layer list endpoint provides a wide range of filters that you can use to tailor your layer listing. Filtering layers adheres to the conventions defined in the <a href="index-rw.html#filtering">Filter guidelines for the RW API</a>, so we strongly recommend reading that section before proceeding. In addition to these conventions, you will be able to use the great majority of the layer fields you&rsquo;ll find on the <a href="#layer-reference">layer reference</a> section, with the following exceptions:</p>

<ul>
<li><code class="prettyprint">id</code></li>
<li><code class="prettyprint">userName</code></li>
<li><code class="prettyprint">userRole</code>: filtering by the role of the owning user can be done using the <code class="prettyprint">user.role</code> query argument. If the requesting user does not have the ADMIN role, this filter is ignored.</li>
<li>Filtering by fields of type <code class="prettyprint">Object</code> is not supported.</li>
</ul>

<p>Additionally, you can use the following filters:</p>

<ul>
<li><code class="prettyprint">collection</code>: filters by a <a href="#collections">collection</a> id. Requires being authenticated.</li>
<li><code class="prettyprint">favourite</code>: if defined, only the layers set by the user as <a href="#favorites">favorites</a> will be returned. Requires being authenticated.</li>
</ul>

<h3 id="sorting">Sorting</h3>

<blockquote>
<p>Sorting layers</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/layer?sort=name"</span>
</code></pre>
<blockquote>
<p>Sorting layers by multiple criteria</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/layer?sort=name,slug"</span>
</code></pre>
<blockquote>
<p>Explicit order of sorting</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/layer?sort=-name,+slug"</span>
</code></pre>
<blockquote>
<p>Sorting layers by the role of the user who owns the layer</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/layer?sort=user.role"</span>
</code></pre>
<p>The Layer service currently supports sorting using the <code class="prettyprint">sort</code> query parameter. Sorting layer adheres to the conventions defined in the <a href="index-rw.html#sorting">Sorting guidelines for the RW API</a>, so we strongly recommend reading that section before proceeding. Additionally, you can check out the <a href="#layer-reference">Layer reference</a> section for a detailed description of the fields you can use when sorting. In addition to all layer model fields, you can sort the returned results by the name (using <code class="prettyprint">user.name</code>) or role (using <code class="prettyprint">user.role</code>) of the user owner of the layer. Keep in mind that sorting by user data is restricted to ADMIN users.</p>

<h3 id="include-entities-associated-with-the-layers">Include entities associated with the layers</h3>

<p>When fetching layers, you can request additional entities to be loaded. The following entities are available:</p>

<h4 id="vocabulary">Vocabulary</h4>

<blockquote>
<p>Loads vocabulary associated with each layer:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/layer?includes=vocabulary"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e5c3e7c5-19ae-4ca0-a461-71f1f67aa553"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"total-co2-emissions-by-year"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5858f37140621f11066fb2f7"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"rw"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Total CO2 emissions by year"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11de2bc1-368b-42ed-a207-aaff8ece752b"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cartodb"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"layerConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"maxzoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"minzoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"layers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="p">{</span><span class="w">
                                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mapnik"</span><span class="p">,</span><span class="w">
                                </span><span class="s2">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                    </span><span class="s2">"sql"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELECT * cait_2_0_country_ghg_emissions_filtered"</span><span class="p">,</span><span class="w">
                                    </span><span class="s2">"cartocss"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                                    </span><span class="s2">"cartocss_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.3.0"</span><span class="w">
                                </span><span class="p">}</span><span class="w">
                            </span><span class="p">}</span><span class="w">
                        </span><span class="p">]</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"legendConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"marks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rect"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"table"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"applicationConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"staticImageConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"vocabulary"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"resourcewatch"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                </span><span class="s2">"inuncoast"</span><span class="p">,</span><span class="w">
                                </span><span class="s2">"rp0002"</span><span class="p">,</span><span class="w">
                                </span><span class="s2">"historical"</span><span class="p">,</span><span class="w">
                                </span><span class="s2">"nosub"</span><span class="w">
                            </span><span class="p">],</span><span class="w">
                            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"resourcewatch"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Loads all vocabulary entities associated with each layer. Internally this uses the <a href="#getting-vocabularies-associated-to-a-resource">getting vocabularies associated to a resource</a> endpoint, and thus it&rsquo;s affected by its behavior - particularly, only vocabularies associated with the <code class="prettyprint">rw</code> application will be listed. There&rsquo;s currently no way to modify this behavior.</p>

<h4 id="user">User</h4>

<p>Loads the name and email address of the author of the layer. If you request this issue as an authenticated user with <code class="prettyprint">ADMIN</code> role, you will additionally get the author&rsquo;s role.</p>

<p>If the data is not available (for example, the user has since been deleted), no <code class="prettyprint">user</code> property will be added to the layer object.</p>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/layer?includes=user"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e5c3e7c5-19ae-4ca0-a461-71f1f67aa553"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"total-co2-emissions-by-year"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5858f37140621f11066fb2f7"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"rw"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Total CO2 emissions by year"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11de2bc1-368b-42ed-a207-aaff8ece752b"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cartodb"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"layerConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"maxzoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"minzoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"layers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="p">{</span><span class="w">
                                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mapnik"</span><span class="p">,</span><span class="w">
                                </span><span class="s2">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                    </span><span class="s2">"sql"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELECT * cait_2_0_country_ghg_emissions_filtered"</span><span class="p">,</span><span class="w">
                                    </span><span class="s2">"cartocss"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                                    </span><span class="s2">"cartocss_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.3.0"</span><span class="w">
                                </span><span class="p">}</span><span class="w">
                            </span><span class="p">}</span><span class="w">
                        </span><span class="p">]</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"legendConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"marks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rect"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"table"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"applicationConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"staticImageConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.doe@vizzuality.com"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h4 id="requesting-multiple-additional-entities">Requesting multiple additional entities</h4>

<p>You can request multiple related entities in a single request using commas to separate multiple keywords</p>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/layer?includes=user,vocabulary"</span>
</code></pre>
<h2 id="getting-a-layer-by-id-or-slug">Getting a layer by id or slug</h2>

<blockquote>
<p>Getting a layer by id:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer_id&gt;"</span>
curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/layer/&lt;layer_id&gt;"</span>
</code></pre>
<blockquote>
<p>Getting a layer by slug:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer_slug&gt;"</span>
curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/layer/&lt;layer_slug&gt;"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
       </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e5c3e7c5-19ae-4ca0-a461-71f1f67aa553"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
           </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"total-co2-emissions-by-year"</span><span class="p">,</span><span class="w">
           </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5858f37140621f11066fb2f7"</span><span class="p">,</span><span class="w">
           </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
               </span><span class="s2">"rw"</span><span class="w">
           </span><span class="p">],</span><span class="w">
           </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Total CO2 emissions by year"</span><span class="p">,</span><span class="w">
           </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
           </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11de2bc1-368b-42ed-a207-aaff8ece752b"</span><span class="p">,</span><span class="w">
           </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
           </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cartodb"</span><span class="p">,</span><span class="w">
           </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
           </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
           </span><span class="s2">"layerConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
               </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                   </span><span class="s2">"maxzoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
                   </span><span class="s2">"minzoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
                   </span><span class="s2">"layers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                       </span><span class="p">{</span><span class="w">
                           </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mapnik"</span><span class="p">,</span><span class="w">
                           </span><span class="s2">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                               </span><span class="s2">"sql"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELECT * cait_2_0_country_ghg_emissions_filtered"</span><span class="p">,</span><span class="w">
                               </span><span class="s2">"cartocss"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                               </span><span class="s2">"cartocss_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.3.0"</span><span class="w">
                           </span><span class="p">}</span><span class="w">
                       </span><span class="p">}</span><span class="w">
                   </span><span class="p">]</span><span class="w">
               </span><span class="p">}</span><span class="w">
           </span><span class="p">},</span><span class="w">
           </span><span class="s2">"legendConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="s2">"marks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                   </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rect"</span><span class="p">,</span><span class="w">
                   </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                       </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"table"</span><span class="w">
                   </span><span class="p">}</span><span class="w">
               </span><span class="p">}</span><span class="w">
           </span><span class="p">},</span><span class="w">
           </span><span class="s2">"applicationConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
           </span><span class="s2">"staticImageConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
       </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
       </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"saved"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
       </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-23T16:51:42.571Z"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-23T16:51:42.571Z"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>If you know the id or the <code class="prettyprint">slug</code> of a layer, then you can access it directly. Both id and <code class="prettyprint">slug</code> are case-sensitive.</p>

<h3 id="include-entities-associated-with-the-layer">Include entities associated with the layer</h3>

<p>You can load related <code class="prettyprint">user</code> and <code class="prettyprint">vocabulary</code> data in the same request. See <a href="#include-entities-associated-with-the-layers">this section</a> for more details.</p>

<h2 id="creating-a-layer">Creating a layer</h2>

<blockquote>
<p>To create a layer, you need to provide at least the following details:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-d  <span class="se">\</span>
<span class="s1">'{
    "application": [
      "rw"
    ],
    "name": "Water stress",
    "description": "water stress"
}'</span>
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bd8a36df-2e52-4b2d-b7be-a48bdcd7c769"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Water stress"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Water-stress_7"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"water stress"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadb06df2dc74d2ad054fb"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"layerConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"legendConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"interactionConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"applicationConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"staticImageConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-04T14:28:24.575Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-04T14:28:24.575Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>In this section we&rsquo;ll guide you through the process of creating a layer in the RW API. Layer creation is available to all registered API users, and will allow you to store your own layer visualisation settings on the API, for reusing and sharing.</p>

<p>Before creating a layer, there are a few things you must know and do:</p>

<ul>
<li>In order to be able to create a layer, you need to be <a href="#authentication">authenticated</a>.</li>
<li>Depending on your user account&rsquo;s role, you may have permission to create a layer but not delete it afterwards - read more about this in <a href="index-rw.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
<li>The layers you create on the RW API will be publicly visible and available to other users.</li>
</ul>

<p>Creating a layer is done using a POST request and passing the relevant data as body fields. The supported body fields are as defined on the <a href="#layer-reference">layer reference</a> section, but the minimum field list you must specify for all layers is:</p>

<ul>
<li>name</li>
<li>description </li>
<li>application</li>
</ul>

<p>There&rsquo;s also a dependency on a dataset id, as it is required to build the POST URL. As noted on the <a href="#layer">layer concept</a> documentation, a layer is meant to hold the rendering details of a layer, but not the actual data - that should be part of the dataset. While this is not enforced - it&rsquo;s up to your rendering tool to load the data, and it can do it from a RW API dataset or from anywhere else - it&rsquo;s common and best practice to have the data for a layer be sourced from the dataset that&rsquo;s associated with it.</p>

<p>When a layer is created, a <a href="#vocabulary-and-tags">vocabulary tag</a> for it is automatically created, associated with the dataset tag.</p>

<p>The layer service was built to be very flexible, and not be restricted to specific layer rendering libraries or tools. This gives you the freedom to use virtually any rendering technology you want, but it also means you&rsquo;ll have to make additional decisions on how to structure your data into the different open format fields provided by a RW API layer. In a future release of these docs, we&rsquo;ll show you some examples of how existing applications use different rendering tools with the layer endpoints, to give you an idea on how you can structure your own data, and also as a way to help you get started creating your first layers for your own custom applications. Until then, the <a href="https://resource-watch.github.io/doc-api/tutorials.html">tutorials section of the documentation</a> shows an example of how existing raster tile layers may be structured and how the information in the layer response can be utilized by a third-party visualization library.</p>

<h4 id="errors-for-creating-a-layer">Errors for creating a layer</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><code class="prettyprint">&lt;field&gt;</code>: <code class="prettyprint">&lt;field&gt;</code> can not be empty</td>
<td>Your are missing a required field value.</td>
</tr>
<tr>
<td>400</td>
<td>- <code class="prettyprint">&lt;field&gt;</code>: must be a <code class="prettyprint">&lt;restriction&gt;</code></td>
<td>The value provided for the mentioned field does not match the requirements.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You are not authenticated.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to create a layer with one or more <code class="prettyprint">application</code> values that are not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Dataset not found</td>
<td>The provided dataset id does not exist.</td>
</tr>
<tr>
<td>404</td>
<td>Error: StatusCodeError: 404 - {\&ldquo;errors\&rdquo;:[{\&ldquo;status\&rdquo;:404,\&ldquo;detail\&rdquo;:\&ldquo;Dataset not found\&rdquo;}]}</td>
<td>The provided dataset exists but is not present on the <a href="#graph">graph</a>.</td>
</tr>
</tbody></table>

<h2 id="updating-a-layer">Updating a layer</h2>

<blockquote>
<p>Example PATCH request that updates a layer&rsquo;s name:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer_id&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> -d <span class="se">\</span>
<span class="s1">'{
  "name":"foo"
}'</span>
</code></pre>
<p>The update layer endpoint allows you to modify the details of an existing layer. As noted on the <a href="#layer">layer concept</a> documentation, the layer object stores the details of how layer is meant to be rendered, but does not contain the actual data. As such, if you are looking to update the data that&rsquo;s being displayed on your map, this is probably not the endpoint you&rsquo;re looking for - you may want to <a href="#updating-a-dataset">update your dataset</a> instead. Use this endpoint if you want to modify things like legend details, color schemes, etc - this will depend on your rendering implementation. </p>

<p>Unless specified otherwise in their description, all the fields present in the <a href="#layer-reference">layer reference</a> section can be updated using this endpoint. When passing new values for Object type fields, the new value will fully overwrite the previous one. It’s up to you, as an API user, to build any merging logic into your application.</p>

<p>To perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must be logged in and belong to the same application as the layer</li>
<li>the user must comply with <a href="index-rw.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
</ul>

<h4 id="errors-for-updating-a-layer">Errors for updating a layer</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>- <code class="prettyprint">&lt;field&gt;</code>: must be a <code class="prettyprint">&lt;restriction&gt;</code></td>
<td>The value provided for the mentioned field does not match the requirements.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to update a layer.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code class="prettyprint">ADMIN</code> role, or have role <code class="prettyprint">MANAGER</code> and be the layer&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the layer).</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to update a layer with one or more <code class="prettyprint">application</code> values that are not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Layer with id <id> doesn&rsquo;t exist</td>
<td>A layer with the provided id does not exist.</td>
</tr>
<tr>
<td>404</td>
<td>Dataset not found</td>
<td>A dataset with the provided id does not exist.</td>
</tr>
</tbody></table>

<h2 id="deleting-a-layer">Deleting a layer</h2>

<blockquote>
<p>Example DELETE request that deletes a layer:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer_id&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bd8a36df-2e52-4b2d-b7be-a48bdcd7c769"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Water stress"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Water-stress_7"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"water stress"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadb06df2dc74d2ad054fb"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"layerConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"legendConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"interactionConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"applicationConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"staticImageConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-04T14:28:24.575Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-04T14:28:24.575Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Use this endpoint if you&rsquo;d like to delete a layer from the RW API. As a layer object does not store the actual data being displayed, this will only delete the layer settings, but the actual data will continue to be available at its source.</p>

<p>Besides deleting the layer itself, this endpoint also deletes graph vocabularies and metadata related to the layer itself. These delete operations are issued after the layer itself is deleted. The process is not atomic, and the output of the API request is based solely on the result of the deletion of the layer itself. For example, is the metadata service is temporarily unavailable when you issue your delete layer request, the layer itself will be deleted, but the associated metadata will continue to exist. The response will not reflect the failure to delete metadata in any way.</p>

<p>In order to delete a layer, the following conditions must be met:</p>

<ul>
<li>the layer&rsquo;s <code class="prettyprint">protected</code> property must be set to <code class="prettyprint">false</code>.</li>
<li>the user must be logged in and belong to the same application as the layer.</li>
<li>the user must comply with <a href="index-rw.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
</ul>

<h4 id="errors-for-deleting-a-layer">Errors for deleting a layer</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Layer is protected</td>
<td>You are attempting to delete a layer that has <code class="prettyprint">protected</code> set to prevent deletion.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to delete a layer.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code class="prettyprint">ADMIN</code> role, or have role <code class="prettyprint">MANAGER</code> and be the layer&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the layer)</td>
</tr>
<tr>
<td>404</td>
<td>Dataset not found</td>
<td>A dataset with the provided id does not exist.</td>
</tr>
<tr>
<td>404</td>
<td>Layer with id <id> doesn&rsquo;t exist</td>
<td>A layer with the provided id does not exist.</td>
</tr>
</tbody></table>

<h2 id="layer-reference">Layer reference</h2>

<p>This section gives you a complete view at the properties that are maintained as part of layer. When interacting with a layer (on get, on create, etc) you will find most of these properties available to you, although they may be organized in a slightly different structure (ie: on get, everything but the <code class="prettyprint">id</code> is nested inside an <code class="prettyprint">attributes</code> object).</p>

<p>You can find more details in the <a href="https://github.com/resource-watch/layer/blob/master/app/src/models/layer.model.js">source code</a>.</p>

<table><thead>
<tr>
<th>Field name</th>
<th>Type</th>
<th>Required</th>
<th>Default value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Yes (autogenerated)</td>
<td></td>
<td>Unique Id of the layer. Auto generated on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Name of the layer.</td>
</tr>
<tr>
<td>dataset</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Id of the dataset to which the layer corresponds. Set on layer creation, cannot be modified.</td>
</tr>
<tr>
<td>slug</td>
<td>String</td>
<td>Yes (autogenerated)</td>
<td></td>
<td>Slug of the layer. Auto generated on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>No</td>
<td></td>
<td>User defined description of the layer.</td>
</tr>
<tr>
<td>application</td>
<td>Array</td>
<td>Yes</td>
<td></td>
<td>Applications associated with this layer. Read more about this field <a href="index-rw.html#applications">here</a>.</td>
</tr>
<tr>
<td>iso</td>
<td>Array</td>
<td>No</td>
<td></td>
<td>List of ISO3 codes of the countries that relate to the layer. If empty (or contains a single element: &lsquo;global&rsquo;) then the layer is a global layer.</td>
</tr>
<tr>
<td>provider</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Layer provider. It typically identifies the source service for the data displayed in the layer.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Layer type.</td>
</tr>
<tr>
<td>userId</td>
<td>String</td>
<td>Yes (autopopulated)</td>
<td></td>
<td>Id of the user who created the layer. Set automatically on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>default</td>
<td>Boolean</td>
<td>No</td>
<td>false</td>
<td>If the layer should be used as the dataset&rsquo;s default layer.</td>
</tr>
<tr>
<td>protected</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td>If the layer is protected. A protected layer cannot be deleted.</td>
</tr>
<tr>
<td>published</td>
<td>Boolean</td>
<td>Yes</td>
<td>true</td>
<td>If the layer is published or not.</td>
</tr>
<tr>
<td>env</td>
<td>String</td>
<td>Yes</td>
<td>production</td>
<td>Environment to which the layer belongs. Read more about this field in the <a href="index-rw.html#environments">Environments concept section</a>.</td>
</tr>
<tr>
<td>applicationConfig</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Schema-less object meant to host application-specific data or behavior configuration.</td>
</tr>
<tr>
<td>layerConfig</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Schema-less object meant to define layer specific data, like source of data, styling and animation settings.</td>
</tr>
<tr>
<td>legendConfig</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Schema-less object meant to define how a layer legend should be represented visually.</td>
</tr>
<tr>
<td>staticImageConfig</td>
<td>Object</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>interactionConfig</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Schema-less object meant to define interactive layer element behavior, ie.: how tooltips behave on click.</td>
</tr>
<tr>
<td>userName</td>
<td>String</td>
<td>No (autogenerated)</td>
<td>null</td>
<td>Name of the user who created the layer. This value is used only internally, and is never directly exposed through the API. Cannot be modified by users.</td>
</tr>
<tr>
<td>userRole</td>
<td>String</td>
<td>No (autogenerated)</td>
<td>null</td>
<td>Role of the user who created the layer. This value is used only internally, and is never directly exposed through the API. Cannot be modified by users.</td>
</tr>
<tr>
<td>createdAt</td>
<td>Date</td>
<td>No (autogenerated)</td>
<td><current date></td>
<td>Automatically maintained date of when the layer was created. Cannot be modified by users.</td>
</tr>
<tr>
<td>updatedAt</td>
<td>Date</td>
<td>No (autogenerated)</td>
<td><current date></td>
<td>Automatically maintained date of when the layer was last updated. Cannot be modified by users.</td>
</tr>
</tbody></table>

          <h1 id="widget">Widget</h1>

<h2 id="what-is-a-widget">What is a widget?</h2>

<p>In a nutshell, a RW API widget is a toolset to help you render your data in a visually more appealing way. The <a href="#widget">widget concept documentation</a> will give you a more detailed description of this, and we encourage you to read it before proceeding. We also recommend you take a look at our section about <a href="#widget-configuration-using-vega-grammar">Vega</a> if you plan on reusing existing widgets or uploading widgets that are reusable by other users. The RW API does not require you to use Vega, but we highly recommend that you do, as it&rsquo;s the technology used by many of the widgets you&rsquo;ll find on the RW API.</p>

<h2 id="getting-all-widgets">Getting all widgets</h2>

<blockquote>
<p>Getting a list of widgets</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/widget"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"data"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
             </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example Widget"</span><span class="p">,</span><span class="w">
             </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be76f130-ed4e-4972-827d-aef8e0dc6b18"</span><span class="p">,</span><span class="w">
             </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-widget"</span><span class="p">,</span><span class="w">
             </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5820ad9469a0287982f4cd18"</span><span class="p">,</span><span class="w">
             </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
             </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
             </span><span class="s2">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
             </span><span class="s2">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
             </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                 </span><span class="s2">"rw"</span><span class="w">
             </span><span class="p">],</span><span class="w">
             </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
             </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
             </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
             </span><span class="s2">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
             </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
             </span><span class="s2">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
             </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
             </span><span class="s2">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
             </span><span class="s2">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{}"</span><span class="p">,</span><span class="w">
             </span><span class="s2">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
             </span><span class="s2">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
             </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
             </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"links"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"first"</span><span class="p">:</span><span class="s2">"https://api.resourcewatch.org/v1/widget?page%5Bnumber%5D=1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"prev"</span><span class="p">:</span><span class="s2">"https://api.resourcewatch.org/v1/widget?page%5Bnumber%5D=1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"next"</span><span class="p">:</span><span class="s2">"https://api.resourcewatch.org/v1/widget?page%5Bnumber%5D=2&amp;page%5Bsize%5D=10"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last"</span><span class="p">:</span><span class="s2">"https://api.resourcewatch.org/v1/widget?page%5Bnumber%5D=64&amp;page%5Bsize%5D=10"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"self"</span><span class="p">:</span><span class="s2">"https://api.resourcewatch.org/v1/widget?page%5Bnumber%5D=1&amp;page%5Bsize%5D=10"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">38</span><span class="p">,</span><span class="w">
      </span><span class="s2">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">372</span><span class="p">,</span><span class="w">
      </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint allows you to list existing widgets and their properties. The result is a paginated list of 10 widgets, followed by metadata on total number of widgets and pages, as well as useful pagination links. By default, only widgets with <code class="prettyprint">env</code> value <code class="prettyprint">production</code> are displayed. In the sections below, we’ll explore how you can customize this endpoint call to match your needs.</p>

<h3 id="getting-all-widgets-for-a-dataset">Getting all widgets for a dataset</h3>

<blockquote>
<p>Return the widgets associated with a dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"73f00267-fe34-42aa-a611-13b102f38d75"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Precipitation Change in Puget Sound"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"06c44f9a-aae7-401e-874c-de13b7764959"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"precipitation-change"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58333dcfd9f39b189ca44c75"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOAA nCLIMDIV Precipitation: Historical Precipitation"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"prep"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"query/06c44f9a-aae7-401e-874c-de13b7764959?sql=select annual as x, year as y from index_06c44f9aaae7401e874cde13b7764959%20order%20by%20year%20asc"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
                </span><span class="s2">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-08-03T16:17:06.863Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-21T16:07:57.631Z"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset/06c44f9a-aae7-401e-874c-de13b7764959/widget?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset/06c44f9a-aae7-401e-874c-de13b7764959/widget?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset/06c44f9a-aae7-401e-874c-de13b7764959/widget?page[number]=2&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"prev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset/06c44f9a-aae7-401e-874c-de13b7764959/widget?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset/06c44f9a-aae7-401e-874c-de13b7764959/widget?page[number]=2&amp;page[size]=10"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
        </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>When handling widgets, it&rsquo;s common to want to limit results to those widgets associated with a given dataset. Besides the <a href="#filters135">filters</a> covered below, there&rsquo;s an additional convenience endpoint to get the widgets associated with a dataset, as shown in this example. </p>

<h3 id="getting-all-widgets-for-multiple-datasets">Getting all widgets for multiple datasets</h3>

<blockquote>
<p>Return all widgets associated with two datasets</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/widget/find-by-ids"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
-d <span class="s1">'{
    "ids": ["&lt;dataset 1 id&gt;", "&lt;dataset 2 id&gt;"]
}'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"73f00267-fe34-42aa-a611-13b102f38d75"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Precipitation Change in Puget Sound"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"06c44f9a-aae7-401e-874c-de13b7764959"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"precipitation-change"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58333dcfd9f39b189ca44c75"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOAA nCLIMDIV Precipitation: Historical Precipitation"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"prep"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"query/06c44f9a-aae7-401e-874c-de13b7764959?sql=select annual as x, year as y from index_06c44f9aaae7401e874cde13b7764959%20order%20by%20year%20asc"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint allows users to load all widgets belonging to multiple datasets in a single request. </p>

<blockquote>
<p>Return all widgets associated with two datasets, that are associated with either <code class="prettyprint">rw</code> or <code class="prettyprint">prep</code> applications </p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/widget/find-by-ids"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
-d <span class="s1">'{
    "ids": ["&lt;dataset 1 id&gt;", "&lt;dataset 2 id&gt;"],
    "app": "rw,prep"
}'</span>
</code></pre>
<blockquote>
<p>Return all widgets associated with two datasets, that are associated with both <code class="prettyprint">rw</code> and <code class="prettyprint">prep</code> applications simultaneously </p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/widget/find-by-ids"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
-d <span class="s1">'{
    "ids": ["&lt;dataset 1 id&gt;", "&lt;dataset 2 id&gt;"],
    "app": "rw@prep"
}'</span>
</code></pre>
<p>Besides the required <code class="prettyprint">ids</code> array, your request body may optionally include a <code class="prettyprint">app</code> string value if you&rsquo;d like to filter the returned widgets by their <code class="prettyprint">application</code>:</p>

<ul>
<li>Use a single value, like <code class="prettyprint">rw</code>, if you want to show only widgets that have <code class="prettyprint">rw</code> as one of their applications. </li>
<li>Use a comma separated list, like <code class="prettyprint">rw,prep</code>, if you want to show only widgets that have <code class="prettyprint">rw</code> or <code class="prettyprint">prep</code> as one of their applications.</li>
<li>Note that the the filters do not need to match on the full application list. For example, the filters <code class="prettyprint">rw,prep</code> and <code class="prettyprint">rw@prep</code> will both match a widget with the application list <code class="prettyprint">[&quot;rw&quot;, &quot;prep&quot;, &quot;gfw&quot;]</code>.</li>
</ul>

<p>Please note that, unlike <a href="#getting-all-widgets">getting all widgets</a> or <a href="#getting-all-widgets-for-a-dataset">getting all widgets for a dataset</a>, this endpoint does not come with paginated results, nor does it support <a href="#pagination134">pagination</a>, <a href="#filters135">filtering</a> or <a href="#sorting136">sorting</a> or <a href="#include-related-entities137">including related entities</a> described in their respective sections.</p>

<h3 id="pagination">Pagination</h3>

<p>By default, widgets are listed in pages of 10 widgets each, and the first page is loaded. However, you can customize this behavior using the following query parameters:  </p>

<blockquote>
<p>Custom pagination: load page 2 using 25 results per page</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/widget?page[number]=2&amp;page[size]=25"</span>
</code></pre>
<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Default</th>
</tr>
</thead><tbody>
<tr>
<td>page[size]</td>
<td style="text-align: center">The number elements per page. Values above 100 are not officially supported.</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">10</td>
</tr>
<tr>
<td>page[number]</td>
<td style="text-align: center">The page number</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">1</td>
</tr>
</tbody></table>

<h3 id="filters">Filters</h3>

<blockquote>
<p>Return the widgets filtered by those whose name contains emissions</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/widget?name=emissions"</span>
</code></pre>
<blockquote>
<p>Return the widgets filtered by dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/widget?dataset=11de2bc1-368b-42ed-a207-aaff8ece752b"</span>
curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/dataset/11de2bc1-368b-42ed-a207-aaff8ece752b/widget"</span>
</code></pre>
<blockquote>
<p>Filter widgets by default value</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/widget?default=false"</span>
</code></pre>
<blockquote>
<p>Filter widgets by environment</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/widget?env=staging"</span>
</code></pre>
<blockquote>
<p>Return the widgets filtered by those whose applications contain both <code class="prettyprint">rw</code> and <code class="prettyprint">prep</code> applications simultaneously</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/widget?app=rw@prep"</span>
</code></pre>
<p>The widget list endpoint provides a wide range of filters that you can use to tailor your widget listing. Filtering widgets adheres to the conventions defined in the <a href="index-rw.html#filtering">Filter guidelines for the RW API</a>, so we strongly recommend reading that section before proceeding. In addition to these conventions, you&rsquo;ll be able to use the great majority of the widget fields you&rsquo;ll find on the <a href="#widget-reference">widget reference</a>, with the following exceptions:</p>

<ul>
<li><code class="prettyprint">id</code></li>
<li><code class="prettyprint">userName</code></li>
<li><code class="prettyprint">userRole</code>: filtering by the role of the owning user can be done using the <code class="prettyprint">user.role</code> query argument.</li>
</ul>

<p>Additionally, you can use the following filters:</p>

<ul>
<li><code class="prettyprint">collection</code>: filters by a <a href="#collections">collection</a> id. Requires being authenticated.</li>
<li><code class="prettyprint">favourite</code>: if any value is defined for this query param, only the widgets set by the user as <a href="#favorites">favorites</a> will be returned. Requires being authenticated.</li>
</ul>

<h3 id="sorting">Sorting</h3>

<blockquote>
<p>Sorting widgets</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/widget?sort=name"</span>
</code></pre>
<blockquote>
<p>Sorting widgets by multiple criteria</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/widget?sort=name,slug"</span>
</code></pre>
<blockquote>
<p>Explicit order of sorting</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/widget?sort=-name,+slug"</span>
</code></pre>
<blockquote>
<p>Sorting widgets by the role of the user who owns the widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/widget?sort=user.role"</span>
</code></pre>
<p>The Widget service currently supports sorting using the <code class="prettyprint">sort</code> query parameter. Sorting widgets adheres to the conventions defined in the <a href="index-rw.html#sorting">Sorting guidelines for the RW API</a>, so we strongly recommend reading that section before proceeding. Additionally, you can check out the <a href="#widget-reference">Widget reference</a> section for a detailed description of the fields you can use when sorting. In addition to all widget model fields, you can sort the returned results by the name (using <code class="prettyprint">user.name</code>) or role (using <code class="prettyprint">user.role</code>) of the user owner of the widget. Keep in mind that sorting by user data is restricted to ADMIN users.</p>

<h3 id="include-entities-associated-with-the-widgets">Include entities associated with the widgets</h3>

<p>When loading widget data, you can optionally pass an <code class="prettyprint">includes</code> query argument to load additional data.</p>

<h4 id="vocabulary">Vocabulary</h4>

<p>Loads related <a href="#vocabulary-and-tags">vocabularies</a>. If none are found, an empty array is returned.</p>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/widget?includes=vocabulary"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example widget"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be76f130-ed4e-4972-827d-aef8e0dc6b18"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-widget"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5820ad9469a0287982f4cd18"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"rw"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{}"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"vocabulary"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"resourcewatch"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                </span><span class="s2">"inuncoast"</span><span class="p">,</span><span class="w">
                                </span><span class="s2">"rp0002"</span><span class="p">,</span><span class="w">
                                </span><span class="s2">"historical"</span><span class="p">,</span><span class="w">
                                </span><span class="s2">"nosub"</span><span class="w">
                            </span><span class="p">],</span><span class="w">
                            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"resourcewatch"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h4 id="user">User</h4>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/widget?includes=user"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example widget"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be76f130-ed4e-4972-827d-aef8e0dc6b18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-widget"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5820ad9469a0287982f4cd18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{}"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Sample"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.sample@vizzuality.com"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Loads the name and email address of the author of the widget. If the user issuing the request has role <code class="prettyprint">ADMIN</code>, the response will also display the role of the widget&rsquo;s author. If the data is not available (for example, the user has since been deleted), no <code class="prettyprint">user</code> property will be added to the widget object.</p>

<h4 id="metadata">Metadata</h4>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/widget?includes=metadata"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example widget"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be76f130-ed4e-4972-827d-aef8e0dc6b18"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-widget"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5820ad9469a0287982f4cd18"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"rw"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{}"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5aeb1c74a096b50010f3843f"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"86777822-d995-49cd-b9c3-d4ea4f82c0a3"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
                                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="w">
                            </span><span class="p">},</span><span class="w">
                            </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                </span><span class="s2">"caption"</span><span class="p">:</span><span class="w"> </span><span class="s2">"t"</span><span class="p">,</span><span class="w">
                                </span><span class="s2">"widgetLinks"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                            </span><span class="p">},</span><span class="w">
                            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-05-03T14:28:04.482Z"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-06-07T11:30:40.054Z"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"published"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Loads the metadata available for the widget. If none are found, an empty array is returned.</p>

<h4 id="requesting-multiple-additional-entities">Requesting multiple additional entities</h4>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/widget?includes=metadata,user,vocabulary"</span>
</code></pre>
<p>You can request multiple related entities in a single request using commas to separate multiple keywords</p>

<h2 id="getting-a-widget-by-id">Getting a widget by id</h2>

<blockquote>
<p>Getting a widget by id:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/widget/&lt;widget_id&gt;"</span>
curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget_id&gt;"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example widget"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be76f130-ed4e-4972-827d-aef8e0dc6b18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-widget"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5820ad9469a0287982f4cd18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{}"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>If you know the <code class="prettyprint">id</code> of a widget, then you can access it directly. Ids are case-sensitive.</p>

<h3 id="overwrite-the-query-url-of-a-widget-response">Overwrite the query url of a widget response</h3>

<blockquote>
<p>Getting a widget by id with a custom query url value:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/widget/&lt;widget_id&gt;?queryUrl=/v1/query?sql=Select%20*%20from%20data"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example widget"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be76f130-ed4e-4972-827d-aef8e0dc6b18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-widget"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5820ad9469a0287982f4cd18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/query?sql=Select * from data"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/query?sql=Select * from data"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>When getting a single widget, you can optionally provide a <code class="prettyprint">queryUrl</code> query parameter. If provided, this parameter will overwrite the following response values:</p>

<ul>
<li><code class="prettyprint">data.attributes.queryUrl</code></li>
<li><code class="prettyprint">data.attributes.widgetConfig.data.url</code></li>
<li><code class="prettyprint">data.attributes.widgetConfig.data[0].url</code></li>
</ul>

<p>This overwrite will only happen if a previous value already existed for the respective field. Also, keep in mind that these changes will NOT be persisted to the database, and will only affect the current request&rsquo;s response. </p>

<h3 id="customize-the-query-url-of-a-widget-response">Customize the query url of a widget response</h3>

<blockquote>
<p>Getting a widget by id with a custom query url parameters:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/widget/&lt;widget_id&gt;?geostore=ungeostore"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example widget"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be76f130-ed4e-4972-827d-aef8e0dc6b18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-widget"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5820ad9469a0287982f4cd18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;previous queryUrl value&gt;?geostore=ungeostore"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;previous widgetConfig.data.url value&gt;?geostore=ungeostore"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Getting a widget by id with a custom query url value parameters:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/widget/&lt;widget_id&gt;?queryUrl=/v1/query?sql=Select%20*%20from%20data&amp;geostore=ungeostore"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example widget"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be76f130-ed4e-4972-827d-aef8e0dc6b18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-widget"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5820ad9469a0287982f4cd18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/query?sql=Select * from data&amp;geostore=ungeostore"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/query?sql=Select * from data&amp;geostore=ungeostore"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>When getting a single widget, you can optionally provide additional custom query parameter. These parameters will be appended to the following response values:</p>

<ul>
<li><code class="prettyprint">data.attributes.queryUrl</code></li>
<li><code class="prettyprint">data.attributes.widgetConfig.data.url</code></li>
<li><code class="prettyprint">data.attributes.widgetConfig.data[0].url</code></li>
</ul>

<p>The widget service assumes these values are URLs, and will append your custom query parameters as such:</p>

<ul>
<li>If the value already has a <code class="prettyprint">?</code> character present, your custom query parameters will be appended with <code class="prettyprint">&amp;</code> preceding them. </li>
<li>If no <code class="prettyprint">?</code> is present, the first custom query parameter will be appended with a <code class="prettyprint">?</code>, and the following with a <code class="prettyprint">&amp;</code> before them.</li>
</ul>

<p>This overwrite will only happen if a previous value already existed for the respective field. Also, keep in mind that these changes will NOT be persisted to the database, and will only affect the current request&rsquo;s response. You can combine these custom query parameters with an <a href="#overwrite-the-query-url-of-a-widget-response">overwritten query url</a>, as seen on the included example.</p>

<h3 id="include-entities-associated-with-the-widget">Include entities associated with the widget</h3>

<p>You can load related <code class="prettyprint">user</code>, <code class="prettyprint">vocabulary</code> and <code class="prettyprint">metadata</code> data in the same request. See <a href="#include-entities-associated-with-the-widgets">this section</a> for more details.</p>

<h2 id="creating-a-widget">Creating a widget</h2>

<blockquote>
<p>To create a widget, you need to provide at least the following details:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "application":[
      "gfw"
    ],
    "name":"Example Widget"
  }'</span>


curl -X POST <span class="s2">"https://api.resourcewatch.org/v1/widget"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "application":[
      "gfw"
    ],
    "name":"Example Widget",
    "dataset": "7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"    
  }'</span>
</code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7946bca1-6c2a-4329-a127-558ef9551eba"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example Widget"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example-Widget_2"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadb0adf2dc74d2ad05dfb"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"gfw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-11T14:13:19.677Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-11T14:13:19.677Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>In this section we&rsquo;ll guide you through the process of creating a widget in the RW API. Widget creation is available to all registered API users, and will allow you to store your own widget visualisation settings on the API, for reusing and sharing.</p>

<p>Before creating a widget, there are a few things you must know and do:</p>

<ul>
<li>In order to be able to create a widget, you need to be <a href="#authentication">authenticated</a>.</li>
<li>Depending on your user account&rsquo;s role, you may have permission to create a widget but not delete it afterwards - read more about this in <a href="index-rw.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
<li>The widgets you create on the RW API will be publicly visible and available to other users.</li>
</ul>

<p>Creating a widget is done using a POST request and passing the relevant data as body files. The supported body fields are as defined on the <a href="#widget-reference">widget reference</a> section, but the minimum field list you must specify for all widgets is:</p>

<ul>
<li>name</li>
<li>application</li>
<li>dataset - which can be specified either through the URL or the POST body.</li>
</ul>

<p>The widget service was built to be very flexible, and not be restricted to specific widget rendering libraries or tools. While we recommend using <a href="#widget-configuration-using-vega-grammar">Vega</a>, it&rsquo;s up to you to decide which library to use, and how to save your custom data within a widget&rsquo;s <code class="prettyprint">widgetConfig</code> field. While there is no hard limit on this, widgets that rely on excessively large <code class="prettyprint">widgetConfig</code> objects have been known to cause issues, so we recommend being mindful of this.</p>

<h4 id="widget-thumbnails">Widget thumbnails</h4>

<blockquote>
<p>Preview of the thumbnail of a widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://resourcewatch.org/embed/widget/&lt;widget_id&gt;"</span>
</code></pre>
<p>When a widget is created or updated, the RW API will automatically try to generate a thumbnail preview of it. This is done using the renderer that&rsquo;s part of the <a href="https://resourcewatch.org">Resource Watch</a> website, and will only produce a thumbnail if your widget uses the same approach as the RW website for declaring its widgets. Searching for widgets belonging to the <code class="prettyprint">rw</code> application will give you an idea of how this is achieved.</p>

<p>The thumbnail process is asynchronous, meaning it may take up to one minute for your newly created or updated widget to have a valid and/or up to date <code class="prettyprint">thumbnailUrl</code> value. If the thumbnail generation process fails (for example, if you decide to use a different rendering tool and data structure), the thumbnail generation will fail silently, but will not affect the actual widget creation or update process.</p>

<h4 id="errors-for-creating-a-widget">Errors for creating a widget</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><code class="prettyprint">&lt;field&gt;</code>: <code class="prettyprint">&lt;field&gt;</code> can not be empty</td>
<td>Your are missing a required field value.</td>
</tr>
<tr>
<td>400</td>
<td>- <code class="prettyprint">&lt;field&gt;</code>: must be a <code class="prettyprint">&lt;restriction&gt;</code></td>
<td>The value provided for the mentioned field does not match the requirements.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You are not authenticated.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to create a widget with one or more <code class="prettyprint">application</code> values that are not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Dataset not found</td>
<td>The provided dataset id does not exist.</td>
</tr>
</tbody></table>

<h2 id="updating-a-widget">Updating a widget</h2>

<blockquote>
<p>To update a widget, you have to do one of the following PATCH requests:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget_id_or_slug&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "name":"New Example Widget Name"
 }'</span>


curl -X PATCH <span class="s2">"https://api.resourcewatch.org/v1/widget/&lt;widget_id_or_slug&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "name":"New Example Widget Name",
    "dataset":"&lt;dataset-id&gt;
 }'</span>
</code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7946bca1-6c2a-4329-a127-558ef9551eba"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New Example Widget Name"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example-Widget_2"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadb0adf2dc74d2ad05dfb"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"gfw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-11T14:13:19.677Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-11T14:13:19.677Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The update widget endpoint allows you to modify the details of an existing widget. As noted on the <a href="#widget">widget concept</a> documentation, the widget object stores the details of how widget is meant to be rendered, but may not contain the actual data. As such, if you are looking to update the data that&rsquo;s being displayed on your widget, this is probably not the endpoint you&rsquo;re looking for - you may want to <a href="#updating-a-dataset">update your dataset</a> instead. Use this endpoint if you want to modify things like legend details, color schemes, etc - this will depend on your rendering implementation. </p>

<p>Unless specified otherwise in their description, all the fields present in the <a href="#widget-reference">widget reference</a> section can be updated using this endpoint. When passing new values for Object type fields, like <code class="prettyprint">widgetConfig</code>, the new value will fully overwrite the previous one. It’s up to you, as an API user, to build any merging logic into your application.</p>

<p>To perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must be logged in and belong to the same application as the widget</li>
<li>the user must match one of the following:

<ul>
<li>have role <code class="prettyprint">ADMIN</code></li>
<li>have role <code class="prettyprint">MANAGER</code> or <code class="prettyprint">USER</code> and be the widget&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the widget) and belong to all the applications associated with the widget.</li>
</ul></li>
</ul>

<h4 id="widget-thumbnails">Widget thumbnails</h4>

<p>When a widget is updated, a new thumbnail is generated. Refer to <a href="#widget-thumbnails">this section</a> for details on this process. </p>

<h4 id="errors-for-updating-a-widget">Errors for updating a widget</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>- <code class="prettyprint">&lt;field&gt;</code>: must be a <code class="prettyprint">&lt;restriction&gt;</code></td>
<td>The value provided for the mentioned field does not match the requirements.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to update a widget.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code class="prettyprint">ADMIN</code> role, or have role <code class="prettyprint">MANAGER</code> or <code class="prettyprint">USER</code> and be the widget&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the widget) and belong to all the applications associated with the widget.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to update a widget with one or more <code class="prettyprint">application</code> values that are not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Widget with id <id> doesn&rsquo;t exist</td>
<td>A widget with the provided id does not exist.</td>
</tr>
<tr>
<td>404</td>
<td>Dataset not found</td>
<td>A dataset with the provided id does not exist.</td>
</tr>
</tbody></table>

<h2 id="cloning-a-widget">Cloning a widget</h2>

<blockquote>
<p>To clone a widget, you should use one of the following POST requests:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/v1/widget/&lt;widget_id_or_slug&gt;/clone"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>
</code></pre><pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget_id_or_slug&gt;/clone"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>
</code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7946bca1-6c2a-4329-a127-558ef9551eba"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example Widget"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example-Widget_2"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadb0adf2dc74d2ad05dfb"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"gfw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-11T14:13:19.677Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-11T14:13:19.677Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint allows you to duplicate an existing widget. The newly created widget is identical to the old one, except:</p>

<ul>
<li>The <code class="prettyprint">userId</code> will be the id of the user who issued the clone request</li>
<li><code class="prettyprint">name</code> and <code class="prettyprint">description</code> will be the same but can optionally be modified by the clone request (see the provided example)</li>
<li><code class="prettyprint">createdAt</code> and <code class="prettyprint">updatedAt</code> will have the current time.</li>
</ul>

<p>To perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must be logged in and belong to the same application as the widget</li>
<li>the user must match one of the following:

<ul>
<li>have role <code class="prettyprint">ADMIN</code> or <code class="prettyprint">MANAGER</code></li>
<li>have role <code class="prettyprint">USER</code> and be the widget&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the widget) and belong to all the applications associated with the widget.</li>
</ul></li>
</ul>

<blockquote>
<p>Cloning a widget while optionally setting a new name or description:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/v1/widget/&lt;widget_id_or_slug&gt;/clone"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "name": "name for the cloned widget",
   "description": "description of the cloned widget"
}'</span>
</code></pre><pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget_id_or_slug&gt;/clone"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "name": "name for the cloned widget",
   "description": "description of the cloned widget"
}'</span>
</code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7946bca1-6c2a-4329-a127-558ef9551eba"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name for the cloned widget"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"description of the cloned widget"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example-Widget_2"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadb0adf2dc74d2ad05dfb"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"gfw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-11T14:13:19.677Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-11T14:13:19.677Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h4 id="widget-thumbnails">Widget thumbnails</h4>

<p>When a widget is cloned, a new thumbnail is generated. Refer to <a href="#widget-thumbnails">this section</a> for details on this process.</p>

<h4 id="errors-for-cloning-a-widget">Errors for cloning a widget</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to clone a widget.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code class="prettyprint">ADMIN</code> or <code class="prettyprint">MANAGER</code> role, or have role <code class="prettyprint">USER</code> and be the widget&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the widget) and belong to all the applications associated with the widget.</td>
</tr>
<tr>
<td>404</td>
<td>Widget with id <id> doesn&rsquo;t exist</td>
<td>A widget with the provided id or slug does not exist.</td>
</tr>
</tbody></table>

<h2 id="deleting-a-widget">Deleting a widget</h2>

<blockquote>
<p>Example DELETE request that deletes a widget:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE <span class="s2">"https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget_id&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>


curl -X DELETE <span class="s2">"https://api.resourcewatch.org/v1/widget/&lt;widget_id&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>
</code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7946bca1-6c2a-4329-a127-558ef9551eba"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name for the cloned widget"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"description of the cloned widget"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fa6ec77-5ab0-43f4-9a4c-a3d19bed1e90"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example-Widget_2"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadb0adf2dc74d2ad05dfb"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"gfw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-11T14:13:19.677Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-11T14:13:19.677Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Use this endpoint if you&rsquo;d like to delete a widget from the RW API. As a widget object may not store the actual data being displayed, this may only delete the widget settings, but the actual data may continue to be available at its source.</p>

<p>Besides deleting the widget itself, this endpoint also deletes graph vocabularies and metadata related to the widget itself. These delete operations are issued after the widget itself is deleted. The process is not atomic, and the response is based solely on the result of the deletion of the widget itself, not related resources. For example, is the metadata service is temporarily unavailable when you issue your delete widget request, the widget itself will be deleted, but the associated metadata will continue to exist. The response will not reflect the failure to delete metadata in any way.</p>

<p>In order to delete a widget, the following conditions must be met:</p>

<ul>
<li>the widget&rsquo;s <code class="prettyprint">protected</code> property must be set to <code class="prettyprint">false</code>.</li>
<li>the user must be logged in and belong to the same application as the widget.</li>
<li>the user must comply with <a href="index-rw.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
</ul>

<h2 id="widget-reference">Widget reference</h2>

<p>This section gives you a complete view at the properties that are maintained as part of widget. When interacting with a widget (on get, on create, etc) you will find most of these properties available to you, although they may be organized in a slightly different structure (ie: on get, everything but the <code class="prettyprint">id</code> is nested inside an <code class="prettyprint">attributes</code> object).</p>

<p>You can find more details in the <a href="https://github.com/resource-watch/widget/blob/master/app/src/models/widget.model.js">source code</a>.</p>

<table><thead>
<tr>
<th>Field name</th>
<th>Type</th>
<th>Required</th>
<th>Default value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Yes (autogenerated)</td>
<td></td>
<td>Unique Id of the widget. Auto generated on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>dataset</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Id of the dataset to which the widget corresponds. Set on widget creation, cannot be modified.</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Name of the widget.</td>
</tr>
<tr>
<td>slug</td>
<td>String</td>
<td>Yes (autogenerated)</td>
<td></td>
<td>Slug of the widget. Auto generated on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>userId</td>
<td>String</td>
<td>Yes (autopopulated)</td>
<td></td>
<td>Id of the user who created the widget. Set automatically on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>No</td>
<td></td>
<td>User defined description of the widget.</td>
</tr>
<tr>
<td>source</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Description of the source of the widget&rsquo;s data, as it&rsquo;s meant to be displayed to the end user.</td>
</tr>
<tr>
<td>sourceUrl</td>
<td>String</td>
<td>No</td>
<td></td>
<td>URL of the source of the data, as it&rsquo;s meant to be displayed to the end user.</td>
</tr>
<tr>
<td>authors</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Author or authors of the data displayed on the widget, as it&rsquo;s meant to be displayed to the end user.</td>
</tr>
<tr>
<td>queryUrl</td>
<td>String</td>
<td>No</td>
<td></td>
<td>URL of the RW API query or external URL containing the data displayed on the widget</td>
</tr>
<tr>
<td>thumbnailUrl</td>
<td>String</td>
<td>No</td>
<td></td>
<td>URL of a example thumbnail of the rendered widget.</td>
</tr>
<tr>
<td>env</td>
<td>String</td>
<td>Yes</td>
<td>production</td>
<td>Environment to which the widget belongs. Read more about this field in the <a href="index-rw.html#environments">Environments concept section</a>.</td>
</tr>
<tr>
<td>widgetConfig</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Schema-less object meant to host widget behavior configuration.</td>
</tr>
<tr>
<td>application</td>
<td>Array</td>
<td>Yes</td>
<td></td>
<td>Applications associated with this widget. Read more about this field <a href="index-rw.html#applications">here</a>.</td>
</tr>
<tr>
<td>layerId</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Id of the layer to which the widget corresponds.</td>
</tr>
<tr>
<td>verified</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>default</td>
<td>Boolean</td>
<td>No</td>
<td>false</td>
<td>If the widget should be used as the dataset&rsquo;s default widget.</td>
</tr>
<tr>
<td>protected</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td>If the widget is protected. A protected widget cannot be deleted.</td>
</tr>
<tr>
<td>defaultEditableWidget</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td>Used by the RW frontend to determine if a widget is the default widget displayed on the Explore detail page for a given dataset.</td>
</tr>
<tr>
<td>template</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td>If true, this widget is not necessarily meant to be rendered as-is, but rather as a template for other widgets to be generated from.</td>
</tr>
<tr>
<td>published</td>
<td>Boolean</td>
<td>Yes</td>
<td>true</td>
<td>If the widget is published or not.</td>
</tr>
<tr>
<td>freeze</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td>If true, the widget is meant to represent data from a specific snapshot taken at a given moment in time, as opposed to using a potentially mutable dataset. This data capturing functionality must be implemented by consuming applications, as this value has no logic associated with it on the API side.</td>
</tr>
<tr>
<td>userName</td>
<td>String</td>
<td>No (autogenerated)</td>
<td>null</td>
<td>Name of the user who created the widget. This value is used only internally, and is never directly exposed through the API. Cannot be modified by users.</td>
</tr>
<tr>
<td>userRole</td>
<td>String</td>
<td>No (autogenerated)</td>
<td>null</td>
<td>Role of the user who created the widget. This value is used only internally, and is never directly exposed through the API. Cannot be modified by users.</td>
</tr>
<tr>
<td>createdAt</td>
<td>Date</td>
<td>No (autogenerated)</td>
<td><current date></td>
<td>Automatically maintained date of when the widget was created. Cannot be modified by users.</td>
</tr>
<tr>
<td>updatedAt</td>
<td>Date</td>
<td>No (autogenerated)</td>
<td><current date></td>
<td>Automatically maintained date of when the widget was last updated. Cannot be modified by users.</td>
</tr>
</tbody></table>

          <h1 id="collections">Collections</h1>

<h2 id="what-is-a-collection">What is a collection?</h2>

<p>A collection is a way of aggregating WRI API resources like datasets, layers and widgets. A collection can reference one or more resources of different types.</p>

<p>Collection endpoints require authentication, and the collections are associated with the owner who initially created the collection.</p>

<h2 id="creating-a-collection">Creating a collection</h2>

<blockquote>
<p>To create an empty collection, you can do a POST with the following body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/collection <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "name": "Collection name"
  }'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f56170c1fca55001ad51779"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Collection name"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ownerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dd7b92abf56ca0011875ae2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>You can also add a resource in the body of the request when creating a new collection, with the following body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/collection <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "name": "Collection name",
    "resources": [
      {
        "type": "dataset",
        "id": "06c44f9a-aae7-401e-874c-de13b7764959"
      }
    ]
  }'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f56170c1fca55001ad51779"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Collection name"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ownerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dd7b92abf56ca0011875ae2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"06c44f9a-aae7-401e-874c-de13b7764959"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>To create a collection, you should send a POST request to the <code class="prettyprint">/v1/collection</code> endpoint, providing an authentication token that identifies the user making the request. You also need to (or can) provide the following fields in the request body:</p>

<table><thead>
<tr>
<th>Field name</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Required</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td style="text-align: center">Name of collection.</td>
<td style="text-align: right">Yes</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">The application this collection belongs to (defaults to <code class="prettyprint">&#39;rw&#39;</code>). Read more about this field <a href="index-rw.html#applications">here</a>.</td>
<td style="text-align: right">No</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td>resources</td>
<td style="text-align: center">Array of resources in the collection.</td>
<td style="text-align: right">No</td>
<td style="text-align: right">Array of Objects</td>
</tr>
</tbody></table>

<h2 id="updating-a-collection">Updating a collection</h2>

<blockquote>
<p>To update a collection, you should perform a PATCH request including the collection ID in the url. Here&rsquo;s an example:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/collection/:id <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "name": "New name"
  }'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f56170c1fca55001ad51779"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New name"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ownerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dd7b92abf56ca0011875ae2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>You can update the name of a collection, you can send a PATCH request to the <code class="prettyprint">/v1/collection/:id</code> endpoint, providing an authentication token that identifies the user making the request.</p>

<p><strong>Keep in mind that you will only be able to update collections that are owned by your user.</strong></p>

<h2 id="adding-a-resource-to-an-existing-collection">Adding a resource to an existing collection</h2>

<blockquote>
<p>To add a resource to a collection, you have to do a POST with the following body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/collection/:id/resource <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "type": "dataset",
    "id": "06c44f9a-aae7-401e-874c-de13b7764959"
  }'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f56170c1fca55001ad51779"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New name"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ownerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dd7b92abf56ca0011875ae2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"06c44f9a-aae7-401e-874c-de13b7764959"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>You can do a POST request to the <code class="prettyprint">/v1/collection/:id/resource</code> to push a new resource to an existing collection. You also need to define the following fields in the request body:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td style="text-align: center">Type of resource being added</td>
<td style="text-align: right">Text (dataset, layer, widget)</td>
</tr>
<tr>
<td>id</td>
<td style="text-align: center">Id of the resource</td>
<td style="text-align: right">Text</td>
</tr>
</tbody></table>

<h2 id="getting-collections-for-the-request-user">Getting collections for the request user</h2>

<blockquote>
<p>To get all collections of the logged user, you have to do a GET request:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/collection <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f56170c1fca55001ad51779"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Collection name"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ownerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dd7b92abf56ca0011875ae2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456789"</span><span class="w">            
        </span><span class="p">}]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>By making a GET request to the <code class="prettyprint">/v1/collection</code> endpoint, you can obtain the collections of the logged user.</p>

<blockquote>
<p>To get all collections of the logged user, including the associated resources:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/collection <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f56170c1fca55001ad51779"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Collection name"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ownerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dd7b92abf56ca0011875ae2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456789"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="err">...</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>You can optionally add the <code class="prettyprint">include=true</code> query parameter to load the associated resources.</p>

<h3 id="pagination">Pagination</h3>

<p>The RW API lists many of its resources as pages, as opposed to showing all results at once. By default, virtually all collections are listed at once, but this behavior should be considered deprecated, and your application should rely on reasonably sized pages instead - the default value may be changed soon. You can customize the pagination behavior using the following query parameters:  </p>

<blockquote>
<p>Custom pagination: load page 2 using 25 results per page</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/collection?page[number]<span class="o">=</span>2&amp;page[size]<span class="o">=</span>25 <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Default</th>
</tr>
</thead><tbody>
<tr>
<td>page[size]</td>
<td style="text-align: center">The number elements per page.</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">9999999</td>
</tr>
<tr>
<td>page[number]</td>
<td style="text-align: center">The page number</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">1</td>
</tr>
</tbody></table>

<h3 id="sorting">Sorting</h3>

<blockquote>
<p>Sorting collections</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/collection?sort=name"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Sorting collections by multiple criteria</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/collection?sort=name,application"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Explicit order of sorting</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/collection?sort=-name,+application"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<p>The Collections service currently supports sorting using the <code class="prettyprint">sort</code> query parameter. Sorting collections adheres to the conventions defined in the <a href="index-rw.html#sorting">Sorting guidelines for the RW API</a>, so we strongly recommend reading that section before proceeding. Additionally, you can check out the <a href="index-rw.html#collection-reference">Collection reference</a> section for a detailed description of the fields you can use when sorting.</p>

<h2 id="get-a-collection-by-id">Get a collection by id</h2>

<blockquote>
<p>To get the collection by id, you have to do a GET request:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/collection/:id <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f56170c1fca55001ad51779"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Collection name"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ownerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dd7b92abf56ca0011875ae2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint returns the collection with id of the param. If the collection belongs to other user or does not exist, the endpoint returns 400.</p>

<h2 id="delete-a-collection">Delete a collection</h2>

<blockquote>
<p>To delete the collection by id, you have to do a DELETE request:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/collection/:id <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>In case of success, the deleted collection is returned in the response body:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f56170c1fca55001ad51779"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Collection name"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ownerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dd7b92abf56ca0011875ae2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint deletes the collection with id of the param. If the collection belongs to other user or does not exist, the endpoint returns 400.</p>

<h2 id="delete-a-collection-resource">Delete a collection resource</h2>

<blockquote>
<p>To delete the resource you have to do a DELETE request:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/collection/:id/resource/:resourceType/:resourceId <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>In case of success, the updated collection is returned in the response body:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f56170c1fca55001ad51779"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Collection name"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ownerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dd7b92abf56ca0011875ae2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Using this endpoint you can also delete a resource in a collection with the id, resource type and resource id of the param. If the collection belongs to other user or not exist, the endpoint returns 400.</p>

<h2 id="finding-collections-by-ids">Finding collections by ids</h2>

<blockquote>
<p>To find collections by ids, you have to do a POST request:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/collection/find-by-ids <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "ids": ["5f56170c1fca55001ad51779"],
    "userId": "5dd7b92abf56ca0011875ae2"
  }'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f56170c1fca55001ad51779"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Collection name"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ownerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dd7b92abf56ca0011875ae2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>You can also filter the returned results by application:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/collection/find-by-ids?application<span class="o">=</span>gfw <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "ids": ["5f56170c1fca55001ad51779"],
    "userId": "5dd7b92abf56ca0011875ae2"
  }'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>You can find collections providing an array of ids by making a POST request to the <code class="prettyprint">/v1/collection/find-by-ids</code> endpoint. You must provide in the body of the request the <code class="prettyprint">ids</code> of the collections you wish to fetch, as well as the id of the user (<code class="prettyprint">userId</code>) who owns these collections.</p>

<p>You can filter the returned results by application by providing the <code class="prettyprint">application</code> query parameter.</p>

<p><strong>Finding collections by id does not require authentication.</strong></p>

<h2 id="collection-reference">Collection reference</h2>

<table><thead>
<tr>
<th>Field name</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td style="text-align: center">Name of collection.</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td>ownerId</td>
<td style="text-align: center">Id of the user owner of this collection.</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">The application this collection belongs to (defaults to <code class="prettyprint">&#39;rw&#39;</code>). Read more about this field <a href="index-rw.html#applications">here</a>.</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td>resources</td>
<td style="text-align: center">Array of resources in the collection.</td>
<td style="text-align: right">Array of Objects</td>
</tr>
<tr>
<td>&mdash; type</td>
<td style="text-align: center">The type of resource.</td>
<td style="text-align: right">String (dataset, layer, widget)</td>
</tr>
<tr>
<td>&mdash; id</td>
<td style="text-align: center">The id of the resource.</td>
<td style="text-align: right">String</td>
</tr>
</tbody></table>

          <h1 id="jiminy">Jiminy</h1>

<blockquote>
<p>Example jiminy GET request providing the SQL as query param:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s1">'https://api.resourcewatch.org/v1/jiminy?sql=SELECT col_1, col_2 FROM &lt;dataset.id&gt; limit &lt;number&gt;'</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>
</code></pre>
<blockquote>
<p>Example jiminy POST request providing the SQL in the request body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s1">'https://api.resourcewatch.org/v1/jiminy'</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
   "sql": "SELECT col_1, col_2 FROM &lt;dataset.id&gt; limit &lt;number&gt;"
  }'</span>
</code></pre>
<blockquote>
<p>Example with real data:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s1">'https://api.resourcewatch.org/v1/jiminy?sql=SELECT iso, name_0, name_1, type_1 FROM 098b33df-6871-4e53-a5ff-b56a7d989f9a limit 10'</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>
</code></pre>
<p>The <code class="prettyprint">jiminy</code> endpoint of the RW API makes use of the <a href="https://github.com/vizzuality/jiminy">Jiminy</a> library in order to infer which type of charts can be obtained from a the execution of a SQL query on a given dataset. For a better understanding of this endpoint, it is recommended to read beforehand on how to <a href="index-rw.html#querying-datasets">query datasets</a>.</p>

<p>To use this endpoint and infer the charts that you can build from a result set, you must provide a valid SQL query. This query should contain the name of the columns for which you want to infer the chart types - the usage of the wildcard selector (<code class="prettyprint">SELECT *</code>) in the SQL query is not supported by this endpoint.</p>

<p><strong>Note: You must set a limit value to the SQL query provided. If you do not set it and the dataset contains a lot of data, this endpoint will try to obtain all data at once, which can result in performance issues.</strong></p>

<p>Likewise with <code class="prettyprint">query</code> and <code class="prettyprint">download</code> endpoints, you can either provide the SQL as query param in a GET request, or in the body of the request as a POST request - read more <a href="index-rw.html#alternative-ways-for-querying-datasets">here</a>. Using the GET request is the recommended approach, as it allows HTTP caching of your result - subsequent requests for the same <code class="prettyprint">jiminy</code> endpoint call will see a great performance increase, even if they are made by a different application or client. Alternatively, you can also call the <code class="prettyprint">jiminy</code> endpoint using a POST request. POST requests are not cached, so you will not benefit from these speed improvements. However, GET requests can sometimes hit URL length restrictions, should your SQL query string be too long. Using a POST request is the recommended solution for these cases.</p>

<h2 id="jiminy-response-body">Jiminy response body</h2>

<blockquote>
<p>Example of successful response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"general"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"bar"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"pie"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"scatter"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"byColumns"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"bar"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"pie"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"name_0"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"bar"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"pie"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"name_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"bar"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"pie"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"type_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"bar"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"pie"</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"byType"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"bar"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"general"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"iso"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"name_0"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"name_1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"type_1"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="s2">"columns"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="s2">"name_0"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="s2">"name_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="s2">"type_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"line"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"general"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="s2">"columns"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="s2">"name_0"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="s2">"name_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="s2">"type_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"pie"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"general"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"iso"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"name_0"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"name_1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"type_1"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="s2">"columns"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="s2">"name_0"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="s2">"name_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="s2">"type_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"scatter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"general"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"iso"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"name_0"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"name_1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"type_1"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="s2">"columns"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="s2">"name_0"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"name_1"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type_1"</span><span class="w">
                    </span><span class="p">],</span><span class="w">
                    </span><span class="s2">"name_0"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="s2">"iso"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"name_1"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type_1"</span><span class="w">
                    </span><span class="p">],</span><span class="w">
                    </span><span class="s2">"name_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="s2">"iso"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"name_0"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type_1"</span><span class="w">
                    </span><span class="p">],</span><span class="w">
                    </span><span class="s2">"type_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="s2">"iso"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"name_0"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"name_1"</span><span class="w">
                    </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"1d_scatter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"general"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="s2">"columns"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="s2">"name_0"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="s2">"name_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="s2">"type_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"1d_tick"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"general"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="s2">"columns"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="s2">"name_0"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="s2">"name_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="s2">"type_1"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>For a successful response, the response body is a JSON object containing a single index <code class="prettyprint">data</code>, which describes the type of charts that can be obtained from the query provided. The following fields are usually present in the <code class="prettyprint">data</code> object:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>data.general</td>
<td>Array</td>
<td>An array of distinct charts that can be used to represent the data of the query.</td>
<td><code class="prettyprint">[&quot;bar&quot;, &quot;pie&quot;]</code></td>
</tr>
<tr>
<td>data.byColumns</td>
<td>Object</td>
<td>An object where the keys are the columns provided in the SQL query. For each the, its value is an array with the names of the charts that might be used to represent the data from the column in the key.</td>
<td><code class="prettyprint">{ &quot;iso&quot;: [&quot;bar&quot;, &quot;pie&quot;], &quot;name_0&quot;: [&quot;bar&quot;, &quot;pie&quot;] },</code></td>
</tr>
<tr>
<td>data.byType</td>
<td>Object</td>
<td>An object where the keys are all the charts supported by Jiminy. The values will contain the column names of the query execution that might be used to display the chart type in the key. If the chart type was not included in the <code class="prettyprint">data.general</code> field of the response body, its content will likely be empty.</td>
<td><code class="prettyprint">{ &quot;bar&quot;: { &quot;general&quot;: [&quot;iso&quot;, &quot;name_0&quot;, &quot;name_1&quot;, &quot;type_1&quot;], &quot;columns&quot;: { &quot;iso&quot;: [], &quot;name_0&quot;: [], &quot;name_1&quot;: [], &quot;type_1&quot;: [] } } }</code></td>
</tr>
</tbody></table>

<h2 id="jiminy-execution-errors">Jiminy execution errors</h2>

<p>The <code class="prettyprint">jiminy</code> endpoint might sometimes return an error response. The following table describes the possible errors that can occur when calling this endpoint:</p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>SQL o FS required</td>
<td>The required <code class="prettyprint">sql</code> field is missing either as query string parameter or in the request body.</td>
</tr>
<tr>
<td>500</td>
<td>Internal server error</td>
<td>The error message might vary in this case.</td>
</tr>
</tbody></table>

<h2 id="jiminy-endpoint-parameters">Jiminy endpoint parameters</h2>

<p>The <code class="prettyprint">jiminy</code> endpoint makes use of a single query parameter, which is required for a successful call of the endpoint:</p>

<table><thead>
<tr>
<th>Query parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sql</td>
<td>The SQL query which will be the basis for inferring the chart types.</td>
<td>String</td>
<td>Yes</td>
</tr>
</tbody></table>

          <h1 id="fields">Fields</h1>

<h2 id="what-are-fields">What are fields?</h2>

<p>Fields can be defined as the dataset properties. These fields are automatically generated when a dataset is created.</p>

<h2 id="how-to-get-the-dataset-fields">How to get the dataset fields</h2>

<p>Once the dataset is properly created and saved, it is possible to access to its fields as well as getting some information about them.</p>

<p>To do that, it is necessary to use of the following endpoint:</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/fields/&lt;dataset-id&gt;
</code></pre>
<blockquote>
<p>Real example</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/fields/1170030b-9725-4bfe-8fb4-1b0eb81020d2
</code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"public.cait_2_0_country_ghg_emissions_toplow2011"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"cartodb_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"the_geom"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geometry"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"the_geom_webmercator"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geometry"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"x"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"y"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"z"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="rasdaman">Rasdaman</h3>

<p>The structure of datacubes needs a more verbose field specification. The fields endpoint for rasdaman-backed datasets includes information on the spatial reference system, nodata values, axes, units, and bands. It looks like so:</p>

<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell"><code>curl -i  -XGET <span class="s1">'http://api.resourcewatch.org/v1/fields/491ae6fe-6767-44d1-b5c3-c7b8b384bb7a'</span>
</code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"coverageId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nightlights"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"srs"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"srsDimension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"srs"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crs/EPSG/0/4326"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"axisLabels"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Lat Long"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"uomLabels"</span><span class="p">:</span><span class="w"> </span><span class="s2">"degree degree"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"undefined"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"swe:nilValues"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"swe:NilValues"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"swe:nilValue"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
              </span><span class="s2">"$t"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
              </span><span class="s2">"$t"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"swe:uom"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10^0"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"coverageBounds"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"upperCorner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"89.999999999966665 180.000000000189335"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lowerCorner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-89.999999999961335 -179.999999999666665"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
          <h1 id="forms">Forms</h1>

<p>This section details the endpoints provided by the GFW Forms API service.</p>

<h2 id="requesting-a-webinar">Requesting a webinar</h2>

<blockquote>
<p>To create a new webinar request, you need to provide at least the following details:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/v1/form/request-webinar"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d  <span class="se">\</span>
<span class="s1">'{
    "name": "Example name",
    "email": "example@email.com",
    "description": "Example description"
}'</span>
</code></pre>
<blockquote>
<p>Successful response: 204 No Content</p>
</blockquote>

<p>In order to request a new webinar, you should make a POST request to the <code class="prettyprint">form/request-webinar</code> endpoint, providing at least a <code class="prettyprint">name</code> and an <code class="prettyprint">email</code> in the request body. You can also optionally provide a <code class="prettyprint">description</code>.</p>

<p>Webinar requests are pushed into a Google Spreadsheet (using the Google Sheets API). Staging webinar requests are located <a href="https://docs.google.com/spreadsheets/d/1JsXX7aE_XlJm-WWhs6wM5IW0UfLi-K9OmOx0mkIb0uA/edit?usp=sharing">here</a>, and production webinar requests are located <a href="https://docs.google.com/spreadsheets/d/1zqiimFua1Lnm9KM4ki_njCaMuRhaPBif30zbvxIZWa4/edit?usp=sharing">here</a>.</p>

<p>In case of success, this endpoint will return a response with status code <code class="prettyprint">204 No Content</code>. If an error occurs, a response with status code <code class="prettyprint">500 Internal Server Error</code> is returned.</p>

          <h1 id="metadata">Metadata</h1>

<h2 id="what-is-metadata">What is metadata?</h2>

<p>If you are new to the RW API, or want to learn more about the concept of metadata, we strongly encourage you to read the <a href="#metadata">metadata concept</a> documentation first. It gives you a brief and clear description of what metadata is, and why it is useful.</p>

<p>Once you&rsquo;ve read that section, you can come back here to learn more details about using the RW API Metadata feature, which aims to provide summary information about <a href="#dataset">Datasets</a>, <a href="#layer">Layers</a>, and <a href="#widget">Widgets</a>.</p>

<p><a href="#metadata-objects">Metadata objects</a> describe things like the name, spatial and temporal coverage, usage rights, and contact information of datasets as well as their associated layers and widgets, uploaded by <a href="https://www.wri.org/">WRI</a>, its partner organizations, or by API users like you.</p>

<p>They are particularly useful for allowing users to find relevant datasets, layers and widgets, understand their context, and for providing useful extra information, such as descriptions, licensing, and citations.</p>

<p><strong><em>As such, if you really want people to be able to use your datasets, widgets or layers, it is crucial that it has metadata!</em></strong></p>

<p>To find out more about accessing metadata objects already available on the RW API, check out the documentation on <a href="#getting-metadata">getting metadata objects</a>. If you&rsquo;d like to share your data with the world, you can also <a href="#creating-metadata">create your own metadata</a> on the RW API, as well as <a href="#updating-metadata">update</a> and <a href="#deleting-metadata">delete</a> existing metadata objects.</p>

<h2 id="metadata-objects">Metadata objects</h2>

<p>RW API&rsquo;s <a href="#metadata">approach to metadata</a> is designed to offer flexibility; both in terms of the information contained and languages. Hence, when working with metadata objects it is important to understand a few key concepts. </p>

<p>The first of which is that metadata objects contain information about another RW API entity - a dataset, a layer or a widget. Thus, each metadata object belongs to a single <code class="prettyprint">resource</code>, identified by its <code class="prettyprint">type</code> and <code class="prettyprint">id</code>. As this <code class="prettyprint">type</code> + <code class="prettyprint">id</code> pair directly or indirectly (as widgets and layers themselves are associated with a dataset) references a dataset, and for convenience, each metadata object also has the dataset identifier to which it&rsquo;s associated.</p>

<p>Another important concept to keep in mind is that each metadata object concerns a single combination of <code class="prettyprint">language</code> and <code class="prettyprint">application</code>. If you want to provide translations of your metadata, or if you&rsquo;d like it to tailor a resource&rsquo;s metadata to better fit different applications, you should create multiple metadata objects for the different combinations of application and language.</p>

<p>Building on top of the two concepts above, it&rsquo;s important to highlight that while each resource can have multiple metadata, it cannot have multiple metadata for the same combination of <code class="prettyprint">language</code> and <code class="prettyprint">application</code>. For example, metadata about a tree cover dataset for the <a href="https://www.globalforestwatch.org/">Global Forest Watch</a> application might be available in both English and Spanish (each a different metadata object), and these may be different compared to metadata objects in the same languages associated with <a href="https://resourcewatch.org/">Resource Watch</a> application. This example would then represent a total of 4 different metadata objects, all associated with the same dataset.</p>

<p>When it comes to its internal structure, metadata objects have a balance of structured and free-format fields that promote a common base across all objects, while allowing different applications and use cases to have their own specific structure and details. You can learn more about the available fields in the <a href="#metadata-reference">metadata reference</a> section.</p>

<p>Last but not least, it&rsquo;s important to keep in mind that the behavior of metadata objects and endpoints aims to be, as much as possible, independent from the target resource it references. In the detailed endpoint documentation below we&rsquo;ll cover the different endpoints in depth, and highlight the differences in behavior when handling different resource types, but you can safely assume that, for most of it, behavior described for a type of resource will be the same for all 3 types.</p>

<h2 id="metadata-endpoints-overview">Metadata endpoints overview</h2>

<p>As covered above, each metadata object directly concerns a single dataset, widget or layer. The endpoint structure mostly reflects that, with each metadata action (getting, creating, modifying or deleting metadata) being available through 3 different endpoints, one for each type of resource (for example, <code class="prettyprint">/v1/dataset/&lt;dataset-id&gt;/metadata</code>, <code class="prettyprint">/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer_id&gt;/metadata</code> and <code class="prettyprint">/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget_id&gt;/metadata</code>). These endpoints will be documented as a single element, as they behave in exactly the same way, with the only difference between them being the actual endpoint URL. Any differences that may exist will be pointed out, but those will be rare. The only exceptions are the endpoints to load all metadata (which ignores resource type) and to clone a dataset&rsquo;s metadata, which doesn&rsquo;t have a widget or layer equivalent.</p>

<h2 id="getting-metadata">Getting metadata</h2>

<p>There are 2 main ways to retrieve metadata objects from the RW API: using the &ldquo;get all&rdquo; endpoint (and optionally adding some filters), or loading metadata by their resource id (either a single element at a time, or multiple in one go) and type.</p>

<p>Remembering that each resource <a href="#metadata-objects">may have many metadata objects</a> associated with it. In general, you will usually want to use the filter parameters <code class="prettyprint">application</code> and <code class="prettyprint">language</code>, which may be one or many of valid RW API applications and languages.</p>

<h3 id="getting-all-metadata">Getting all metadata</h3>

<blockquote>
<p>Getting a list of all metadata</p>
</blockquote>
<pre class="highlight shell"><code>curl -L -X GET <span class="s1">'https://api.resourcewatch.org/v1/metadata?application=rw,gfw&amp;language=en,es&amp;type=dataset&amp;limit=1'</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span>
</code></pre>
<blockquote>
<p>Getting a list of all metadata with optional parameters</p>
</blockquote>
<pre class="highlight shell"><code>curl -L -X GET <span class="s1">'https://api.resourcewatch.org/v1/metadata?application=rw,gfw&amp;language=en,es&amp;type=dataset&amp;limit=1'</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span>
</code></pre>
<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57cfffd6129c3c100054c383"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0ffe5ad6-c920-421b-b69c-bc8893155df4"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gfw"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0ffe5ad6-c920-421b-b69c-bc8893155df4"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"citation"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"license"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"organization"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"license"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"citation"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"short-description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"subtitle"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-12-13T10:02:28.337Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-12-13T10:03:02.445Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"published"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint will allow you to get the list of the metadata available in the API, and it&rsquo;s the only endpoint that will allow you to load metadata for multiple resources at once.</p>

<p>It&rsquo;s worth pointing out that, unlike other similar endpoints on the RW API, this endpoint does NOT have pagination by default. If you query it without any of the optional parameters, you will get a list of all metadata objects for all datasets, widgets and layers. This is strongly discouraged, and <strong>you should not rely on this behavior</strong> - when using this endpoint, you should aim to use a combination of parameters to narrow down your response pool. You should also <strong>expect a future update to this endpoint to introduce pagination</strong> on all responses, so try to keep this in mind when using this endpoint on your application.</p>

<p>For a detailed description of each field, check out the <a href="#metadata-reference">Metadata reference</a> section.</p>

<p>In the sections below, we’ll explore the optional parameters supported by this, which we strongly recommend you use.</p>

<h4 id="application-and-language-filters">Application and language filters</h4>

<blockquote>
<p>Getting a list of all metadata belonging to the RW application, written in either English or Spanish</p>
</blockquote>
<pre class="highlight shell"><code>curl -L -X GET <span class="s1">'https://api.resourcewatch.org/v1/metadata?application=rw&amp;language=en,es'</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span>
</code></pre>
<p>You can filter by <code class="prettyprint">application</code> and <code class="prettyprint">language</code> of the metadata by passing query arguments with the same name in your call to this endpoint. You can filter by multiple values at the same time, separating them using using commas.</p>

<h4 id="type-filter">Type filter</h4>

<blockquote>
<p>Getting a list of all metadata for widgets</p>
</blockquote>
<pre class="highlight shell"><code>curl -L -X GET <span class="s1">'https://api.resourcewatch.org/v1/metadata?type=widget'</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span>
</code></pre>
<p>Using the <code class="prettyprint">type</code> query parameter you can specify the type of the metadata resource to load. Expected values are <code class="prettyprint">dataset</code>, <code class="prettyprint">widget</code> or <code class="prettyprint">layer</code>, and any other values will produce no results.</p>

<h4 id="limit">Limit</h4>

<blockquote>
<p>Getting a list of up to 10 metadata</p>
</blockquote>
<pre class="highlight shell"><code>curl -L -X GET <span class="s1">'https://api.resourcewatch.org/v1/metadata?limit=10'</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span>
</code></pre>
<p>Using the <code class="prettyprint">limit</code> query parameter you can specify the maximum number of metadata to load in a single response.</p>

<h4 id="sorting">Sorting</h4>

<blockquote>
<p>Sorting metadata</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/metadata?sort<span class="o">=</span>name
</code></pre>
<blockquote>
<p>Sorting metadata by multiple criteria</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/metadata?sort<span class="o">=</span>name,description
</code></pre>
<blockquote>
<p>Sort by name descending, description ascending</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/metadata?sort<span class="o">=</span>-name,+description
</code></pre>
<p>The Metadata service currently supports sorting using the <code class="prettyprint">sort</code> query parameter. Sorting metadata adheres to the conventions defined in the <a href="index-rw.html#sorting">Sorting guidelines for the RW API</a>, so we strongly recommend reading that section before proceeding. Additionally, you can check out the <a href="#metadata-reference">Metadata reference</a> section for a detailed description of the fields you can use when sorting.</p>

<h3 id="getting-metadata-for-a-dataset-layer-or-widget">Getting metadata for a dataset, layer or widget</h3>

<blockquote>
<p>Getting metadata associated with a dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -L -X GET <span class="s1">'https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/metadata'</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span>
</code></pre>
<blockquote>
<p>Getting metadata associated with a layer</p>
</blockquote>
<pre class="highlight shell"><code>curl -L -X GET <span class="s1">'https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer_id&gt;/metadata'</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span>
</code></pre>
<blockquote>
<p>Getting metadata associated with a widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -L -X GET <span class="s1">'https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget_id&gt;/metadata'</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span>
</code></pre>
<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"595f836c0d9ed1000bc29a91"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f2fe7588-6d1b-400e-b79c-0c86bf1273ea"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f2fe7588-6d1b-400e-b79c-0c86bf1273ea"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Urban Population with Access to an Improved Water Source"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Percentage of Urban Population with Access to an Improved Water Source is derived by ..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UN WHO/WHO UNICEF JMP WSS"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"data_download_link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"null"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"frequency_of_updates"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Annual"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"date_of_content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1990-present"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"spatial_resolution"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tabular: National"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"geographic_coverage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Global"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"link_to_linense"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://data.worldbank.org/summary-terms-of-use"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"license"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Open: You are free to copy, distribute, adapt, display, or include ..."</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"citation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"World Bank. 2015. </span><span class="se">\"</span><span class="s2">World Development Indicators: Improved Water Source (% of Population with Access).</span><span class="se">\"</span><span class="s2"> Retrieved from http://data.worldbank.org/indicator/SH.H2O.SAFE.ZS. Accessed through Resource Watch on [date]. www.resourcewatch.org."</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"cautions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The data on access to an improved water source measure the ..."</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"source_organization_link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"null"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"source_organization"</span><span class="p">:</span><span class="w"> </span><span class="s2">"United Nations World Health Organization (UN WHO)/World Health Organization and United Nations Children's Fund Joint Monitoring Programme for Water Supply and Sanitation (WHO UNICEF JMP WSS)"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This data set displays the percentage of urban population with access to an improved drinking water source in a dwelling or located within a convenient distance from the user's dwelling."</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"functions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This data set displays the percentage of urban population with access to an improved drinking water source in a dwelling or located within a convenient distance from the user's dwelling."</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Urban Population with Access to an Improved Water Source"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"technical_title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Percentage of Urban Population with Access to an Improved Water Source (WHO/UNICEF)"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"columns"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"year"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Measured year"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Year"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Value"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Country Name"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ISO-3 Country Code"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-07T12:49:48.721Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-08-28T14:30:17.701Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"published"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>These endpoints allow you to get metadata for a single dataset, widget or layer. By default, metadata for all languages and applications is returned, but you can use optional query parameters to filter that result.</p>

<h4 id="application-and-language-filters">Application and language filters</h4>

<blockquote>
<p>Getting a list of all metadata for a given dataset, belonging to the RW application and written in either English or Spanish</p>
</blockquote>
<pre class="highlight shell"><code>curl -L -X GET <span class="s1">'https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/metadata?application=rw&amp;language=en,es'</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
</code></pre>
<p>You can filter by <code class="prettyprint">application</code> and <code class="prettyprint">language</code> of the metadata by passing query arguments with the same name in your call to this endpoint. You can filter by multiple values at the same time, separating them using using commas.</p>

<h4 id="limit">Limit</h4>

<blockquote>
<p>Getting a list of all metadata for a given dataset, up to 10 results</p>
</blockquote>
<pre class="highlight shell"><code>curl -L -X GET <span class="s1">'https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/metadata?limit=10'</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
</code></pre>
<p>Using the <code class="prettyprint">limit</code> query parameter you can specify the maximum number of metadata to load in a single response.</p>

<h3 id="getting-metadata-for-multiple-datasets-layers-or-widgets">Getting metadata for multiple datasets, layers or widgets</h3>

<blockquote>
<p>Getting metadata associated with multiple datasets</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/:dataset/metadata/find-by-ids <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "ids": [&lt;dataset ids&gt;]
  }'</span>
</code></pre>
<blockquote>
<p>Getting metadata associated with multiple widgets</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/:dataset/layer/metadata/find-by-ids <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "ids": [&lt;layer ids&gt;]
  }'</span>
</code></pre>
<blockquote>
<p>Getting metadata associated with multiple widgets</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/:dataset/widget/metadata/find-by-ids <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "ids": [&lt;widget ids&gt;]
  }'</span>
</code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"595f836c0d9ed1000bc29a91"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f2fe7588-6d1b-400e-b79c-0c86bf1273ea"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f2fe7588-6d1b-400e-b79c-0c86bf1273ea"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Urban Population with Access to an Improved Water Source"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Percentage of Urban Population with Access to an Improved Water Source is derived by ..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UN WHO/WHO UNICEF JMP WSS"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"data_download_link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"null"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"frequency_of_updates"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Annual"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"date_of_content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1990-present"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"spatial_resolution"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tabular: National"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"geographic_coverage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Global"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"link_to_linense"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://data.worldbank.org/summary-terms-of-use"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"license"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Open: You are free to copy, distribute, adapt, display, or include ..."</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"citation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"World Bank. 2015. </span><span class="se">\"</span><span class="s2">World Development Indicators: Improved Water Source (% of Population with Access).</span><span class="se">\"</span><span class="s2"> Retrieved from http://data.worldbank.org/indicator/SH.H2O.SAFE.ZS. Accessed through Resource Watch on [date]. www.resourcewatch.org."</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"cautions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The data on access to an improved water source measure the ..."</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"source_organization_link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"null"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"source_organization"</span><span class="p">:</span><span class="w"> </span><span class="s2">"United Nations World Health Organization (UN WHO)/World Health Organization and United Nations Children's Fund Joint Monitoring Programme for Water Supply and Sanitation (WHO UNICEF JMP WSS)"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This data set displays the percentage of urban population with access to an improved drinking water source in a dwelling or located within a convenient distance from the user's dwelling."</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"functions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This data set displays the percentage of urban population with access to an improved drinking water source in a dwelling or located within a convenient distance from the user's dwelling."</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Urban Population with Access to an Improved Water Source"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"technical_title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Percentage of Urban Population with Access to an Improved Water Source (WHO/UNICEF)"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"columns"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"year"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Measured year"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Year"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Value"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Country Name"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ISO-3 Country Code"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-07T12:49:48.721Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-08-28T14:30:17.701Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"published"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This group of endpoints allows you to access metadata for multiple resources of the same type with a single request. The result will be a flat list of metadata elements, not grouped by their associated resource - it&rsquo;s up to your application to implement this logic if it needs it.</p>

<h4 id="application-and-language-filters">Application and language filters</h4>

<blockquote>
<p>Getting a list of all metadata for multiple widgets, belonging to the RW application and written in either English or Spanish</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/:dataset/widget/metadata/find-by-ids?application<span class="o">=</span>rw&amp;language<span class="o">=</span>en,es <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "ids": [&lt;widget ids&gt;]
  }'</span>
</code></pre>
<p>You can filter by <code class="prettyprint">application</code> and <code class="prettyprint">language</code> of the metadata by passing query arguments with the same name in your call to this endpoint. You can filter by multiple values at the same time, separating them using using commas.</p>

<h4 id="errors-for-getting-metadata-for-multiple-datasets-layers-or-widgets">Errors for getting metadata for multiple datasets, layers or widgets</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Missing &lsquo;ids&rsquo; from request body</td>
<td>The required <code class="prettyprint">ids</code> field is missing in the request body.</td>
</tr>
</tbody></table>

<h2 id="creating-metadata">Creating metadata</h2>

<blockquote>
<p>Creating a new metadata for a given dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s1">'https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/metadata'</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;auth_token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "application": &lt;application&gt;,
  "language": &lt;language&gt;,
  "name": "metadata name"
}'</span>
</code></pre>
<blockquote>
<p>Creating a new metadata for a given layer</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s1">'https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/metadata'</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;auth_token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "application": &lt;application&gt;,
  "language": &lt;language&gt;,
  "name": "metadata name"
}'</span>
</code></pre>
<blockquote>
<p>Creating a new metadata for a given widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s1">'https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/metadata'</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;auth_token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "application": &lt;application&gt;,
  "language": &lt;language&gt;,
  "name": "metadata name"
}'</span>
</code></pre>
<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f99b9317fe3c8001be2f272"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"44c7fa02-391a-4ed7-8efc-5d832c567d57"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gfw"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"44c7fa02-391a-4ed7-8efc-5d832c567d57"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"es"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-10-28T18:32:17.464Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-10-28T18:32:17.464Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"published"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This group of endpoints allows you to associate metadata with an existing dataset, layer or widget. To help make your resources easier to find, understand and reuse, we recommend creating the associated metadata right after you create your new dataset, layer or widget, but you can do it at any time if you want.</p>

<p>As we covered before, the RW API implementation of metadata aims for flexibility, so the only hard requirements when creating a new metadata is that you specify the associate resource id and type, their corresponding dataset id, and the language and application of the metadata (you should ensure that dataset id in the URL matches the dataset id of the resource you&rsquo;re creating metadata for). Everything else is up to you to decide if you want to define or not, but the effectiveness of your metadata will increase if you provide more details about your resources. You can learn more about the available fields in the <a href="#metadata-reference">metadata reference</a> section. </p>

<p>If you want to create new metadata for your resources, you must have the necessary user account permissions. Specifically, you must:</p>

<ul>
<li>the user must be logged in and belong to the same application as the metadata you&rsquo;re creating</li>
<li>the user must have role <code class="prettyprint">ADMIN</code> or <code class="prettyprint">MANAGER</code></li>
</ul>

<h4 id="errors-for-creating-metadata">Errors for creating metadata</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><code class="prettyprint">&lt;field&gt;</code>: <code class="prettyprint">&lt;field&gt;</code> can not be empty</td>
<td>Your are missing a required field value.</td>
</tr>
<tr>
<td>400</td>
<td><code class="prettyprint">&lt;field&gt;</code>: empty or invalid <code class="prettyprint">&lt;field&gt;</code></td>
<td>The provided value for <code class="prettyprint">&lt;field&gt;</code> is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You are not authenticated.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to create metadata for an <code class="prettyprint">application</code> value that is not associated with your user account.</td>
</tr>
</tbody></table>

<h2 id="updating-metadata">Updating metadata</h2>

<blockquote>
<p>Updating metadata for a given dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/metadata <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;auth_token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "application": &lt;application&gt;,
   "language": &lt;language&gt;,
   "name": "updated metadata name"
  }'</span>
</code></pre>
<blockquote>
<p>Updating metadata for a given layer</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/metadata <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;auth_token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "application": &lt;application&gt;,
   "language": &lt;language&gt;,
   "name": "updated metadata name"
  }'</span>
</code></pre>
<blockquote>
<p>Updating metadata for a given widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/metadata <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;auth_token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "application": &lt;application&gt;,
   "language": &lt;language&gt;,
   "name": "updated metadata name"
  }'</span>
</code></pre>
<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86-dataset-942b3f38-9504-4273-af51-0440170ffc86-rw-en"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cloud Computing Market - USA - 2016"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.forbes.com/"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"These and many other insights are from the latest series of cloud computing forecasts and market estimates produced by IDC, Gartner, Microsoft and other research consultancies. Amazon’s decision to break out AWS revenues and report them starting in Q1 FY2015 is proving to be a useful benchmark for tracking global cloud growth.  In their latest quarterly results released on January 28, Amazon reported that AWS generated $7.88B in revenues and attained a segment operating income of $1.863B. Please see page 8 of the announcement for AWS financials.  For Q4, AWS achieved a 28.5% operating margin (% of AWS net sales)."</span><span class="p">,</span><span class="w">
          </span><span class="s2">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Louis Columbus"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAR 13, 2016 @ 10:42 PM"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.forbes.com/sites/louiscolumbus/2016/03/13/roundup-of-cloud-computing-forecasts-and-market-estimates-2016/#5875cf0074b0"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-20T08:07:53.272Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-20T08:40:30.190Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"published"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>To update an existing metadata, you need to issue a PATCH request to the endpoint that matches your resource type and id, specify the new values you want to use. You can update most of the fields listed in the <a href="#metadata-reference">metadata reference</a> section, apart from:</p>

<ul>
<li><code class="prettyprint">id</code></li>
<li><code class="prettyprint">userId</code></li>
<li><code class="prettyprint">createdAt</code> and <code class="prettyprint">updatedAt</code></li>
<li><code class="prettyprint">language</code> and <code class="prettyprint">application</code></li>
<li><code class="prettyprint">dataset</code></li>
<li><code class="prettyprint">resource</code></li>
</ul>

<p>One important detail is that you MUST specify, in your request body, both the <code class="prettyprint">application</code> and <code class="prettyprint">language</code> values of the metadata you&rsquo;re trying to update. These fields will not be used as new values, as you would expect, but are used to pinpoint exactly which metadata entry will be updated - remember that each resource may have multiple metadata associated with it, but only one per application-language pair.</p>

<p>Also keep in mind that, when updating object type fields, your new value will overwrite the previous value for that field entirely - it&rsquo;s up to you to implement any sort of data merge logic you&rsquo;d like to see happen.</p>

<p>To perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must be logged in and belong to the same application as the metadata that&rsquo;s being updated </li>
<li>the user must comply with <a href="index-rw.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
</ul>

<h3 id="errors-for-updating-metadata">Errors for updating metadata</h3>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to update metadata.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code class="prettyprint">ADMIN</code> role, or have role <code class="prettyprint">MANAGER</code> and be the metadata owner (through the <code class="prettyprint">userId</code> field of the metadata).</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to update metadata with an <code class="prettyprint">application</code> value that is not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Metadata of resource <resource type>: <resource id> doesn&rsquo;t exist</td>
<td>Metadata matching the provided resource data, language and application does not exist.</td>
</tr>
</tbody></table>

<h2 id="cloning-dataset-metadata">Cloning dataset metadata</h2>

<blockquote>
<p>Cloning metadata for a given dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s1">'https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/metadata/clone'</span> 
-H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;auth_token&gt;"</span> -d <span class="se">\</span>
<span class="s1">'{
    "newDataset": "&lt;targer dataset&gt;",
    "application": "&lt;application&gt;"
}'</span>
</code></pre>
<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86-dataset-942b3f38-9504-4273-af51-0440170ffc86-rw-en"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cloud Computing Market - USA - 2016"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.forbes.com/"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"These and many other insights are from the latest series of cloud computing forecasts and market estimates produced by IDC, Gartner, Microsoft and other research consultancies. Amazon’s decision to break out AWS revenues and report them starting in Q1 FY2015 is proving to be a useful benchmark for tracking global cloud growth.  In their latest quarterly results released on January 28, Amazon reported that AWS generated $7.88B in revenues and attained a segment operating income of $1.863B. Please see page 8 of the announcement for AWS financials.  For Q4, AWS achieved a 28.5% operating margin (% of AWS net sales)."</span><span class="p">,</span><span class="w">
          </span><span class="s2">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Louis Columbus"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAR 13, 2016 @ 10:42 PM"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.forbes.com/sites/louiscolumbus/2016/03/13/roundup-of-cloud-computing-forecasts-and-market-estimates-2016/#5875cf0074b0"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-20T08:07:53.272Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-20T08:40:30.190Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"published"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint allows you to clone all the existing metadata associated with a dataset, as new metadata associated with a different dataset. Note that this will not clone metadata for widgets or layers associated with the defined dataset; only dataset metadata will be cloned.</p>

<p>When calling this endpoint, you must provide two body parameters:</p>

<ul>
<li><code class="prettyprint">newDataset</code>: the id of the target dataset to which the cloned metadata will be associated.</li>
<li><code class="prettyprint">application</code>: an application to which your user account is associated. This is not used in the cloning logic.</li>
</ul>

<p>A successful cloning will return a list of all metadata created in this process.</p>

<p>To perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must be logged in and belong to the same application as the metadata that&rsquo;s being updated </li>
<li>the user must comply with <a href="index-rw.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
</ul>

<h3 id="errors-for-cloning-metadata">Errors for cloning metadata</h3>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>- newDataset: newDataset can not be empty. -</td>
<td>You need to specify the <code class="prettyprint">newDataset</code> body parameter.</td>
</tr>
<tr>
<td>400</td>
<td>Metadata of resource dataset: <new dataset>, application: <application> and language: <language> already exists</td>
<td>The target dataset already has metadata associated with it, and cloning the metadata from the source dataset would cause it to have more than one metadata per language and application.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to update metadata.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code class="prettyprint">ADMIN</code> role, or have role <code class="prettyprint">MANAGER</code> and be the metadata owner (through the <code class="prettyprint">userId</code> field of the metadata).</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to clone metadata with an <code class="prettyprint">application</code> value that is not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Metadata of resource <resource type>: <resource id> doesn&rsquo;t exist</td>
<td>Metadata matching the provided resource data, language and application does not exist.</td>
</tr>
</tbody></table>

<h2 id="deleting-metadata">Deleting metadata</h2>

<blockquote>
<p>Deleting metadata for a given dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/metadata?application<span class="o">=</span>&lt;application&gt;&amp;language<span class="o">=</span>&lt;language&gt; <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;auth_token&gt;"</span> 
</code></pre>
<blockquote>
<p>Deleting metadata for a given layer</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/metadata?application<span class="o">=</span>&lt;application&gt;&amp;language<span class="o">=</span>&lt;language&gt; <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;auth_token&gt;"</span> 
</code></pre>
<blockquote>
<p>Deleting metadata for a given widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/metadata?application<span class="o">=</span>&lt;application&gt;&amp;language<span class="o">=</span>&lt;language&gt; <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;auth_token&gt;"</span> 
</code></pre>
<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86-dataset-942b3f38-9504-4273-af51-0440170ffc86-rw-en"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cloud Computing Market - USA - 2016"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.forbes.com/"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"These and many other insights are from the latest series of cloud computing forecasts and market estimates produced by IDC, Gartner, Microsoft and other research consultancies. Amazon’s decision to break out AWS revenues and report them starting in Q1 FY2015 is proving to be a useful benchmark for tracking global cloud growth.  In their latest quarterly results released on January 28, Amazon reported that AWS generated $7.88B in revenues and attained a segment operating income of $1.863B. Please see page 8 of the announcement for AWS financials.  For Q4, AWS achieved a 28.5% operating margin (% of AWS net sales)."</span><span class="p">,</span><span class="w">
          </span><span class="s2">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Louis Columbus"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAR 13, 2016 @ 10:42 PM"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.forbes.com/sites/louiscolumbus/2016/03/13/roundup-of-cloud-computing-forecasts-and-market-estimates-2016/#5875cf0074b0"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-20T08:07:53.272Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-20T08:40:30.190Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"published"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The metadata delete endpoint allows you to delete a single metadata at a time, provided you have the necessary permissions. Besides the details provided in the URL itself, you must also specify, as query parameters, both the <code class="prettyprint">application</code> and <code class="prettyprint">language</code> values of the metadata you&rsquo;re trying to delete. These fields will be used to pinpoint exactly which metadata entry will be deleted - remember that each resource may have multiple metadata associated with it, but only one per application-language pair.</p>

<p>To perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must be logged in and belong to the same application as the metadata that&rsquo;s being deleted</li>
<li>the user must comply with <a href="index-rw.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
</ul>

<h3 id="errors-for-deleting-metadata">Errors for deleting metadata</h3>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad request</td>
<td>Your request does not include the <code class="prettyprint">application</code> or <code class="prettyprint">language</code> query parameters.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to delete metadata.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code class="prettyprint">ADMIN</code> role, or have role <code class="prettyprint">MANAGER</code> and be the metadata owner (through the <code class="prettyprint">userId</code> field of the metadata).</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to delete metadata with an <code class="prettyprint">application</code> value that is not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Metadata of resource <resource type>: <resource id> doesn&rsquo;t exist</td>
<td>Metadata matching the provided resource data, language and application does not exist.</td>
</tr>
</tbody></table>

<h2 id="metadata-reference">Metadata reference</h2>

<p>This section gives you a complete view at the properties that are maintained as part of metadata objects. When interacting with metadata objects (on get, on create, etc) you will find most of these properties available to you, although they may be organized in a slightly different structure (ie: on get, everything but the <code class="prettyprint">id</code> is nested inside an <code class="prettyprint">attributes</code> object).</p>

<p>You can find more details in the <a href="https://github.com/resource-watch/rw_metadata/blob/dev/app/src/models/metadata.model.js">source code</a>.</p>

<table><thead>
<tr>
<th>Field name</th>
<th>Type</th>
<th>Required</th>
<th>Default value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Yes (autogenerated)</td>
<td></td>
<td>Unique Id of the metadata. Auto generated on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>dataset</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Id of the dataset to which the metadata object corresponds. Set on metadata creation, cannot be modified.</td>
</tr>
<tr>
<td>application</td>
<td>Array</td>
<td>Yes</td>
<td></td>
<td>Applications associated with this metadata. Read more about this field <a href="index-rw.html#applications">here</a>.</td>
</tr>
<tr>
<td>resource.id</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Id of the resource associated with the metadata.</td>
</tr>
<tr>
<td>resource.type</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Type of the resource associated with the metadata.</td>
</tr>
<tr>
<td>userId</td>
<td>String</td>
<td>Yes (autopopulated)</td>
<td></td>
<td>Id of the user who created the metadata. Set automatically on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>language</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Language in which the metadata details are written. While not enforced, we strongly recommend using 2 character language codes.</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Name of the metadata.</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>No</td>
<td></td>
<td>User defined description of the metadata.</td>
</tr>
<tr>
<td>status</td>
<td>String</td>
<td>No</td>
<td>published</td>
<td>Publication status of the metadata. Defaults to <code class="prettyprint">published</code>, can alternatively be set to <code class="prettyprint">unpublished</code>.</td>
</tr>
<tr>
<td>source</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Source information about the associated resource</td>
</tr>
<tr>
<td>citation</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Citation information about the associated resource</td>
</tr>
<tr>
<td>license</td>
<td>String</td>
<td>No</td>
<td></td>
<td>License named used for the associated resource</td>
</tr>
<tr>
<td>units</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Free-form object mapping each of the associated resource&rsquo;s fields to a unit</td>
</tr>
<tr>
<td>info</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Free-form object for custom information about the associated resource</td>
</tr>
<tr>
<td>columns</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Free-form object mapping each of the associated resource&rsquo;s fields to a free-form object containing more details.</td>
</tr>
<tr>
<td>applicationProperties</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Free-form object containing application-specific information about the associated resource</td>
</tr>
<tr>
<td>createdAt</td>
<td>Date</td>
<td>No (autogenerated)</td>
<td><current date></td>
<td>Automatically maintained date of when the metadata was created. Cannot be modified by users.</td>
</tr>
<tr>
<td>updatedAt</td>
<td>Date</td>
<td>No (autogenerated)</td>
<td><current date></td>
<td>Automatically maintained date of when the metadata was last updated. Cannot be modified by users.</td>
</tr>
</tbody></table>

          <h1 id="vocabulary-and-tags">Vocabulary (and Tags)</h1>

<h2 id="resource-definition">Resource definition</h2>

<p>A Resource represents an external entity that will be related with a Vocabulary. The most common resources used when creating relationships with vocabulary are <em>datasets</em>, <em>layers</em> and <em>widgets</em>.</p>

<h2 id="tags-definition">Tags definition</h2>

<p>A Tag is a way to categorize a resource within a vocabulary context.</p>

<h2 id="vocabulary-definition">Vocabulary definition</h2>

<p>The Vocabulary can be described as a cluster of tags.</p>

<p>It is currently possible to just create a Vocabulary without any tags or relationships.
To do it, the only parameter that is required is the name of the Vocabulary.</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td style="text-align: center">The name of the Vocabulary (<strong>it has to be unique and it represents the &ldquo;primaryKey&rdquo;</strong>)</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">The associated application for this vocabulary. Read more about the <code class="prettyprint">application</code> field <a href="index-rw.html#applications">here</a>.</td>
<td style="text-align: right">String</td>
</tr>
</tbody></table>

<p>However, the most common use case relies on the relationships creation.</p>

<h2 id="relationships">Relationships</h2>

<p>This section describes how to associate an existing or new Vocabulary to a resource.</p>

<p>Some important points:</p>

<ul>
<li>A <strong>Vocabulary</strong> can have <strong>N</strong> associated <strong>Resources</strong>.</li>
<li>A <strong>Resource</strong> can have <strong>M</strong> associated <strong>Vocabularies</strong>.</li>
<li>The way of building these <strong>relationships</strong> is creating <strong>Tags</strong>.</li>
</ul>

<h2 id="creating-a-vocabulary-resource-relationship">Creating a Vocabulary-Resource relationship</h2>

<p>To create a relationship between a Resource and a Vocabulary (even if the Vocabulary or the Resource doesn&rsquo;t exist yet) it is only required that you set the tags that define the relationship.</p>

<p>Some writing operations can take a little more time than reading ones. Even if the relationships are not strong, the writing operations have to ensure consistency along entities.</p>

<p>Remember that you can create relationshipts between Vocabulary and datasets, widgets or layers (the supported Resources).</p>

<aside class="notice">
Please, be sure that the request is properly authenticated and the current user has permission to the resource.
If you don&rsquo;t know how to do this, please go to the <a href="#authentication">Authentication section</a>
</aside>

<blockquote>
<p>Creating a relationship between a Vocabulary and a Dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/vocabulary/&lt;vocabulary-id&gt; <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
 "application": &lt;application&gt;,
   "tags": [&lt;tags&gt;]
  }'</span>
</code></pre>
<blockquote>
<p>Creating a relationship between a Vocabulary and a Widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/vocabulary/&lt;vocabulary-id&gt; <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
 "application": &lt;application&gt;,
   "tags": [&lt;tags&gt;]
  }'</span>
</code></pre>
<blockquote>
<p>Creating a relationship between a Vocabulary and a Layer</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/vocabulary/&lt;vocabulary-id&gt; <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
 "application": &lt;application&gt;,
   "tags": [&lt;tags&gt;]
  }'</span>
</code></pre>
<blockquote>
<p>Example of request with real data</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/942b3f38-9504-4273-af51-0440170ffc86/vocabulary/science
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
 "application": &lt;application&gt;,
   "tags": ["biology", "chemistry"]
  }'</span>
</code></pre>
<blockquote>
<p>Example of response with real data</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabularyNameOne"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tag2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tag3"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"science"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"biology"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"chemistry"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaa"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"biology"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"chemistry"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="updating-an-existing-vocabulary-resource-relationship">Updating an existing Vocabulary-Resource relationship</h2>

<p>If a relationship has to be updated, it&rsquo;s necessary to define it&rsquo;s new tags.
The previous tags will be deleted in benefit of the new ones.</p>

<blockquote>
<p>Updating a relationship between a Vocabulary and a Dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/vocabulary/&lt;vocabulary-id&gt; <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
 "application": &lt;application&gt;,
   "tags": [&lt;tags&gt;]
  }'</span>
</code></pre>
<blockquote>
<p>Updating a relationship between a Vocabulary and a Widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/vocabulary/&lt;vocabulary-id&gt; <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
 "application": &lt;application&gt;,
   "tags": [&lt;tags&gt;]
  }'</span>
</code></pre>
<blockquote>
<p>Updating a relationship between a Vocabulary and a Layer</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/vocabulary/&lt;vocabulary-id&gt; <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
 "application": &lt;application&gt;,
   "tags": [&lt;tags&gt;]
  }'</span>
</code></pre>
<blockquote>
<p>Example of request with real data</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/dataset/942b3f38-9504-4273-af51-0440170ffc86/vocabulary/science
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
 "application": &lt;application&gt;,
   "tags": ["maths", "astronomy"]
  }'</span>
</code></pre>
<blockquote>
<p>Example of response with real data</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabularyNameOne"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tag2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tag3"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"science"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"maths"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"astronomy"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaa"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"biology"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"chemistry"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="creating-several-vocabulary-resource-relationships">Creating several Vocabulary-Resource relationships</h2>

<p>There is also an endpoint that allows you to create multiple relationships in the same request.</p>

<blockquote>
<p>Creating multiple relationships between a Vocabulary and a Dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/vocabulary <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "vocabularyOne": {
   "application": &lt;application&gt;,
       "tags": [&lt;tags&gt;]
   },
   "vocabularyTwo": {
   "application": &lt;application&gt;,
       "tags": [&lt;tags&gt;]
   }
  }'</span>
</code></pre>
<blockquote>
<p>Creating multiple relationships between a Vocabulary and a Widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/vocabulary<span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
  "vocabularyOne": {
  "application": &lt;application&gt;,
      "tags": [&lt;tags&gt;]
  },
  "vocabularyTwo": {
  "application": &lt;application&gt;,
      "tags": [&lt;tags&gt;]
  }
 }'</span>
</code></pre>
<blockquote>
<p>Creating multiple relationships between a Vocabulary and a Layer</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/vocabulary <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
  "vocabularyOne": {
  "application": &lt;application&gt;,
      "tags": [&lt;tags&gt;]
  },
  "vocabularyTwo": {
  "application": &lt;application&gt;,
      "tags": [&lt;tags&gt;]
  }
 }'</span>
</code></pre>
<blockquote>
<p>Example of request with real data</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/942b3f38-9504-4273-af51-0440170ffc86/vocabulary?application<span class="o">=</span>&lt;application&gt;
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
     "country": {
         "tags": ["Spain", "Italy", "Portugal"]
     },
     "sport": {
         "tags": ["football", "basketball", "voleyball"]
     },
     "color": {
         "tags": ["red", "green", "blue"]
     }
  }'</span>
</code></pre>
<blockquote>
<p>Example of response with real data</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabularyNameTwo"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tag2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tag3"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabularyNameOne"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tag2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tag3"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tag2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tag3"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tag2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tag3"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"newV"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"test1"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"test2"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"country"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"Spain"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"Italy"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"Portugal"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sport"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"football"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"basketball"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"voleyball"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"color"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"red"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"green"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"blue"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="deleting-relationships">Deleting relationships</h2>

<blockquote>
<p>Deleting relationships between a Vocabulary and a Dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/vocabulary/&lt;vocabulary-id&gt;
</code></pre>
<blockquote>
<p>Deleting relationships between a Vocabulary and a Widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/vocabulary/&lt;vocabulary-id&gt;
</code></pre>
<blockquote>
<p>Deleting relationships between a Vocabulary and a Layer</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/vocabulary/&lt;vocabulary-id&gt;
</code></pre>
<blockquote>
<p>Example of request with real data</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/942b3f38-9504-4273-af51-0440170ffc86/vocabulary/science
</code></pre>
<blockquote>
<p>Example of response with real data</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"country"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"Spain"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"Italy"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"Portugal"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"color"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"red"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"green"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"blue"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="getting-vocabularies-associated-to-a-resource">Getting Vocabularies associated to a Resource</h2>

<p>You can be request all vocabularies that are associated to a particular resource. It optionally accepts a <code class="prettyprint">app</code> or <code class="prettyprint">application</code> query parameter, that will filter the vocabulary&rsquo;s <code class="prettyprint">application</code>. If none is provided, <code class="prettyprint">rw</code> is used as default.</p>

<blockquote>
<p>Getting Vocabularies related with a Dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/vocabulary
</code></pre>
<blockquote>
<p>Getting Vocabularies related with a Widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/vocabulary
</code></pre>
<blockquote>
<p>Getting Vocabularies related with a Layer</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/vocabulary
</code></pre>
<blockquote>
<p>Example of request with real data</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/942b3f38-9504-4273-af51-0440170ffc86/vocabulary
</code></pre>
<blockquote>
<p>Example of response with real data</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"country"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"Spain"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"Italy"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"Portugal"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"color"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"red"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"green"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"blue"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="getting-a-single-relationship-broken-now">Getting a single relationship (broken now)</h2>

<blockquote>
<p>Getting a single relationship between a Vocabulary and a Dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/vocabulary/&lt;vocabulary-id&gt;
</code></pre>
<blockquote>
<p>Getting a single relationship between a Vocabulary and a Widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/vocabulary/&lt;vocabulary-id&gt;
</code></pre>
<blockquote>
<p>Getting a single relationship between a Vocabulary and a Layer</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/vocabulary/&lt;vocabulary-id&gt;
</code></pre>
<h2 id="getting-resources-common-use-case">Getting resources (COMMON USE CASE)</h2>

<p>There is also an endpoint available which accepts requests just indicating resource type and
the desired vocabulary-tag matching.</p>

<p>It currently supports DOUBLE-OR pattern matching, meaning the API will return
all resources that at least have one (or more) tags in a particular vocabulary. At the same time it will also apply an OR to the entities of other vocabulary-tag matchings.</p>

<p>The query has to be set in the url by the query params.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/vocabulary/find
</code></pre><pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/vocabulary/find
</code></pre><pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/vocabulary/find
</code></pre>
<blockquote>
<p>Example of response with real data</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET http://api.resourcewatch.org/v1/dataset/vocabulary/find?legacy<span class="o">=</span>cdi,coasts
</code></pre>
<h2 id="getting-all-vocabularies">Getting all vocabularies</h2>

<p>This endpoint is quite useful to have a quick overview of all existing vocabularies and resources.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/vocabulary
</code></pre>
<h2 id="finding-vocabularies-by-ids">Finding vocabularies by ids</h2>

<p>The <code class="prettyprint">ids</code> property is required in the body of the request. It can be either an array of ids or a string of comma-separated ids:</p>

<ul>
<li><code class="prettyprint">{&quot;ids&quot;: [&quot;112313&quot;, &quot;111123&quot;]}</code></li>
<li><code class="prettyprint">{&quot;ids&quot;: &quot;112313, 111123&quot;}</code></li>
</ul>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/vocabulary/find-by-ids <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "ids": [&lt;ids&gt;]
  }'</span>
</code></pre><pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/vocabulary/find-by-ids <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "ids": [&lt;ids&gt;]
  }'</span>
</code></pre><pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/vocabulary/find-by-ids <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "ids": [&lt;ids&gt;]
  }'</span>
</code></pre>
<blockquote>
<p>Example of request with real data</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/vocabulary/find-by-ids <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "ids": "942b3f38-9504-4273-af51-0440170ffc86, 08ff8183-48dc-457a-8924-bb4e7a87b8a8"
  }'</span>
</code></pre>
<blockquote>
<p>Example of response with real data</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"resource"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"08ff8183-48dc-457a-8924-bb4e7a87b8a8"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"legacy"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"cdi"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"inundation"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"national"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"united states"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"local"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"coasts"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"flooding"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"health"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"resource"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"Spain"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"Italy"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"Portugal"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"color"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"red"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"green"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"blue"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="vocabulary-creation">Vocabulary Creation</h2>

<p>As was mentioned before, it is possible to just create a new and empty vocabulary</p>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/vocabulary/vocabularyName <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "application": &lt;application&gt;,
   "name": &lt;vocabularyName&gt;
  }'</span>
</code></pre>
<p>It is also possible to update and delete an entire vocabulary. Said that, because
it&rsquo;s necessary to keep consistency between entities with weak relationship, these
operations are only available to SUPERADMINS.</p>

<h2 id="bulk-delete-of-resource-39-s-vocabulary">Bulk delete of resource&rsquo;s vocabulary</h2>

<blockquote>
<p>Deleting all Vocabulary associated with a Dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/:datasetId/vocabulary <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Deleting all Vocabulary associated with a Widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/datasetId/widget/:widgetId/vocabulary <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Deleting all Vocabulary associated with a Layer</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/datasetId/layer/:layerId/vocabulary <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<p>In order to use these endpoints, you need to meet one of the following criteria:</p>

<ul>
<li>being authenticated as a SUPERADMIN;</li>
<li>being authenticated as an ADMIN who has access to the apps of the resource associated (dataset/widget/layer);</li>
<li>being authenticated as a MANAGER who has access to the apps of the resource associated AND own the resource.</li>
</ul>

<p>All endpoints return <code class="prettyprint">200 OK</code> in case of success, along with the list of the deleted entities.</p>

          <h1 id="geostore">Geostore</h1>

<h2 id="what-is-geostore">What is Geostore</h2>

<p>If you are new to the RW API, or want to learn more about the concept of a geostore, we strongly encourage you to read the <a href="#geostore">geostore concept</a> documentation first. It gives you a brief and clear description of what a geostore is, and what it can do for you.</p>

<p>Once you&rsquo;ve read that section, you can come back here to learn more details about using the RW API Geostore feature, which aims to provide a comprehensive way to communicate geographic vector-data structures described using <a href="https://en.wikipedia.org/wiki/GeoJSON">GeoJSON</a> between platforms and microservices.</p>

<p><a href="index-rw.html#what-are-geostore-objects">Geostore objects</a>, describing things like the boundaries of countries, protected areas or land use types, have been uploaded by <a href="https://www.wri.org/">WRI</a>, its partner organizations, or by API users like you. They are particularly useful for combining with the range of <a href="#dataset">datasets</a> available in the RW API, for example to create national summaries or for making a specific analysis within your own user-defined region.</p>

<p>To find out more about accessing the geostore objects already available on the RW API, check out the documentation on <a href="#getting-geostore-objects">getting geostore objects</a>. A quick, visual way to view an existing geostore is by using the <a href="#get-geostore-by-geostore-id-and-view-at-geojson-io"><code class="prettyprint">/geostore/:id/view</code></a> endpoint.</p>

<p>You can also <a href="#create-a-geostore-object">create you own geostore objects</a> on the RW API, if you&rsquo;d like to share your data with the world, or if you are looking to use the RW API and its features to gain insights into your data.</p>

<h2 id="what-are-geostore-objects">What are Geostore objects</h2>

<p>Geostore objects contain <a href="https://en.wikipedia.org/wiki/GeoJSON">GeoJSON</a> <code class="prettyprint">FeatureCollection</code> objects (<code class="prettyprint">geojson</code>), with a single <code class="prettyprint">Feature</code> whose <code class="prettyprint">Geometry</code> has been checked for geometric validity, and have been assigned an identifier (<code class="prettyprint">id</code>, <code class="prettyprint">hash</code>) upon creation.</p>

<p>This identifier is a 128-bit hash generated by passing the <a href="#geostore">pre-processed GeoJSON string</a> through the <a href="https://en.wikipedia.org/wiki/MD5">MD5 message-digest algorithm</a>. This means that each identifier is a unique fingerprint of the GeoJSON string.</p>

<p>If you add an exact copy of your GeoJSON string, it will generate the same hash. But if any GeoJSON property is changed in any way, the generated hash will be different. Hence, the Geostore identifier provides the RW API a way to ensure that platforms and microservices are using <em>exactly</em> the same geographic structures. This also means that Geostore objects are static and cannot be modified.</p>

<p>To prevent overwriting of existing geostore objects, they contain a field indicated if the object is locked to editing (<code class="prettyprint">lock</code>); which can be <a href="#create-a-geostore-object">set when creating geostore objects</a>.</p>

<p>Also, during object creation the minimum bounding box enclosing all geometries in the GeoJSON (<code class="prettyprint">bbox</code>), and, if the geometries are type (Multi) Polygon, total surface area in hectares of the geometries (<code class="prettyprint">areaHa</code>) are added to the geostore. <em>Note these values are not calculated if supplied when creating a geostore.</em></p>

<p>Geostore objects can also be <a href="#create-using-a-provider-definition">created by getting a GeoJSON from provider API</a>; in which case the geostore will also include an object which gives information used to connect to the provider data source (<code class="prettyprint">provider</code>). At present the only provider definition supported is a <a href="https://carto.com/">Carto</a> table, using  <code class="prettyprint">&quot;type&quot;: &quot;carto&quot;</code>.</p>

<p>Finally, all geostore objects have a property for storing application specific attributes (<code class="prettyprint">info</code>), which has no formalized schema. Here, fields used for indexing, and metadata, related to use on different platforms are added.</p>

<blockquote>
<p>Overview of a geostore object</p>
</blockquote>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">id</code></td>
<td>string</td>
<td>A unique identifier for the geostore object in the form of a 128 bit <a href="https://en.wikipedia.org/wiki/MD5">MD5 hash</a> generated from the GeoJSON object.</td>
</tr>
<tr>
<td><code class="prettyprint">hash</code></td>
<td>string</td>
<td>A unique identifier for the geostore object in the form of a 128 bit <a href="https://en.wikipedia.org/wiki/MD5">MD5 hash</a> generated from the GeoJSON object.</td>
</tr>
<tr>
<td><code class="prettyprint">geojson</code></td>
<td>object</td>
<td>A valid <code class="prettyprint">FeatureCollection</code>, <code class="prettyprint">Feature</code>, or <code class="prettyprint">Geometry</code> <a href="https://geojson.org/">GeoJSON</a> object.</td>
</tr>
<tr>
<td><code class="prettyprint">provider</code></td>
<td>object</td>
<td>Optional <a href="#create-using-a-provider-definition">provider definition</a> used to fetch GeoJSON data from APIs.</td>
</tr>
<tr>
<td><code class="prettyprint">lock</code></td>
<td>string</td>
<td>Optional indication if the object is locked for editing</td>
</tr>
<tr>
<td><code class="prettyprint">areaHa</code></td>
<td>number</td>
<td>Optional total surface area in hectares of all Polygon and MultiPolygon geometries in the GeoJSON object.</td>
</tr>
<tr>
<td><code class="prettyprint">bbox</code></td>
<td>array</td>
<td>Array describing the <a href="https://en.wikipedia.org/wiki/Minimum_bounding_box">minimum bounding box</a> enclosing all of the geometries in the GeoJSON object, expressed as an array of the form min Longitude , min Latitude , max Longitude , max Latitude.</td>
</tr>
<tr>
<td><code class="prettyprint">info</code></td>
<td>object</td>
<td>Object that defines application specific properties, for example used for indexing or related to editing of the geostore object.</td>
</tr>
</tbody></table>

<h2 id="overview-of-available-endpoints">Overview of available endpoints</h2>

<p>The Geostore API consists of a number of endpoints to help users interact with geostore objects. Many of them are essentially helpers to make it easy to access geometries from useful data sources, such as:</p>

<ul>
<li><strong>Administrative areas</strong> (countries, regions, ect.) from the <a href="https://en.wikipedia.org/wiki/GADM">Database of Global Administrative Areas (GADM)</a>.</li>
<li><strong>Protected areas</strong> (world heritage sites, national parks, ect.) from the <a href="https://www.protectedplanet.net/c/world-database-on-protected-areas">The World Database on Protected Areas</a>.</li>
<li><strong>Land activity/use types</strong> (logging, mining, ect.) from the <a href="https://www.wri.org/">WRI</a> <a href="https://data.globalforestwatch.org/datasets/managed-forest-concessions">managed forest</a>, <a href="https://data.globalforestwatch.org/datasets/mining-concessions">mining</a>, and <a href="https://data.globalforestwatch.org/datasets/20398d4dc36e47bd92b559786670f270_1">oil palm</a> concessions, and <a href="https://wwf.panda.org">WWF</a>/<a href="https://www.resolve.ngo/about.htm">RESOLVE</a> <a href="https://data.globalforestwatch.org/datasets/tiger-conservation-landscapes">tiger conservation</a> datasets.<br></li>
</ul>

<p>As these data sets are periodically updated, these &ldquo;helper&rdquo; endpoints are updated to use the latest data. So unless you really need an older version of a data set, such as GADM, you should always use the latest endpoint version. See the table below to get an overview of what can be done; click on the description to get more details.</p>

<blockquote>
<p>Comparison of endpoint versions</p>
</blockquote>

<table><thead>
<tr>
<th>Version</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">v1</code></td>
<td>GADM version 2.8.</td>
</tr>
<tr>
<td><code class="prettyprint">v2</code></td>
<td>GADM version 3.6.</td>
</tr>
</tbody></table>

<blockquote>
<p>Overview of endpoints</p>
</blockquote>

<table><thead>
<tr>
<th>Method</th>
<th>Path</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>POST</td>
<td><code class="prettyprint">/v1/geostore</code></td>
<td><a href="index-rw.html#create-a-geostore-object">Create a geostore object</a></td>
</tr>
<tr>
<td>GET</td>
<td><code class="prettyprint">/v2/geostore/:id</code></td>
<td><a href="index-rw.html#get-a-geostore-object-by-geostore-id">Get a geostore object by Geostore id</a></td>
</tr>
<tr>
<td>POST</td>
<td><code class="prettyprint">/v2/geostore/find-by-ids</code></td>
<td><a href="index-rw.html#get-geostore-objects-by-geostore-ids">Get geostore objects by Geostore ids</a></td>
</tr>
<tr>
<td>GET</td>
<td><code class="prettyprint">/v2/geostore/:id/view</code></td>
<td><a href="index-rw.html#get-geostore-by-geostore-id-and-view-at-geojson-io">Get a geostore object by Geostore id and view at GeoJSON.io</a></td>
</tr>
<tr>
<td>GET</td>
<td><code class="prettyprint">/v2/geostore/admin/list</code></td>
<td><a href="index-rw.html#get-all-geostore-ids-names-and-country-codes">Get all Geostore ids, names and country codes</a></td>
</tr>
<tr>
<td>GET</td>
<td><code class="prettyprint">/v2/geostore/admin/:iso</code></td>
<td><a href="index-rw.html#get-geostore-by-country-code">Get a geostore object by country code</a></td>
</tr>
<tr>
<td>GET</td>
<td><code class="prettyprint">/v2/geostore/admin/:iso/:id1</code></td>
<td><a href="index-rw.html#get-geostore-by-country-code-and-gadm-admin-1-id">Get a geostore object by country code and GADM admin 1 id</a></td>
</tr>
<tr>
<td>GET</td>
<td><code class="prettyprint">/v2/geostore/admin/:iso/:id1/:id2</code></td>
<td><a href="index-rw.html#get-geostore-by-country-code-gadm-admin-1-and-admin-2-ids">Get a geostore object by country code, GADM admin 1 and admin 2 ids</a></td>
</tr>
<tr>
<td>GET</td>
<td><code class="prettyprint">/v2/geostore/wdpa/:id</code></td>
<td><a href="index-rw.html#get-geostore-by-world-database-on-protected-areas-id">Get a geostore object by WDPA id</a></td>
</tr>
<tr>
<td>GET</td>
<td><code class="prettyprint">/v2/geostore/use/:name/:id</code></td>
<td><a href="index-rw.html#get-geostore-by-land-use-type-keyword-and-id">Get a geostore object by Land Use Type name and id</a></td>
</tr>
<tr>
<td>POST</td>
<td><code class="prettyprint">/v1/geostore/area</code></td>
<td><a href="index-rw.html#calculate-the-area-of-a-geostore-object">Calculate the area of a provided Geostore object</a></td>
</tr>
</tbody></table>

<h2 id="create-a-geostore-object">Create a geostore object</h2>

<p>Geostore objects can be created in the RW API Geostore using a valid GeoJSON object or by selecting a row from a <a href="https://carto.com/">Carto</a> table.</p>

<blockquote>
<p>Errors for creating a geostore object</p>
</blockquote>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><code class="prettyprint">&lt;field&gt;</code>: <code class="prettyprint">&lt;field&gt;</code> can not be empty</td>
<td>Your are missing a required field value.</td>
</tr>
<tr>
<td>400</td>
<td><code class="prettyprint">&lt;field&gt;</code>: empty or invalid <code class="prettyprint">&lt;field&gt;</code></td>
<td>The provided value for <code class="prettyprint">&lt;field&gt;</code> is invalid. This is usually happens if an invalid value type is provided, but certain fields use more advanced validation rules, that may produce this error message if validation fails (ie: <code class="prettyprint">geojson</code>, which must be <code class="prettyprint">type:</code> <code class="prettyprint">FeatureCollection</code>, <code class="prettyprint">Feature</code>, or <code class="prettyprint">Geometry</code>).</td>
</tr>
<tr>
<td>400</td>
<td>provider: must be valid <list of valid providers></td>
<td>Your <code class="prettyprint">provider</code> <code class="prettyprint">type</code> value is invalid. The <code class="prettyprint">&lt;list of valid providers&gt;</code> will contain the list of providers that are supported.</td>
</tr>
</tbody></table>

<h3 id="create-using-a-geojson">Create using a GeoJSON</h3>

<p>Geostore objects can be created via the POST <code class="prettyprint">geostore</code> endpoint, which accepts as body a GeoJSON object (<code class="prettyprint">&lt;geojson&gt;</code>). This must be a <code class="prettyprint">FeatureCollection</code>, <code class="prettyprint">Feature</code> or <code class="prettyprint">Geometry</code>. If the object is correctly added to the Geostore a <code class="prettyprint">200</code> response is returned, as well as the new geostore object.</p>

<blockquote>
<p>Example request pattern</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/geostore/ <span class="se">\</span>
     -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
     -d <span class="s1">'{"geojson": &lt;geojson&gt;}'</span>
</code></pre>
<blockquote>
<p>Example URL request</p>
</blockquote>
<pre class="highlight shell"><code>curl --location --request POST <span class="s1">'https://api.resourcewatch.org/v1/geostore'</span> <span class="se">\</span>
--header <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
--data-raw <span class="s1">'{
   "geojson":{
      "type":"FeatureCollection",
      "features":[
         {
            "type":"Feature",
            "properties":{

            },
            "geometry":{
               "type":"Polygon",
               "coordinates":[
                  [
                     [
                        -4.4549560546875,
                        40.84706035607122
                     ],
                     [
                        -4.4549560546875,
                        41.30257109430557
                     ],
                     [
                        -3.5211181640624996,
                        41.30257109430557
                     ],
                     [
                        -3.5211181640624996,
                        40.84706035607122
                     ],
                     [
                        -4.4549560546875,
                        40.84706035607122
                     ]
                  ]
               ]
            }
         }
      ]
   }
}'</span>
</code></pre>
<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geoStore"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4b25676360d8bbd5106a022103e0cd28"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"geojson"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"crs"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                </span><span class="p">[</span><span class="w">
                                    </span><span class="p">[</span><span class="w">
                                        </span><span class="mf">-4.454956055</span><span class="p">,</span><span class="w">
                                        </span><span class="mf">40.847060356</span><span class="w">
                                    </span><span class="p">],</span><span class="w">
                                    </span><span class="p">[</span><span class="w">
                                        </span><span class="mf">-4.454956055</span><span class="p">,</span><span class="w">
                                        </span><span class="mf">41.302571094</span><span class="w">
                                    </span><span class="p">],</span><span class="w">
                                    </span><span class="p">[</span><span class="w">
                                        </span><span class="mf">-3.521118164</span><span class="p">,</span><span class="w">
                                        </span><span class="mf">41.302571094</span><span class="w">
                                    </span><span class="p">],</span><span class="w">
                                    </span><span class="p">[</span><span class="w">
                                        </span><span class="mf">-3.521118164</span><span class="p">,</span><span class="w">
                                        </span><span class="mf">40.847060356</span><span class="w">
                                    </span><span class="p">],</span><span class="w">
                                    </span><span class="p">[</span><span class="w">
                                        </span><span class="mf">-4.454956055</span><span class="p">,</span><span class="w">
                                        </span><span class="mf">40.847060356</span><span class="w">
                                    </span><span class="p">]</span><span class="w">
                                </span><span class="p">]</span><span class="w">
                            </span><span class="p">],</span><span class="w">
                            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Polygon"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4b25676360d8bbd5106a022103e0cd28"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"areaHa"</span><span class="p">:</span><span class="w"> </span><span class="mf">397372.34118232</span><span class="p">,</span><span class="w">
            </span><span class="s2">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="mf">-4.454956055</span><span class="p">,</span><span class="w">
                </span><span class="mf">40.847060356</span><span class="p">,</span><span class="w">
                </span><span class="mf">-3.521118164</span><span class="p">,</span><span class="w">
                </span><span class="mf">41.302571094</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"lock"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="create-using-a-provider-definition">Create using a provider definition</h3>

<p>Geostore objects can be created via the POST <code class="prettyprint">geostore</code> endpoint, which accepts as body a provider definition object (<code class="prettyprint">&lt;provider&gt;</code>), the API then fetches a GeoJSON from the provider, and adds it to the Geostore. If the object is correctly added to the Geostore a <code class="prettyprint">200</code> response is returned, as well as the new geostore object. At present the only provider definition supported is a <a href="https://carto.com/">Carto</a> table, using <code class="prettyprint">&quot;type&quot;: &quot;carto&quot;</code>.</p>

<p>If the specified <code class="prettyprint">table</code>, <code class="prettyprint">user</code>, or <code class="prettyprint">filter</code> is not recognized a <code class="prettyprint">400</code> response is returned with the error message &ldquo;Geojson not found&rdquo;.</p>

<blockquote>
<p>Overview of provider object</p>
</blockquote>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">type</code></td>
<td>string</td>
<td>Keyword of the provider</td>
</tr>
<tr>
<td><code class="prettyprint">table</code></td>
<td>string</td>
<td>Name of the provider table</td>
</tr>
<tr>
<td><code class="prettyprint">user</code></td>
<td>string</td>
<td>Provider username</td>
</tr>
<tr>
<td><code class="prettyprint">filter</code></td>
<td>string</td>
<td>Provider specific filter</td>
</tr>
</tbody></table>

<blockquote>
<p>Example request pattern</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/geostore <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{"provider": &lt;provider&gt;}'</span>
</code></pre>
<blockquote>
<p>Example URL request</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/geostore <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
        "provider":{
            "type": "carto",
            "table": "gfw_mining",
            "user": "wri-01",
            "filter": "cartodb_id=573"
        }
    }'</span>
</code></pre>
<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geoStore"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b3b2875affa75f145b4f3e5289fd47d7"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"geojson"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"crs"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">[</span><span class="w">
                  </span><span class="mf">14.26438308756265</span><span class="p">,</span><span class="w">
                  </span><span class="mf">14.062500000000002</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="p">[</span><span class="w">
                  </span><span class="mf">5.266007882805498</span><span class="p">,</span><span class="w">
                  </span><span class="mf">2.8125</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="p">[</span><span class="w">
                  </span><span class="mf">44.84029065139799</span><span class="p">,</span><span class="w">
                  </span><span class="mf">16.523437500000004</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="p">[</span><span class="w">
                  </span><span class="mf">-7.362466865535738</span><span class="p">,</span><span class="w">
                  </span><span class="mf">-3.1640625000000004</span><span class="w">
                </span><span class="p">],</span><span class="w">
              </span><span class="p">],</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MultiPoint"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b3b2875affa75f145b4f3e5289fd47d7"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carto"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gfw_mining"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wri-01"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"filter"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cartodb_id=573"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"areaHa"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="mf">-102.65625</span><span class="p">,</span><span class="w">
        </span><span class="mf">-29.688052749856787</span><span class="p">,</span><span class="w">
        </span><span class="mf">45.87890625</span><span class="p">,</span><span class="w">
        </span><span class="mf">57.79794388498275</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"lock"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="getting-geostore-objects">Getting geostore objects</h2>

<p>The fundamental way to read geometries from the RW APIs Geostore is by using Geostore ids. Using these identifiers you can ensure that you are always <a href="#geostore-objects">retrieving exactly the same <code class="prettyprint">Feature</code></a>. If you <a href="#create-a-geostore-object">add your own geostore objects</a> you will be using <a href="#get-geostore-by-geostore-id">these endpoints</a>.</p>

<p>Alternatively you may prefer to get selected geometries from the datasets already added to the RW API Geostore, such as the <a href="#overview-of-available-endpoints">latest administrative areas, protected areas, or land use types</a>. Note, these are periodically updated, and potentially both geometries and ids may change between versions. By design this means that, for example, the Geostore ids of countries change between versions. These geometries can also be simplified when reading them from the Geostore, using the parameter <code class="prettyprint">?simplify=&lt;value&gt;</code>, where <code class="prettyprint">&lt;value&gt;</code> is given to the simplification algorithm - <code class="prettyprint">0.005</code> usually works well.</p>

<h3 id="get-a-geostore-object-by-geostore-id">Get a geostore object by Geostore id</h3>

<p>Geostore objects can be retrieved via the GET <code class="prettyprint">geostore/:id</code> endpoint, which returns a single object selected from the Geostore using a single <a href="#geostore">Geostore id</a> (<code class="prettyprint">&lt;id&gt;</code>).</p>

<blockquote>
<p>Example request pattern</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v2/geostore/&lt;id&gt;
</code></pre>
<blockquote>
<p>Example URL request</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v2/geostore/ca38fa80a4ffa9ac6217a7e0bf71e6df
</code></pre>
<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geoStore"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ca38fa80a4ffa9ac6217a7e0bf71e6df"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"geojson"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"crs"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Polygon"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                </span><span class="p">[</span><span class="w">
                                    </span><span class="p">[</span><span class="w">
                                        </span><span class="mf">-5.273512601852417</span><span class="p">,</span><span class="w">
                                        </span><span class="mf">42.81137220349083</span><span class="w">
                                    </span><span class="p">],</span><span class="w">
                                    </span><span class="p">[</span><span class="w">
                                        </span><span class="mf">-5.273512601852417</span><span class="p">,</span><span class="w">
                                        </span><span class="mf">42.811803118457306</span><span class="w">
                                    </span><span class="p">],</span><span class="w">
                                    </span><span class="p">[</span><span class="w">
                                        </span><span class="mf">-5.272732079029083</span><span class="p">,</span><span class="w">
                                        </span><span class="mf">42.811803118457306</span><span class="w">
                                    </span><span class="p">],</span><span class="w">
                                    </span><span class="p">[</span><span class="w">
                                        </span><span class="mf">-5.272732079029083</span><span class="p">,</span><span class="w">
                                        </span><span class="mf">42.81137220349083</span><span class="w">
                                    </span><span class="p">],</span><span class="w">
                                    </span><span class="p">[</span><span class="w">
                                        </span><span class="mf">-5.273512601852417</span><span class="p">,</span><span class="w">
                                        </span><span class="mf">42.81137220349083</span><span class="w">
                                    </span><span class="p">]</span><span class="w">
                                </span><span class="p">]</span><span class="w">
                            </span><span class="p">]</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ca38fa80a4ffa9ac6217a7e0bf71e6df"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"areaHa"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3057556230214663</span><span class="p">,</span><span class="w">
            </span><span class="s2">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="mf">-5.273512601852417</span><span class="p">,</span><span class="w">
                </span><span class="mf">42.81137220349083</span><span class="p">,</span><span class="w">
                </span><span class="mf">-5.272732079029083</span><span class="p">,</span><span class="w">
                </span><span class="mf">42.811803118457306</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"lock"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h4 id="errors-for-getting-geostore-objects-by-id">Errors for getting geostore objects by id</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>404</td>
<td>Geostore not found.</td>
<td>A geostore with the id provided was not found.</td>
</tr>
</tbody></table>

<h3 id="get-geostore-by-geostore-id-and-view-at-geojson-io">Get geostore by Geostore id and view at GeoJSON.io</h3>

<p>Geostore objects can be retrieved and viewed via the GET <code class="prettyprint">geostore/:id/view</code> endpoint, which returns a URL allowing viewing of a single geostore object selected by <a href="#geostore-id">Geostore id</a> (<code class="prettyprint">&lt;id&gt;</code>)  at GeoSON.io.</p>

<blockquote>
<p>Example request pattern</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v2/geostore/&lt;id&gt;/view
</code></pre>
<blockquote>
<p>Example URL request</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v2/geostore/ca38fa80a4ffa9ac6217a7e0bf71e6df/view
</code></pre>
<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"view_link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://geojson.io/#data=data:application/json,%7B%22crs%22%3A%7B%7D%2C%22type%22%3A%22FeatureCollection%22%2C%22features%22%3A%5B%7B%22type%22%3A%22Feature%22%2C%22geometry%22%3A%7B%22type%22%3A%22Polygon%22%2C%22coordinates%22%3A%5B%5B%5B-5.273512601852417%2C42.81137220349083%5D%2C%5B-5.273512601852417%2C42.811803118457306%5D%2C%5B-5.272732079029083%2C42.811803118457306%5D%2C%5B-5.272732079029083%2C42.81137220349083%5D%2C%5B-5.273512601852417%2C42.81137220349083%5D%5D%5D%7D%2C%22properties%22%3Anull%7D%5D%7D"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h4 id="errors-for-viewing-geostore-objects-by-id">Errors for viewing geostore objects by id</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Geometry too large, please try again with a smaller geometry.</td>
<td>The Geostore provided is too large (more than 150k chars when stringified) and cannot be viewed.</td>
</tr>
<tr>
<td>404</td>
<td>Geostore not found.</td>
<td>A geostore with the id provided was not found.</td>
</tr>
</tbody></table>

<h3 id="get-geostore-objects-by-geostore-ids">Get geostore objects by Geostore ids</h3>

<p>Many geostore objects can be retrieved via the POST <code class="prettyprint">geostore/find-by-ids</code> endpoint, which returns an array of a geostore objects selected by an array of <a href="#geostore-objects">Geostore ids</a> (<code class="prettyprint">[&lt;id&gt;, &lt;id&gt;]</code>). In case of success, the returned response will contain an array with all of the geostore objects found and summary info is available in the root property <code class="prettyprint">info</code>.</p>

<blockquote>
<p>Example request pattern</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v2/geostore/find-by-ids <span class="se">\</span>
     -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
     -d <span class="s1">'{"geostores": [&lt;id&gt;, &lt;id&gt;]}'</span>
</code></pre>
<blockquote>
<p>Example URL request</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v2/geostore/find-by-ids <span class="se">\</span>
     -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
     -d <span class="s1">'{"geostores": ["35a6d982388ee5c4e141c2bceac3fb72", "8f77fe62cf15d5098ba0ee11c5126aa6"]}'</span>
</code></pre>
<blockquote>
<p>Example response (coordinates are truncated)</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"geostoreId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35a6d982388ee5c4e141c2bceac3fb72"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geoStore"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35a6d982388ee5c4e141c2bceac3fb72"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"geojson"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"crs"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                </span><span class="p">{</span><span class="w">
                                    </span><span class="s2">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                        </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                            </span><span class="err">...</span><span class="w">
                                        </span><span class="p">],</span><span class="w">
                                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MultiPolygon"</span><span class="w">
                                    </span><span class="p">},</span><span class="w">
                                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="w">
                                </span><span class="p">}</span><span class="w">
                            </span><span class="p">]</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="s2">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35a6d982388ee5c4e141c2bceac3fb72"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                        </span><span class="s2">"areaHa"</span><span class="p">:</span><span class="w"> </span><span class="mf">50662609.25209112</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="mf">-18.1604175567627</span><span class="p">,</span><span class="w">
                            </span><span class="mf">27.6384716033936</span><span class="p">,</span><span class="w">
                            </span><span class="mf">4.32819509506226</span><span class="p">,</span><span class="w">
                            </span><span class="mf">43.7915267944337</span><span class="w">
                        </span><span class="p">],</span><span class="w">
                        </span><span class="s2">"lock"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                            </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ESP"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Spain"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"geostoreId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8f77fe62cf15d5098ba0ee11c5126aa6"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geoStore"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8f77fe62cf15d5098ba0ee11c5126aa6"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"geojson"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"crs"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                </span><span class="p">{</span><span class="w">
                                    </span><span class="s2">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                        </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                            </span><span class="err">...</span><span class="w">
                                        </span><span class="p">],</span><span class="w">
                                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MultiPolygon"</span><span class="w">
                                    </span><span class="p">},</span><span class="w">
                                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="w">
                                </span><span class="p">}</span><span class="w">
                            </span><span class="p">]</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="s2">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8f77fe62cf15d5098ba0ee11c5126aa6"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                        </span><span class="s2">"areaHa"</span><span class="p">:</span><span class="w"> </span><span class="mf">54935531.53854849</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="mf">-5.14375114440907</span><span class="p">,</span><span class="w">
                            </span><span class="mf">41.3337516784668</span><span class="p">,</span><span class="w">
                            </span><span class="mf">9.5604162216186</span><span class="p">,</span><span class="w">
                            </span><span class="mf">51.08939743042</span><span class="w">
                        </span><span class="p">],</span><span class="w">
                        </span><span class="s2">"lock"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                            </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FRA"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"France"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"found"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"foundIds"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"35a6d982388ee5c4e141c2bceac3fb72"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"8f77fe62cf15d5098ba0ee11c5126aa6"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"returned"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h4 id="errors-for-getting-multiple-geostore-objects-by-id">Errors for getting multiple geostore objects by id</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>404</td>
<td>Geostore not found.</td>
<td>A geostore with the id provided was not found.</td>
</tr>
</tbody></table>

<h3 id="get-all-geostore-ids-names-and-country-codes">Get all Geostore ids, names and country codes</h3>

<p>All of the Geostore ids, names, and country ISO 3166-1 alpha-3 code values available from the GADM data source in the Geostore can be retrieved via the GET <code class="prettyprint">geostore/admin/list</code> endpoint, which returns an array of objects with the properties <code class="prettyprint">geostoreId</code>, <code class="prettyprint">name</code>, and <code class="prettyprint">iso</code>.</p>

<blockquote>
<p>Example URL request</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v2/geostore/admin/list
</code></pre>
<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="s2">"geostoreId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35a6d982388ee5c4e141c2bceac3fb72"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ESP"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Spain"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"geostoreId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8f77fe62cf15d5098ba0ee11c5126aa6"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FRA"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"France"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"geostoreId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1d568c183033da6c17cc28c4aecf1bcf"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cod"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Democratic Republic of the Congo"</span><span class="w">
    </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><em>Note - This endpoint does not return a unique array of iso codes and names.</em></p>

<h2 id="getting-predefined-geostores-for-commonly-used-geometries">Getting predefined geostores for commonly used geometries</h2>

<p>The endpoints described below allow API users to retrieve geostores representative of the boundaries of countries, GADM admin regions, WDPA and land use areas. These endpoints can be used as utility methods to retrieve commonly used geometries.</p>

<h3 id="get-geostore-by-country-code">Get geostore by country code</h3>

<blockquote>
<p>Example request pattern</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v2/geostore/admin/&lt;iso&gt;
</code></pre>
<blockquote>
<p>Example URL request</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v2/geostore/admin/ESP
</code></pre>
<blockquote>
<p>Example response (note coordinates are truncated)</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geoStore"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56f9a919e061d5edd10c042a8fcd31b6"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"geojson"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"crs"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                </span><span class="err">...</span><span class="w">
                            </span><span class="p">],</span><span class="w">
                            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MultiPolygon"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56f9a919e061d5edd10c042a8fcd31b6"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"areaHa"</span><span class="p">:</span><span class="w"> </span><span class="mf">50662609.2516529</span><span class="p">,</span><span class="w">
            </span><span class="s2">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="mf">-18.160417557</span><span class="p">,</span><span class="w">
                </span><span class="mf">27.638471603</span><span class="p">,</span><span class="w">
                </span><span class="mf">4.328195095</span><span class="p">,</span><span class="w">
                </span><span class="mf">43.791526794</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"lock"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ESP"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"id1"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"id2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"gadm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.8"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Spain"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Use the GET <code class="prettyprint">geostore/admin/:iso</code> endpoint to retrieve a geostore object representative of the boundaries of the country with <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3">ISO 3166-1 alpha-3 code</a> (<code class="prettyprint">&lt;iso&gt;</code>). The returned geometries can be simplified using the parameter <code class="prettyprint">?simplify=&lt;value&gt;</code>. Where <code class="prettyprint">&lt;value&gt;</code> is given to the simplification algorithm- 0.005 usually works well.</p>

<p><em>Note - The source of the geometries is GADM version 3.6.</em></p>

<h4 id="errors-for-getting-geostore-objects-by-country-code">Errors for getting geostore objects by country code</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>404</td>
<td>Geostore not found.</td>
<td>A geostore for the country ISO code provided was not found.</td>
</tr>
</tbody></table>

<h3 id="get-geostore-by-country-code-and-gadm-admin-1-id">Get geostore by country code and GADM admin 1 id</h3>

<blockquote>
<p>Example request pattern</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v2/geostore/admin/&lt;iso&gt;/&lt;id1&gt;
</code></pre>
<blockquote>
<p>Example URL request</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v2/geostore/admin/ESP/9
</code></pre>
<blockquote>
<p>Example response (note coordinates are truncated)</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geoStore"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7d1534d7c24b2f907c4ae37d11fc51fe"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"geojson"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"crs"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                </span><span class="err">...</span><span class="w">
                            </span><span class="p">],</span><span class="w">
                            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MultiPolygon"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7d1534d7c24b2f907c4ae37d11fc51fe"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"areaHa"</span><span class="p">:</span><span class="w"> </span><span class="mf">1036273.8136673134</span><span class="p">,</span><span class="w">
            </span><span class="s2">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="mf">-2.500030994</span><span class="p">,</span><span class="w">
                </span><span class="mf">41.909896851</span><span class="p">,</span><span class="w">
                </span><span class="mf">-0.726752043</span><span class="p">,</span><span class="w">
                </span><span class="mf">43.314189911</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"lock"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ESP"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"id1"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">
                </span><span class="s2">"id2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"gadm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.8"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Use the GET <code class="prettyprint">geostore/admin/:iso/:id1</code> endpoint to retrieve a geostore object representative of the boundaries of a <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3">ISO 3166-1 alpha-3 code</a> (<code class="prettyprint">&lt;iso&gt;</code>) and <a href="https://gadm.org/metadata.html">GADM admin level 1</a> id (<code class="prettyprint">&lt;id1&gt;</code>). The returned geometries can be simplified using the parameter <code class="prettyprint">?simplify=&lt;value&gt;</code>. Where <code class="prettyprint">&lt;value&gt;</code> is given to the simplification algorithm- 0.005 usually works well.</p>

<p><em>Note - The source of the geometries is GADM version 3.6.</em></p>

<h4 id="errors-for-getting-geostore-objects-by-country-code-and-gadm-admin-1-id">Errors for getting geostore objects by country code and GADM admin 1 id</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>404</td>
<td>Geostore not found.</td>
<td>A geostore for the combination of country ISO code and GADM admin 1 id provided was not found.</td>
</tr>
</tbody></table>

<h3 id="get-geostore-by-country-code-gadm-admin-1-and-admin-2-ids">Get geostore by country code, GADM admin 1 and admin 2 ids</h3>

<blockquote>
<p>Example request pattern</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v2/geostore/admin/&lt;iso&gt;/&lt;id1&gt;/&lt;id2&gt;
</code></pre>
<blockquote>
<p>Example URL request</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v2/geostore/admin/ESP/1/2
</code></pre>
<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geoStore"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"214e74a9e8702f78354ed5cb0297c10d"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"geojson"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"crs"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span><span class="w">
                            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MultiPolygon"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"214e74a9e8702f78354ed5cb0297c10d"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"areaHa"</span><span class="p">:</span><span class="w"> </span><span class="mf">744195.8099038196</span><span class="p">,</span><span class="w">
            </span><span class="s2">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="mf">-6.47347212</span><span class="p">,</span><span class="w">
                </span><span class="mf">35.9995842</span><span class="p">,</span><span class="w">
                </span><span class="mf">-5.08662891</span><span class="p">,</span><span class="w">
                </span><span class="mf">37.05246735</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"lock"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"simplifyThresh"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00005</span><span class="p">,</span><span class="w">
                </span><span class="s2">"gadm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.6"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cádiz"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"id2"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="s2">"id1"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ESP"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Use the GET <code class="prettyprint">geostore/admin/:iso/:id1/:id2</code> endpoint to retrieve a geostore object representative of the boundaries of a <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3">ISO 3166-1 alpha-3 code</a> (<code class="prettyprint">&lt;iso&gt;</code>),  <a href="https://gadm.org/metadata.html">GADM admin level 1</a> id (<code class="prettyprint">&lt;id1&gt;</code>), and <a href="https://gadm.org/metadata.html">GADM admin level 2</a> id (<code class="prettyprint">&lt;id2&gt;</code>). The returned geometries can be simplified using the parameter <code class="prettyprint">?simplify=&lt;value&gt;</code>. Where <code class="prettyprint">&lt;value&gt;</code> is given to the simplification algorithm- 0.005 usually works well.</p>

<p><em>Note - The source of the geometries is GADM version 3.6.</em></p>

<h4 id="errors-for-getting-geostore-objects-by-country-code-gadm-admin-1-id-and-admin-2-id">Errors for getting geostore objects by country code, GADM admin 1 id and admin 2 id</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>404</td>
<td>Geostore not found.</td>
<td>A geostore for the combination of country ISO code, GADM admin 1 id and admin 2 id provided was not found.</td>
</tr>
</tbody></table>

<h3 id="get-geostore-by-world-database-on-protected-areas-id">Get geostore by World Database on Protected Areas id</h3>

<blockquote>
<p>Example request pattern</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v2/geostore/wdpa/&lt;id&gt;
</code></pre>
<blockquote>
<p>Example URL request</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v2/geostore/wdpa/142809
</code></pre>
<blockquote>
<p>Example response (note coordinates are truncated)</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geoStore"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"88db597b6bcd096fb80d1542cdc442be"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"geojson"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"crs"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                </span><span class="err">...</span><span class="w">
                                </span><span class="p">],</span><span class="w">
                            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MultiPolygon"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"88db597b6bcd096fb80d1542cdc442be"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"areaHa"</span><span class="p">:</span><span class="w"> </span><span class="mf">5081.838068566336</span><span class="p">,</span><span class="w">
            </span><span class="s2">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="mf">-6.031685272</span><span class="p">,</span><span class="w">
                </span><span class="mf">36.160220287</span><span class="p">,</span><span class="w">
                </span><span class="mf">-5.879245686</span><span class="p">,</span><span class="w">
                </span><span class="mf">36.249656987</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"lock"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"wdpaid"</span><span class="p">:</span><span class="w"> </span><span class="mi">142809</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Use the GET <code class="prettyprint">geostore/admin/wdpa/:id</code> endpoint to retrieve a geostore object representative of the boundaries of a <a href="https://www.protectedplanet.net/">World Database on Protected Areas</a> (WDPA) with id (<code class="prettyprint">&lt;id&gt;</code>) provided. To find valid WDPA id values check the link above.</p>

<p><em>Note marine protected areas are NOT included</em></p>

<h4 id="errors-for-getting-geostore-objects-by-wdpa-id">Errors for getting geostore objects by WDPA id</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>404</td>
<td>Geostore not found.</td>
<td>A geostore for the WDPA id provided was not found.</td>
</tr>
</tbody></table>

<h3 id="get-geostore-by-land-use-type-keyword-and-id">Get geostore by Land Use Type keyword and id</h3>

<blockquote>
<p>Example request pattern</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v2/geostore/use/&lt;name&gt;/&lt;id&gt;
</code></pre>
<blockquote>
<p>Example URL request</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v2/geostore/use/logging/1
</code></pre>
<blockquote>
<p>Example response (note coordinates are truncated)</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geoStore"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bd5feac1b0dd4e73f3a1553889807622"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"geojson"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"crs"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span><span class="w">
                            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MultiPolygon"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bd5feac1b0dd4e73f3a1553889807622"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"areaHa"</span><span class="p">:</span><span class="w"> </span><span class="mf">45978.43408272762</span><span class="p">,</span><span class="w">
            </span><span class="s2">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="mf">102.691404026</span><span class="p">,</span><span class="w">
                </span><span class="mf">-0.248440312</span><span class="p">,</span><span class="w">
                </span><span class="mf">103.036606</span><span class="p">,</span><span class="w">
                </span><span class="mf">-0.071735991</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"lock"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"use"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gfw_logging"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"simplify"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Use the GET <code class="prettyprint">geostore/admin/use/:name/:id</code> endpoint to retrieve a geostore object representative of the boundaries of a <a href="#land-use-types">Land Use Type</a> keyword (<code class="prettyprint">&lt;name&gt;</code>) and  Land Use Type object id (<code class="prettyprint">&lt;id&gt;</code>). </p>

<p>Geostore objects for five land use types are available: </p>

<ul>
<li>Tiger conservation landscapes (<code class="prettyprint">tiger_conservation_landscapes</code>)</li>
<li><a href="https://wri-01.carto.com/tables/gfw_oil_palm/public/map">Oil Palm production (<code class="prettyprint">oilpalm</code>)</a></li>
<li><a href="http://api.resourcewatch.org/v1/dataset/c2142922-84d9-4564-8216-a4867b9e48c5">Mining activities (<code class="prettyprint">mining</code>)</a></li>
<li><a href="https://wri-01.carto.com/tables/gfw_woodfiber/public/map">Wood fiber production (<code class="prettyprint">fiber</code>)</a></li>
<li><a href="https://wri-01.carto.com/tables/osm_logging_roads/public/map">Forest logging activities (<code class="prettyprint">logging</code>)</a>.</li>
</ul>

<p>The returned geometries can be simplified using the parameter <code class="prettyprint">?simplify=&lt;value&gt;</code>. Where <code class="prettyprint">&lt;value&gt;</code> is given to the simplification algorithm- 0.005 usually works well.</p>

<p><em>Note - each of the land use types actually represents an individual dataset, each with different geographical extents and temporal coverage, see the <a href="#overview-of-available-endpoints">dataset urls</a> for details</em>  </p>

<h4 id="errors-for-getting-geostore-objects-by-land-use-type">Errors for getting geostore objects by land use type</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>404</td>
<td>Geostore not found.</td>
<td>A geostore for the specified <code class="prettyprint">&lt;name&gt;</code> and <code class="prettyprint">&lt;id&gt;</code> was not found.</td>
</tr>
</tbody></table>

<h2 id="calculate-the-area-of-a-geostore-object">Calculate the area of a geostore object</h2>

<p>If you have a GeoJSON geometry and you intend to know the area that your geometry occupies or what is the bounding box for your geometry, you can use the POST <code class="prettyprint">v2/geostore/area</code> endpoint to calculate the area of your geometry.</p>

<blockquote>
<p>Example request pattern</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v2/geostore/area <span class="se">\</span>
  -d <span class="s1">'{"geojson": &lt;geojson&gt;}'</span>
</code></pre>
<blockquote>
<p>Example URL request</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v2/geostore/area <span class="se">\</span>
  -d <span class="s1">'{
      "geojson":{
        "type": "Polygon",
        "coordinates": [
            [
                [-0.1758,51.2894],
                [8.4375,51.1793],
                [6.8555,47.5172],
                [-0.1758,51.2894]
            ]
        ]
    }}'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geomArea"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="mf">-0.1758</span><span class="p">,</span><span class="w">
                </span><span class="mf">47.5172</span><span class="p">,</span><span class="w">
                </span><span class="mf">8.4375</span><span class="p">,</span><span class="w">
                </span><span class="mf">51.2894</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"areaHa"</span><span class="p">:</span><span class="w"> </span><span class="mf">12797498.414088473</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h4 id="errors-for-calculating-the-area-of-a-geostore-object">Errors for calculating the area of a geostore object</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><code class="prettyprint">geojson, esrijson or provider required.</code></td>
<td>You need to provide the GeoJSON for the geometry you intend to calculate the area.</td>
</tr>
</tbody></table>

          <h1 id="subscriptions">Subscriptions</h1>

<h2 id="what-is-a-subscription">What is a subscription?</h2>

<p><em>Note: We strongly recommend that you read the <a href="#dataset">dataset concept</a> and <a href="#dataset6">dataset endpoints</a> sections before proceeding.</em></p>

<p>A subscription allows you to get notified of updates on a datasets&rsquo; data - either for every update, or for updates restricted to geographical areas of your interest. For example, you can use subscriptions to subscribe to deforestation alerts (<a href="http://api.resourcewatch.org/v1/dataset/61170ad0-9d6a-4347-8e58-9b551eeb341e">GLAD alerts dataset</a>) in the Amazon forest, or track fire alerts (<a href="http://api.resourcewatch.org/v1/dataset/64c948a6-5e34-4ef2-bb69-6a6535967bd5">VIIRS fire alerts dataset</a>) in your area of residence.</p>

<p>In the following sections, we will cover how you can interact and manage subscriptions in the RW API. We will see how you can customize subscriptions so that we only get notified for changes in a dataset&rsquo;s data for specific geographic regions. You will learn how to use them to get notified via email or calls to a URL you provide. We will also dive into subscription lifecycle, and understand how we can confirm subscriptions, resend confirmation emails and how to unsubscribe and stop receiving notifications.</p>

<h2 id="subscription-lifecycle">Subscription lifecycle</h2>

<p>In this section, you will learn about the lifecycle of a subscription. This will help you understand how you can best use subscriptions to meet your goals. The first step for using subscriptions is understanding which data you want to subscribe - for this, we recommend <a href="index-rw.html#getting-all-datasets">searching the existing datasets</a> in the WRI API (or maybe even <a href="index-rw.html#creating-a-dataset">creating a new one</a>). Once you are certain of the dataset you wish to subscribe, the next step is ensuring that this dataset is subscribable.</p>

<h3 id="subscribable-datasets">Subscribable datasets</h3>

<blockquote>
<p>Example of a subscribable dataset</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example dataset"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"app"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carto"</span><span class="p">,</span><span class="w">
  </span><span class="err">...</span><span class="w">
  </span><span class="s2">"subscribable"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"test"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"dataQuery"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELECT * FROM dataset-name  WHERE 'reported_date' &gt;= '{{begin}}' AND 'reported_date' &lt;= '{{end}}' AND 'number_dead' &gt; 0 ORDER BY reported_date DESC LIMIT 10"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"subscriptionQuery"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELECT COUNT(*) FROM dataset-name WHERE 'reported_date' &gt;= '{begin}' AND 'reported_date' &lt;= '{end}' AND 'number' &gt; 0"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>While you can create a subscription for <em>any</em> dataset, some conditions must be met by the dataset for its corresponding subscriptions to be functional and actually work as described here.</p>

<p>In order to support a functional subscription, a dataset must have some queries defined in its <code class="prettyprint">subscribable</code> property. In this property, of type object, one (or many) sub-objects should be declared. Please note that you can define multiple keys in the <code class="prettyprint">subscribable</code> object, and each key will be evaluated separately and trigger its own updates. Each object inside the <code class="prettyprint">subscribable</code> property must define two queries:</p>

<ul>
<li><code class="prettyprint">dataQuery</code>, which will be evaluated as the subscription&rsquo;s content - i.e. this is what has been updated since the last check on the updates of this dataset.</li>
<li><code class="prettyprint">subscriptionQuery</code>, which will be evaluated to check if a subscription has changed since the last update. This query should return a single row with the count of updated items since the last update check. If the value returned by this query is greater than 0, then all the subscriptions that reference this dataset will receive a notification.</li>
</ul>

<p>The example on the side defines the <code class="prettyprint">subscribable</code> object for an example dataset, and this object contains a the key <code class="prettyprint">test</code>, including both a <code class="prettyprint">dataQuery</code> and a <code class="prettyprint">subscriptionQuery</code>. For more details on how you can modify the <code class="prettyprint">subscribable</code> property of a dataset, check out the documentation on <a href="#updating-a-dataset">updating a dataset</a>. The keys in the subscribable object (e.g. <code class="prettyprint">test</code>) are just for organizational purposes, and they won&rsquo;t be used in any way from the subscription&rsquo;s perspective.</p>

<p>Both queries can contain two special keywords: <code class="prettyprint">{begin}</code> and <code class="prettyprint">{end}</code>. These will be replaced with ISO-formatted dates on runtime, with the datetime in which the subscription was last evaluated, and the datetime at the time of evaluation, respectively.</p>

<p><em>Please note that, for readability purposes, the special characters in example on the side are not properly escaped. Don&rsquo;t forget all special characters must be properly escaped for the queries to be correctly executed.</em></p>

<h3 id="creating-and-confirming-the-subscription">Creating and confirming the subscription</h3>

<p>You have your dataset ready to be subscribed. The next steps would be to actually create the subscription - check the <a href="#creating-a-subscription">docs for creating subscriptions</a> for detailed information on how to do that.</p>

<p>After creating the subscription, an email is sent with a confirmation link. You need to click this link in order to confirm the notification and start receiving notifications. You can check if the subscription is confirmed or not by looking at the <code class="prettyprint">confirmed</code> field of the subscription object. Check more information about confirming subscriptions in the <a href="#confirming-a-subscription">confirming a subscription</a> section.</p>

<p>If, for some reason, you have lost the confirmation email, you can check the <a href="#resending-the-subscription-confirmation-email">resending confirmation emails</a> section for more information on how to resend the confirmation email.</p>

<p>At any point, you might want to stop receiving email or webhook notifications - if that is the case, you can check the <a href="#unsubscribing">unsubscribing</a> section for details on how to stop receiving notifications for your subscriptions.</p>

<p>The same subscription can subscribe to multiple datasets - for that, you just need to provide all the dataset ids you intend to subscribe in either the <code class="prettyprint">datasets</code> or <code class="prettyprint">datasetsQuery</code> fields of the subscription on creation. However, a subscription can only notify a single email at a time - if you intend to receive subscription notifications on multiple emails, you&rsquo;ll need to create multiple subscriptions.</p>

<h3 id="how-are-subscription-notifications-sent">How are subscription notifications sent?</h3>

<blockquote>
<p>Example of POST body data for a webhook notification:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="s2">"downloadUrls"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"csv"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://production-api.globalforestwatch.org/glad-alerts/download/?period=2020-02-22,2020-03-04&amp;gladConfirmOnly=False&amp;aggregate_values=False&amp;aggregate_by=False&amp;geostore=423e5dfb0448e692f97b590c61f45f22&amp;format=csv"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"json"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://production-api.globalforestwatch.org/glad-alerts/download/?period=2020-02-22,2020-03-04&amp;gladConfirmOnly=False&amp;aggregate_values=False&amp;aggregate_by=False&amp;geostore=423e5dfb0448e692f97b590c61f45f22&amp;format=json"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"alert_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GLAD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10/10/2019 00:10 UTC"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"alert_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GLAD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11/10/2019 00:10 UTC"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"alert_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GLAD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12/10/2019 00:10 UTC"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"alert_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GLAD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13/10/2019 00:10 UTC"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"alert_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GLAD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14/10/2019 00:10 UTC"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"alert_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GLAD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15/10/2019 00:10 UTC"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"layerSlug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"glad-alerts"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"alert_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Subscription for Amazônia, Brazil"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"selected_area"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Amazônia, Brazil"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"unsubscribe_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://production-api.globalforestwatch.org/subscriptions/5ea996383efbd0119327b372/unsubscribe?redirect=true&amp;lang=en"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"subscriptions_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.globalforestwatch.org/my-gfw?lang=en"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"dashboard_link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.globalforestwatch.org/dashboards/aoi/5ea996383efbd0119327b372?lang=en"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"alert_link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.globalforestwatch.org/map/aoi/5ea996383efbd0119327b372?lang=en&amp;map%5BcanBound%5D=true&amp;map%5Bdatasets%5D%5B0%5D%5Bdataset%5D=bfd1d211-8106-4393-86c3-9e1ab2ee1b9b&amp;map%5Bdatasets%5D%5B0%5D%5Blayers%5D%5B0%5D=8e4a527d-1bcd-4a12-82b0-5a108ffec452&amp;map%5Bdatasets%5D%5B0%5D%5BtimelineParams%5D%5BstartDate%5D=2020-04-15&amp;map%5Bdatasets%5D%5B0%5D%5BtimelineParams%5D%5BendDate%5D=2020-04-22&amp;map%5Bdatasets%5D%5B0%5D%5BtimelineParams%5D%5BtrimEndDate%5D=2020-04-22&amp;map%5Bdatasets%5D%5B1%5D%5Bdataset%5D=0b0208b6-b424-4b57-984f-caddfa25ba22&amp;map%5Bdatasets%5D%5B1%5D%5Blayers%5D%5B0%5D=b45350e3-5a76-44cd-b0a9-5038a0d8bfae&amp;map%5Bdatasets%5D%5B1%5D%5Blayers%5D%5B1%5D=cc35432d-38d7-4a03-872e-3a71a2f555fc&amp;mainMap%5BshowAnalysis%5D=true"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"alert_date_begin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-04-15"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"alert_date_end"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-04-22"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Subscriptions support two types of notifications: emails or webhook requests is performed. Both notifications are checked and sent every day, assuming that the dataset data has changed since the last notification sent.</p>

<p>Webhook notifications are sent as POST requests to the URL saved in the subscription. You can check on the side an example of the data that is sent in the body of the POST call. Please note that the webhook POST body data can change, based on the dataset chosen to receive notifications.</p>

<p>You can see in the image below an example of an email notification for GLAD deforestation alerts:</p>

<p><img src="images/subscription-email-example.png" alt="Subscription email example" /></p>

<h3 id="summary-of-the-subscription-lifecycle">Summary of the subscription lifecycle</h3>

<ul>
<li>First, you should know which dataset to use and when its data gets updated.</li>
<li>You ensure that the dataset is subscribable - if not, you should write the subscription queries and update the dataset.</li>
<li>You create a subscription.</li>
<li>You get a confirmation email and click on the link to confirm the subscription.</li>
<li>Done! You will now get an email every day with the updates to the dataset data <em>(note that if there are no updates, no email is sent)</em>.</li>
<li>Later, you can unsubscribe or delete the subscription.</li>
</ul>

<h2 id="getting-subscriptions-owned-by-the-request-user">Getting subscriptions owned by the request user</h2>

<blockquote>
<p>Getting the subscriptions for the request user:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/subscriptions"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"587cc014f3b3f6280058e478"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test subscription"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-16T12:45:08.434Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57a063da096c4eda523e99ae"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EMAIL"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example@wri.org"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"viirs-active-fires"</span><span class="p">],</span><span class="w">
        </span><span class="s2">"datasetsQuery"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50601ff9257df221e808af427cb47701"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"confirmed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint will allow you to get all the subscriptions owned by the user who performed the request (identified by the access token). To use this endpoint, you must be logged in (i.e. a token must be provided). In the sections below, we’ll explore how you can customize this endpoint call to match your needs.</p>

<p>For a detailed description of each field, check out the <a href="#subscription-reference">Subscription reference</a> section.</p>

<h3 id="filters">Filters</h3>

<p>The <code class="prettyprint">v1/subscriptions</code> endpoint supports the following optional query parameters as filters:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Default value</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td style="text-align: center">Application to which the subscription is associated. Read more about this field <a href="index-rw.html#applications">here</a>.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">&lsquo;gfw&rsquo;</td>
</tr>
<tr>
<td>env</td>
<td style="text-align: center">The environment to which the subscription is associated. Read more about this field in the <a href="index-rw.html#environments">Environments concept section</a>.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">&#39;production&rsquo;</td>
</tr>
</tbody></table>

<p><strong>Deprecation notice:</strong> the default value for the <code class="prettyprint">application</code> filter (currently, <code class="prettyprint">gfw</code>) will be removed and the <code class="prettyprint">application</code> filter will then have no default value. We recommend reviewing your application to ensure you set and load the correct <code class="prettyprint">application</code> explicitly.</p>

<h3 id="errors-for-getting-subscriptions">Errors for getting subscriptions</h3>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>No valid token was provided in the request headers.</td>
</tr>
</tbody></table>

<h2 id="getting-a-subscription-by-id">Getting a subscription by id</h2>

<blockquote>
<p>Example call for getting a subscription by its id:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/subscriptions/&lt;subscription_id&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"587cc014f3b3f6280058e478"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test subscription"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-16T12:45:08.434Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57a063da096c4eda523e99ae"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EMAIL"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example@wri.org"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"viirs-active-fires"</span><span class="p">],</span><span class="w">
      </span><span class="s2">"datasetsQuery"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="s2">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50601ff9257df221e808af427cb47701"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"confirmed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>If you know the id of a subscription, then you can access it directly by performing a GET request to the <code class="prettyprint">v1/subscriptions/:id</code> endpoint. Keep in mind that this will only match subscriptions that are owned by the user who performed the request.</p>

<h3 id="errors-for-getting-subscriptions-by-id">Errors for getting subscriptions by id</h3>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>ID is not valid</td>
<td>The id provided is not a valid subscription id.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>No valid token was provided in the request headers.</td>
</tr>
<tr>
<td>404</td>
<td>Subscription not found</td>
<td>Either no subscription exists with the provided id, or the subscription with the id provided is not owned by the user who performed the request.</td>
</tr>
</tbody></table>

<h2 id="creating-a-subscription">Creating a subscription</h2>

<blockquote>
<p>Example POST request to create a subscription providing the bare minimum body fields:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/v1/subscriptions"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "datasets": "20cc5eca-8c63-4c41-8e8e-134dcf1e6d76",
    "resource": {
      "type": "EMAIL",
      "content": "example@wri.org"
    },
    "params": {},
    "application": "gfw",
    "language": "en"
  }'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5eea1e6cfd754e001b28cb2b"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-17T13:45:16.222Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ed75dd2a82a420010ed066b"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EMAIL"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example@wri.org"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"20cc5eca-8c63-4c41-8e8e-134dcf1e6d76"</span><span class="p">],</span><span class="w">
      </span><span class="s2">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="s2">"confirmed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"datasetsQuery"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This section will guide you through the process of creating a basic subscription in the RW API. Creating a subscription can be done by any logged user using a POST request and passing the relevant data as body fields. The supported body fields are as defined on the <a href="#subscription-reference">subscription reference</a> section, but the minimum field list you must specify for all subscriptions are:</p>

<ul>
<li><code class="prettyprint">datasets</code> or <code class="prettyprint">datasetsQuery</code></li>
<li><code class="prettyprint">resource</code> (which must include both <code class="prettyprint">resource.type</code> and <code class="prettyprint">resource.content</code>)</li>
<li><code class="prettyprint">params</code></li>
<li><code class="prettyprint">application</code></li>
<li><code class="prettyprint">language</code></li>
</ul>

<p>If the creation of the subscription is successful, the HTTP response code will be 200 OK, and the response body will contain the created subscription object. Please note that <strong>subscriptions must be confirmed</strong> before they become active - refer to the <a href="#subscription-lifecycle">subscription lifecycle</a> for more details on this.</p>

<h3 id="errors-for-creating-subscriptions">Errors for creating subscriptions</h3>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><code class="prettyprint">&lt;field&gt;</code> required</td>
<td>You didn&rsquo;t provide one of the required fields.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>No valid token was provided in the request headers.</td>
</tr>
</tbody></table>

<h3 id="defining-the-datasets">Defining the datasets</h3>

<p>You will need to provide the dataset ids to which your subscription will watch for updates. In order to do so, you&rsquo;ll need to provide one of two fields when creating a subscription:</p>

<ul>
<li><code class="prettyprint">datasets</code> - this field is a simple array of dataset ids. Each dataset will be individually evaluated for updates, and it will trigger an email if the <code class="prettyprint">subscriptionsQuery</code> returns greater than 0.</li>
<li><code class="prettyprint">datasetsQuery</code> is an alternative way of defining the datasets to subscribe: using this field, you have the advantage of being able to define a different threshold for sending the email (i.e. the email is sent if the <code class="prettyprint">subscriptionQuery</code> returns a count greater than the threshold defined in the <code class="prettyprint">datasetsQuery</code> object). For more details on the structure of the objects inside <code class="prettyprint">datasetsQuery</code>, please check the <a href="index-rw.html#subscription-reference">subscription model reference</a>.</li>
</ul>

<h3 id="customizing-the-geographic-area-for-the-subscription">Customizing the geographic area for the subscription</h3>

<p>When it comes to geo-referenced data, subscriptions are intrinsically tied to a geographic area of interest. This association enables users to create subscriptions to be notified of changes in the data of a dataset, but only if there are changes in the data of the dataset relative to the concrete geographic area of the world they are interested in. The specification of the geographic information for the subscription should be done in the <code class="prettyprint">params</code> field of the subscription.</p>

<h4 id="subscribing-to-an-area-of-interest">Subscribing to an area of interest</h4>

<blockquote>
<p>Creating a subscription providing the id of an area of interest in the params field:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/v1/subscriptions"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "datasets": ["&lt;dataset-id&gt;"],
    "params": {
      "area": "35a6d982388ee5c4e141c2bceac3fb72"
    },
    "application": "gfw",
    "language": "en",
    "env": "production",
    "resource": {
      "type": "EMAIL",
      "content": "email@address.com"
    }
  }'</span>
</code></pre>
<p>A subscription can refer to a specific area of interest that has been created using the <a href="#areas">RW API Areas service</a>. If this is the case, you should first <a href="#create-area">create your area of interest</a>, grab its id and provide it in the <code class="prettyprint">params.area</code> field of the request body when creating the subscription.</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">params</code></td>
<td style="text-align: center">Geographic area of the subscription</td>
<td style="text-align: right">Object</td>
</tr>
<tr>
<td><code class="prettyprint">params.area</code></td>
<td style="text-align: center">Id of area of interest from the <a href="#areas">RW API Areas service</a></td>
<td style="text-align: right">String</td>
</tr>
</tbody></table>

<h4 id="subscribing-to-a-country-country-region-or-subregion">Subscribing to a country, country region or subregion</h4>

<blockquote>
<p>Creating a subscription to a whole country:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/v1/subscriptions"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "datasets": ["&lt;dataset-id&gt;"],
    "params": {
      "iso": {
        "country": "BRA"
      }
    },
    "application": "gfw",
    "language": "en",
    "env": "production",
    "resource": {
      "type": "EMAIL",
      "content": "email@address.com"
    }
  }'</span>
</code></pre>
<blockquote>
<p>Creating a subscription to a country subregion:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/v1/subscriptions"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "datasets": ["&lt;dataset-id&gt;"],
    "params": {
      "iso": {
        "country": "BRA",
        "region": "1",
        "subregion": "2"
      }
    },
    "application": "gfw",
    "language": "en",
    "env": "production",
    "resource": {
      "type": "EMAIL",
      "content": "email@address.com"
    }
  }'</span>
</code></pre>
<p>A subscription can refer to a country, one of its regions, or a subregion within a region. Countries are identified by their ISO 3166-1 alpha-3 code - check <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3">here</a> for a list of all the available country codes. Regions and subregions are identified by their respective GADM id, which can be obtained from GADM&rsquo;s dataset <a href="https://gadm.org/data.html">here</a>. When creating a subscription for a region, the country ISO must be specified. For subscribing to a subregion, both region and country ISO must be provided.</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">params.iso.country</code></td>
<td style="text-align: center">ISO 3-letter code of the country to subscribe</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td><code class="prettyprint">params.iso.region</code></td>
<td style="text-align: center">Region id to subscribe</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td><code class="prettyprint">params.iso.subregion</code></td>
<td style="text-align: center">Subregion id to subscribe (optional)</td>
<td style="text-align: right">String</td>
</tr>
</tbody></table>

<h4 id="subscribing-to-a-protected-area-from-world-database-on-protected-areas">Subscribing to a protected area from World Database on Protected Areas</h4>

<blockquote>
<p>Creating a subscription providing a WDPA id in the params field:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/v1/subscriptions"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "datasets": ["&lt;dataset-id&gt;"],
    "params": {
      "wdpaid": "32054"
    },
    "application": "gfw",
    "language": "en",
    "env": "production",
    "resource": {
      "type": "EMAIL",
      "content": "email@address.com"
    }
  }'</span>
</code></pre>
<p>A subscription can refer to a specific protected area by the id of that area in the World Database on Protected Areas. If this is the case, you should provide the WDPA id in the <code class="prettyprint">params.wdpaid</code> field when creating the subscription. IDs of protected areas worldwide can be obtained from the <a href="https://www.protectedplanet.net/">Protected Planet website</a>.</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">params.wdpaid</code></td>
<td style="text-align: center">Id of the protected area in the WDPA</td>
<td style="text-align: right">String</td>
</tr>
</tbody></table>

<h4 id="subscribing-to-a-rw-api-geostore">Subscribing to a RW API geostore</h4>

<blockquote>
<p>Creating a subscription providing the id of a geostore obtained from the RW API in the params field:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/v1/subscriptions"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "datasets": ["&lt;dataset-id&gt;"],
    "params": {
      "geostore": "35a6d982388ee5c4e141c2bceac3fb72"
    },
    "application": "gfw",
    "language": "en",
    "env": "production",
    "resource": {
      "type": "EMAIL",
      "content": "email@address.com"
    }
  }'</span>
</code></pre>
<p>A subscription can refer to a specific geostore that has been created using the <a href="#geostore">RW API Geostore service</a>. If this is the case, you should <a href="#create-geostore">create your geostore</a> and use its id in the <code class="prettyprint">params.geostore</code> field of the request body when creating the subscription.</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">params.geostore</code></td>
<td style="text-align: center">Id of the RW API geostore to subscribe to.</td>
<td style="text-align: right">String</td>
</tr>
</tbody></table>

<h4 id="subscribing-to-a-gfw-data-api-geostore">Subscribing to a GFW Data API geostore</h4>

<blockquote>
<p>Creating a subscription providing the id of a geostore obtained from the GFW Data API in the params field:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/v1/subscriptions"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "datasets": ["&lt;dataset-id&gt;"],
    "params": {
      "geostoreDataApi": "35a6d982388ee5c4e141c2bceac3fb72"
    },
    "application": "gfw",
    "language": "en",
    "env": "production",
    "resource": {
      "type": "EMAIL",
      "content": "email@address.com"
    }
  }'</span>
</code></pre>
<p>A subscription can refer to a specific geostore that has been created using the GFW Data API. If this is the case, you should check the docs for the GFW Data API and create your geostore, then use its id in the <code class="prettyprint">params.geostoreDataApi</code> field of the request body when creating the subscription.</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">params.geostoreDataApi</code></td>
<td style="text-align: center">Id of the GFW Data API geostore to subscribe to.</td>
<td style="text-align: right">String</td>
</tr>
</tbody></table>

<h4 id="subscribing-to-land-use-areas">Subscribing to land use areas</h4>

<blockquote>
<p>Creating a subscription providing the id of a land use area in the params field:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/v1/subscriptions"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "datasets": ["&lt;dataset-id&gt;"],
    "params": {
      "use": "mining",
      "useid": "234"
    },
    "application": "gfw",
    "language": "en",
    "env": "production",
    "resource": {
      "type": "EMAIL",
      "content": "email@address.com"
    }
  }'</span>
</code></pre>
<p>A subscription can refer to a land use area provided by different datasets. At this point, the following land use datasets are supported: <code class="prettyprint">mining</code> for mining areas, <code class="prettyprint">logging</code> for Congo Basin logging roads, <code class="prettyprint">oilpalm</code> for palm oil plantations or <code class="prettyprint">fiber</code> for wood fiber plantations. If this is the case, you should provide the name of the land use dataset you wish to use in the <code class="prettyprint">params.use</code> field, and the id of the area in the <code class="prettyprint">params.useid</code> field of the request body when creating the subscription.</p>

<p>The ids to be used for land use areas can be obtained from the following CartoDB datasets:</p>

<ul>
<li>Mining area IDs can be obtained by querying <a href="http://api.resourcewatch.org/v1/dataset/c2142922-84d9-4564-8216-a4867b9e48c5">this dataset</a>.</li>
<li>Palm oil plantation IDs can be obtained from <a href="https://wri-01.carto.com/tables/gfw_oil_palm/public/map">this CartoDB table</a>.</li>
<li>Wood fiber plantation IDs can be obtained from <a href="https://wri-01.carto.com/tables/gfw_woodfiber/public/map">this CartoDB table</a>.</li>
<li>Congo Basin logging road IDs can be obtained from <a href="https://wri-01.carto.com/tables/osm_logging_roads/public/map">this CartoDB table</a>.</li>
</ul>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">params.use</code></td>
<td style="text-align: center">The type of land use you want to subscribe to. Can be one of <code class="prettyprint">mining</code>, <code class="prettyprint">logging</code>, <code class="prettyprint">oilpalm</code> or <code class="prettyprint">fiber</code>.</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td><code class="prettyprint">params.useid</code></td>
<td style="text-align: center">The id of the land use area you want to subscribe to.</td>
<td style="text-align: right">String</td>
</tr>
</tbody></table>

<h2 id="updating-a-subscription">Updating a subscription</h2>

<blockquote>
<p>Example PATCH request for updating a subscription by id:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH <span class="s2">"https://api.resourcewatch.org/v1/subscriptions/&lt;subscription_id&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "datasets": ["20cc5eca-8c63-4c41-8e8e-134dcf1e6d76"],
    "params": {
      "geostore": "35a6d982388ee5c4e141c2bceac3fb72"
    },
    "application": "rw",
    "language": "fr",
    "env": "staging",
    "resource": {
      "type": "EMAIL",
      "content": "email@address.com"
    }
  }'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee79291a67d9a001b11043a"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-15T15:24:01.806Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ed75dd2a82a420010ed066b"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EMAIL"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email@address.com"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"20cc5eca-8c63-4c41-8e8e-134dcf1e6d76"</span><span class="p">],</span><span class="w">
      </span><span class="s2">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35a6d982388ee5c4e141c2bceac3fb72"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"confirmed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"datasetsQuery"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"staging"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>You can update subscriptions associated with you user account by using the PATCH <code class="prettyprint">v1/subscriptions/:id</code> endpoint. Updating a subscription follows the same validations as when creating a new one - i.e. all required field values must be provided, even if they remain the same. Values for fields other than the following are optional. The minimum fields list you must specify to update a subscription is:</p>

<ul>
<li><code class="prettyprint">datasets</code> or <code class="prettyprint">datasetsQuery</code></li>
<li><code class="prettyprint">resource</code> (which much include <code class="prettyprint">resource.type</code> and <code class="prettyprint">resource.content</code>)</li>
<li><code class="prettyprint">params</code></li>
<li><code class="prettyprint">application</code></li>
<li><code class="prettyprint">language</code></li>
</ul>

<p>If the update of the subscription is successful, the HTTP response code will be 200 OK, and the response body will contain the updated subscription object.</p>

<p><em>Note: Updating a subscription does not require confirming it. A confirmed subscription will stay confirmed after an update.</em></p>

<h3 id="errors-for-updating-subscriptions">Errors for updating subscriptions</h3>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><code class="prettyprint">&lt;field&gt;</code> required</td>
<td>You didn&rsquo;t provide one of the required fields.</td>
</tr>
<tr>
<td>400</td>
<td>Id is not valid</td>
<td>The id provided is not valid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>No valid token was provided in the request headers.</td>
</tr>
<tr>
<td>404</td>
<td>Subscription not found</td>
<td>Either a subscription with the id provided does not exist or it is not owned by the user who performed the request.</td>
</tr>
</tbody></table>

<h2 id="deleting-subscriptions">Deleting subscriptions</h2>

<blockquote>
<p>Example DELETE request for deleting a subscription by its id:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE <span class="s2">"https://api.resourcewatch.org/v1/subscriptions/&lt;subscription_id&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee79291a67d9a001b11043a"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-15T15:24:01.806Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ed75dd2a82a420010ed066b"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EMAIL"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email@address.com"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"20cc5eca-8c63-4c41-8e8e-134dcf1e6d76"</span><span class="p">],</span><span class="w">
      </span><span class="s2">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35a6d982388ee5c4e141c2bceac3fb72"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"confirmed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"datasetsQuery"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"staging"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>To delete a subscription associated with your user account, you should use the DELETE <code class="prettyprint">v1/subscriptions/:id</code> endpoint. If the deletion of the subscription is successful, the HTTP response code will be 200 OK, and the response body will contain the deleted subscription object.</p>

<h3 id="errors-for-deleting-subscriptions">Errors for deleting subscriptions</h3>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Id is not valid</td>
<td>The id provided is not valid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>No valid token was provided in the request headers.</td>
</tr>
<tr>
<td>404</td>
<td>Subscription not found</td>
<td>Either a subscription with the id provided does not exist or it is not owned by the user who performed the request.</td>
</tr>
</tbody></table>

<h2 id="confirming-a-subscription">Confirming a subscription</h2>

<blockquote>
<p>Example GET request to confirm a subscription:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/subscriptions/&lt;subscription_id&gt;/confirm"</span>
</code></pre>
<p>Upon creation of the subscription, a confirmation email is sent to the email of the user who created the subscription. This email will contain a link, which you will need to click in order to confirm the subscription. You can also confirm the subscription by performing a GET request to the <code class="prettyprint">v1/subscriptions/:id/confirm</code> endpoint, as exemplified on the side.</p>

<p><em>Manually calling this endpoint will redirect you to the GFW application.</em></p>

<h2 id="resending-the-subscription-confirmation-email">Resending the subscription confirmation email</h2>

<blockquote>
<p>Example GET request to resend the confirmation email for a subscription:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/subscriptions/&lt;subscription_id&gt;/send_confirmation"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<p>For convenience, the RW API offers an additional endpoint to resend the confirmation email. In order to do this, you should perform a GET request to the <code class="prettyprint">v1/subscriptions/:id/send_confirmation</code>. As with most of the other subscription endpoints, please keep in mind that you must be authenticated in order to use this endpoint.</p>

<p>This endpoint does not change the subscription - i.e. if the subscription was already confirmed, it stays that way. The confirmation email will always be sent, regardless if the subscription is confirmed or not.</p>

<p><em>Manually calling this endpoint will redirect you to the GFW application.</em></p>

<h2 id="unsubscribing">Unsubscribing</h2>

<blockquote>
<p>Example GET request to unsubscribe:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/subscriptions/&lt;subscription_id&gt;/unsubscribe"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<p><strong>Note: When you unsubscribe, the underlying subscription resource is deleted.</strong>.</p>

<p>You can use the endpoint <code class="prettyprint">v1/subscriptions/:id/unsubscribe</code> (exemplified on the side) for unsubscribing from a subscription. As with most of the other subscription endpoints, please keep in mind that you must be authenticated in order to use this endpoint.</p>

<h2 id="subscription-statistics">Subscription statistics</h2>

<p>The following section details the endpoints that can be used to access statistics on the usage of subscriptions.</p>

<p><strong>The usage of the following endpoints is restricted to ADMIN users.</strong></p>

<h3 id="general-subscription-statistics">General subscription statistics</h3>

<blockquote>
<p>Example GET request to obtain general subscription statistics:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/subscriptions/statistics?start=:start&amp;end=:end"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"topSubscriptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
    </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
    </span><span class="s2">"wdpa"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="s2">"use"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"numSubscriptions"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"totalSubscriptions"</span><span class="p">:</span><span class="w"> </span><span class="mi">6000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"usersWithSubscriptions"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"totalEmailsSentInThisQ"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"totalEmailsSended"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"usersWithSubscription"</span><span class="p">:</span><span class="w"> </span><span class="mi">119</span><span class="p">,</span><span class="w">
  </span><span class="s2">"newUsers"</span><span class="p">:</span><span class="w"> </span><span class="mi">210</span><span class="p">,</span><span class="w">
  </span><span class="s2">"groupStatistics"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"glad-alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
      </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w">
      </span><span class="s2">"use"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"wdpa"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">
      </span><span class="s2">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="mi">1305</span><span class="p">,</span><span class="w">
      </span><span class="s2">"countries"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"CHL"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"IDN"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="err">...</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"regions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"1"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"2"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="err">...</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"wdpas"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"130"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"34043"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
        </span><span class="err">...</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"countryTop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDN"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"regionTop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"nameRegion"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
        </span><span class="s2">"nameCountry"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDN"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"wdpaTop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">34043</span><span class="p">,</span><span class="w">
        </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"prodes-loss"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
    </span><span class="s2">"umd-loss-gain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
    </span><span class="s2">"terrai-alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
    </span><span class="s2">"viirs-active-fires"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
    </span><span class="s2">"imazon-alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
    </span><span class="s2">"forma250GFW"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
    </span><span class="s2">"forma-alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
    </span><span class="s2">"story"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
    </span><span class="s2">"63f34231-7369-4622-81f1-28a144d17835"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The <code class="prettyprint">v1/subscriptions/statistics</code> endpoint can be used to access all the data regarding the subscription notifications that have been sent.</p>

<h4 id="filters">Filters</h4>

<p>This endpoint supports the following query parameters as filters:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Default</th>
<th style="text-align: right">Example</th>
</tr>
</thead><tbody>
<tr>
<td>start</td>
<td style="text-align: center">The start of the date range to fetch the statistics. <strong>This parameter is required.</strong></td>
<td style="text-align: right">String</td>
<td style="text-align: right">None</td>
<td style="text-align: right">01-01-2020</td>
</tr>
<tr>
<td>end</td>
<td style="text-align: center">The end of the date range to fetch the statistics. <strong>This parameter is required.</strong></td>
<td style="text-align: right">String</td>
<td style="text-align: right">None</td>
<td style="text-align: right">02-20-2020</td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">The application for which the statistics will be fetched. Read more about this field <a href="index-rw.html#applications">here</a>.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">&#39;gfw&rsquo;</td>
<td style="text-align: right">&#39;rw&rsquo;</td>
</tr>
</tbody></table>

<h3 id="grouped-subscription-statistics">Grouped subscription statistics</h3>

<blockquote>
<p>Example GET request to obtain grouped subscription statistics:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v1/subscriptions/statistics-group?start=:start&amp;end=:end"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"glad-alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
    </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w">
    </span><span class="s2">"use"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"wdpa"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">
    </span><span class="s2">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="mi">1305</span><span class="p">,</span><span class="w">
    </span><span class="s2">"countries"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"CHL"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"IDN"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="err">...</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"regions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"1"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"2"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="err">...</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"wdpas"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"130"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"34043"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
      </span><span class="err">...</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"countryTop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDN"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"regionTop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"nameRegion"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
      </span><span class="s2">"nameCountry"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDN"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"wdpaTop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">34043</span><span class="p">,</span><span class="w">
      </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"prodes-loss"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
  </span><span class="s2">"umd-loss-gain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
  </span><span class="s2">"terrai-alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
  </span><span class="s2">"viirs-active-fires"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
  </span><span class="s2">"imazon-alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
  </span><span class="s2">"forma250GFW"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
  </span><span class="s2">"forma-alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
  </span><span class="s2">"story"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
  </span><span class="s2">"63f34231-7369-4622-81f1-28a144d17835"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The <code class="prettyprint">v1/subscriptions/statistics-group</code> endpoint can be used to access data regarding the subscription notifications that have been sent, grouped by the the dataset of the subscription. The output of this endpoint is a subset of the output of the <code class="prettyprint">v1/subscriptions/statistics</code> endpoint.</p>

<h4 id="filters">Filters</h4>

<p>This endpoint supports the following query parameters as filters:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Default</th>
<th style="text-align: right">Example</th>
</tr>
</thead><tbody>
<tr>
<td>start</td>
<td style="text-align: center">The start of the date range to fetch the statistics. <strong>This parameter is required.</strong></td>
<td style="text-align: right">String</td>
<td style="text-align: right">None</td>
<td style="text-align: right">01-01-2020</td>
</tr>
<tr>
<td>end</td>
<td style="text-align: center">The end of the date range to fetch the statistics. <strong>This parameter is required.</strong></td>
<td style="text-align: right">String</td>
<td style="text-align: right">None</td>
<td style="text-align: right">02-20-2020</td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">The application for which the statistics will be fetched. Read more about this field <a href="index-rw.html#applications">here</a>.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">&#39;gfw&rsquo;</td>
<td style="text-align: right">&#39;rw&rsquo;</td>
</tr>
</tbody></table>

<h2 id="subscription-reference">Subscription reference</h2>

<p>This section gives you a complete view at the properties that are maintained as part of a subscription. When interacting with a subscription (on get, on create, etc) you will find most of these properties available to you, although they may be organized in a slightly different structure (ie: on get, everything but the <code class="prettyprint">id</code> is nested inside an <code class="prettyprint">attributes</code> object).</p>

<p>You can find more details in the <a href="https://github.com/gfw-api/gfw-subscription-api/blob/develop/app/src/models/subscription.js">source code</a>.</p>

<table><thead>
<tr>
<th>Filter</th>
<th>Type</th>
<th>Required</th>
<th>Default value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Yes</td>
<td>(auto-generated)</td>
<td>Unique Id of the subscription. Auto generated on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>No</td>
<td></td>
<td>The name of the subscription.</td>
</tr>
<tr>
<td>confirmed</td>
<td>Boolean</td>
<td>No</td>
<td>false</td>
<td>If the subscription is confirmed or not. Cannot be modified by users, only through the usage of the confirm and unsubscribe endpoints. (TODO: missing refs!)</td>
</tr>
<tr>
<td>resource</td>
<td>Object</td>
<td>Yes</td>
<td></td>
<td>An object containing the data for who (or what) should be notified on dataset data changes.</td>
</tr>
<tr>
<td>resource.type</td>
<td>Enum</td>
<td>Yes</td>
<td></td>
<td>The type of resource to be notified. Can take the values of <code class="prettyprint">EMAIL</code> (for an email notification) or <code class="prettyprint">URL</code> for a webhook notification.</td>
</tr>
<tr>
<td>resource.content</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>The object to be notified: should be a valid email case <code class="prettyprint">resource.type</code> is <code class="prettyprint">EMAIL</code>, and a valid URL case <code class="prettyprint">resource.type</code> is <code class="prettyprint">URL</code>.</td>
</tr>
<tr>
<td>datasets</td>
<td>Array</td>
<td>No</td>
<td><code class="prettyprint">[]</code></td>
<td>An array of dataset ids that this subscription is tracking.</td>
</tr>
<tr>
<td>datasetsQuery</td>
<td>Array</td>
<td>No</td>
<td><code class="prettyprint">[]</code></td>
<td>An alternative way of stating the datasets that this subscription is tracking. This field is an array of objects, check the rows below to see which properties each object should have.</td>
</tr>
<tr>
<td>datasetsQuery[0].id</td>
<td>String</td>
<td>No</td>
<td></td>
<td>An identifier for the dataset being subscribed.</td>
</tr>
<tr>
<td>datasetsQuery[0].type</td>
<td>String</td>
<td>No</td>
<td></td>
<td>A type for the dataset being subscribed.</td>
</tr>
<tr>
<td>datasetsQuery[0].threshold</td>
<td>Number</td>
<td>No</td>
<td>0</td>
<td>The threshold to be considered when checking for updates in the dataset&rsquo;s data. By default, it takes the value the value 0, but you can customize it to only get notified if there are at least (for instance) 5 updates to the dataset&rsquo;s data.</td>
</tr>
<tr>
<td>datasetsQuery[0].lastSentDate</td>
<td>Date</td>
<td>No</td>
<td>(auto-generated)</td>
<td>Value automatically updated to have set the last date when updates were detected in this dataset.</td>
</tr>
<tr>
<td>datasetsQuery[0].lastSentDate</td>
<td>Date</td>
<td>No</td>
<td>(auto-generated)</td>
<td>This value is automatically updated with the historical data of all the updates detected in the dataset&rsquo;s data.</td>
</tr>
<tr>
<td>params</td>
<td>Object</td>
<td>No</td>
<td><code class="prettyprint">{}</code></td>
<td>Determines the area of interest that this subscription should track. Can contain information to narrow the updates being tracked (especially in the case of geo-referenced data).</td>
</tr>
<tr>
<td>userId</td>
<td>String</td>
<td>Yes</td>
<td>(auto-populated)</td>
<td>Id of the user who owns the subscription. Set automatically on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>language</td>
<td>String</td>
<td>No</td>
<td><code class="prettyprint">&#39;en&#39;</code></td>
<td>The language for this subscription. Useful for customizing email notifications according to the language of the subscription. Possible values include <code class="prettyprint">&#39;en&#39;</code>, <code class="prettyprint">&#39;es&#39;</code>, <code class="prettyprint">&#39;fr&#39;</code>, <code class="prettyprint">&#39;pt&#39;</code> or <code class="prettyprint">&#39;zh&#39;</code>.</td>
</tr>
<tr>
<td>application</td>
<td>String</td>
<td>Yes</td>
<td><code class="prettyprint">&#39;gfw&#39;</code></td>
<td>Applications associated with this subscription. Read more about this field <a href="index-rw.html#applications">here</a>.</td>
</tr>
<tr>
<td>env</td>
<td>String</td>
<td>Yes</td>
<td><code class="prettyprint">&#39;production&#39;</code></td>
<td>Environment to which the subscription belongs. Read more about this field in the <a href="index-rw.html#environments">Environments concept section</a>.</td>
</tr>
<tr>
<td>createdAt</td>
<td>Date</td>
<td>No</td>
<td>(auto-populated)</td>
<td>Automatically maintained date of when the subscription was created. Cannot be modified by users.</td>
</tr>
<tr>
<td>updatedAt</td>
<td>Date</td>
<td>No</td>
<td>(auto-populated)</td>
<td>Automatically maintained date of when the subscription was last updated. Cannot be modified by users.</td>
</tr>
</tbody></table>

          <h1 id="favorites">Favorites</h1>

<p>The users can save their own favorites resources of the API.</p>

<aside class="notice">
Remember — All favorite endpoints need to be authenticated.
</aside>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td style="text-align: center">Name</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>resourceId</td>
<td style="text-align: center">Id of the resource</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>resourceType</td>
<td style="text-align: center">Type of resource</td>
<td style="text-align: right">Text (dataset, layer, widget)</td>
</tr>
<tr>
<td>userId</td>
<td style="text-align: center">Id of the owner user</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>createdAt</td>
<td style="text-align: center">Creation date</td>
<td style="text-align: right">Date</td>
</tr>
</tbody></table>

<h2 id="create-favorite">Create Favorite</h2>

<p>To create a favorite, you need to define all next fields in the request body. The required fields that compose a favorite are:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>resourceId</td>
<td style="text-align: center">Id of the resource</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>resourceType</td>
<td style="text-align: center">Type of resource</td>
<td style="text-align: right">Text (dataset, layer, widget)</td>
</tr>
</tbody></table>

<blockquote>
<p>To create a favorite, you have to do a POST with the following body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/favourite <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "resourceType":"&lt;resourceType&gt;",
   "resourceId": "&lt;resourceId&gt;"
  }'</span>
</code></pre>
<h2 id="get-favorites">Get favorites</h2>

<p>This endpoint returns the favorites of the logged user.</p>

<blockquote>
<p>To get all favorite of the logged user, you have to do a GET request:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/favourite <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<p>You can also retrieve all data about the resources by including the query parameter &ldquo;include=true&rdquo; in the request.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/favourite?include<span class="o">=</span><span class="nb">true</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<h2 id="get-favorite-by-id">Get favorite by id</h2>

<p>This endpoint returns the favorite with id of the param. If the favorite belongs to other user or not exist, the endpoint returns 400.</p>

<blockquote>
<p>To get the favorite by id, you have to do a GET request:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/favourite/:id <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<h2 id="delete-favorite">Delete favorite</h2>

<p>This endpoint deletes the favorite with id of the param. If the favorite belongs to other user or not exist, the endpoint returns 400.</p>

<blockquote>
<p>To delete the favorite by id, you have to do a DELETE request:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/favourite/:id <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
          <h1 id="graph">Graph</h1>

<p>The following graph endpoints are available</p>

<h2 id="list-concepts">List concepts</h2>

<p>Returns a list including all the concepts present in the graph</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/graph/query/list-concepts
</code></pre>
<h3 id="query-example">Query example</h3>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"europe"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Europe"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"CONCEPT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"GEOGRAPHY"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"numberOfDatasetsTagged"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"damage"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Damage"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"destruction"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"CONCEPT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"TOPIC"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"numberOfDatasetsTagged"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guernsey"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Guernsey"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"CONCEPT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"GEOGRAPHY"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"numberOfDatasetsTagged"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="get-inferred-concepts">Get inferred concepts</h2>

<p>This endpoint returns the set of concepts that are inferred from the set passed as a parameter</p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Values</th>
<th style="text-align: right">Required</th>
</tr>
</thead><tbody>
<tr>
<td>concepts</td>
<td style="text-align: center">List of concepts</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any Text, values separated by commas</td>
<td style="text-align: right">Yes</td>
</tr>
</tbody></table>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/graph/query/concepts-inferred?concepts<span class="o">=</span>&lt;concept_list&gt;
</code></pre>
<h3 id="example">Example</h3>

<p>Concepts inferred from the set: [&lsquo;spain&rsquo;, &#39;raster&rsquo;]</p>
<pre class="highlight plaintext"><code>https://api.resourcewatch.org/v1/graph/query/concepts-inferred?concepts=spain,raster
</code></pre><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"location"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Location"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"CONCEPT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"TOPIC"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eu"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EU"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"European Union"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"CONCEPT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"GEOGRAPHY"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"raster"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Raster"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"CONCEPT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"DATA_TYPE"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oecd"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OECD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"Organisation for Economic Co-operation and Development"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"CONCEPT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"GEOGRAPHY"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"schengen_area"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Schengen Area"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"CONCEPT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"GEOGRAPHY"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"country"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Country"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"CONCEPT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"GEOGRAPHY"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"continent"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Continent"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"CONCEPT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"GEOGRAPHY"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"global"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Global"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"CONCEPT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"GEOGRAPHY"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"general"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"General"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"CONCEPT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"TOPIC"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"spain"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Spain"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"CONCEPT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"GEOGRAPHY"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dataset"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"CONCEPT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"DATA_TYPE"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"europe"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Europe"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"CONCEPT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"GEOGRAPHY"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="concepts-39-ancestors">Concepts&rsquo; ancestors</h2>

<p>This endpoint returns the ancestors from the list of concepts provided</p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Values</th>
<th style="text-align: right">Required</th>
</tr>
</thead><tbody>
<tr>
<td>concepts</td>
<td style="text-align: center">List of concepts</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any Text, values separated by commas</td>
<td style="text-align: right">Yes</td>
</tr>
</tbody></table>
<pre class="highlight shell"><code>https://api.resourcewatch.org/v1/graph/query/concepts-ancestors?concepts<span class="o">=</span>&lt;concept_list&gt;
</code></pre>
<h3 id="example">Example</h3>

<p>Ancestors of the concepts from the set: [&#39;forest_cover&rsquo;, &#39;landslide&rsquo;]</p>
<pre class="highlight plaintext"><code>https://api.resourcewatch.org/v1/graph/query/concepts-ancestors?concepts=forest_cover,landslide
</code></pre><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"indicator"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Indicator"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"CONCEPT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"TOPIC"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"forest"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Forest"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"CONCEPT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"TOPIC"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"natural_disaster"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Natural disaster"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"CONCEPT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"TOPIC"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"natural_phenomena"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Natural phenomena"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"CONCEPT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"TOPIC"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="similar-datasets">Similar datasets</h2>

<p>Returns a set of datasets that are similar to the dataset provider sorted by their degree of similarity.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/graph/query/similar-dataset/&lt;dataset-id&gt;
</code></pre>
<h3 id="parameters-available">Parameters available</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Values</th>
<th style="text-align: right">Required</th>
</tr>
</thead><tbody>
<tr>
<td>published</td>
<td style="text-align: center">Include only published datasets</td>
<td style="text-align: right">Boolean</td>
<td style="text-align: right">true/false</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>app</td>
<td style="text-align: center">List of applications datasets should belong to (at least one of them). Read more about this field <a href="index-rw.html#applications">here</a>.</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any text, values separated by commas</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>env</td>
<td style="text-align: center">Include only datasets with at least one of the specified environments - read more about this field in the <a href="index-rw.html#environments">Environments concept section</a>.</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">One or more values from [&#39;production&rsquo;, &#39;preproduction&rsquo;]</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>limit</td>
<td style="text-align: center">Maximum number of datasets returned by the endpoint</td>
<td style="text-align: right">Integer</td>
<td style="text-align: right">A positive integer (3 by default)</td>
<td style="text-align: right">No</td>
</tr>
</tbody></table>

<h3 id="example">Example</h3>

<p>Datasets that are similar to the dataset with id <code class="prettyprint">63a7a997-695d-4629-b6e9-9b169f5c69b</code> including only those that are <strong>published</strong> with a <strong>limit of 6 results</strong> in total, datasets from both <code class="prettyprint">production</code> and <code class="prettyprint">preproduction</code> environments are included.</p>
<pre class="highlight plaintext"><code>https://api.resourcewatch.org/v1/graph/query/similar-dataset/63a7a997-695d-4629-b6e9-9b169f5c69bf?published=true&amp;env=production,preproduction&amp;app=rw&amp;limit=6
</code></pre><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0a59f415-ee0b-4d19-96f7-c7304c152e1b"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"concepts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"global"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"raster"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"geospatial"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0087944f-871c-44bc-b4d9-cd5acfc27023"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"concepts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"global"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"raster"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"geospatial"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0303127a-70b0-4164-9251-d8162615d058"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"concepts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"raster"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"geospatial"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05b7c688-09ba-4f33-90ea-185a1039df43"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"concepts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"global"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"geospatial"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"050f4146-566c-4a6d-9aaa-b49ab66a3090"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"concepts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"global"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"geospatial"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00abb46f-34e2-4bf7-be30-1fb0b1de022f"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"concepts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"global"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"geospatial"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="similar-datasets-including-ancestors">Similar datasets including ancestors</h2>

<p>Returns a set of datasets that are similar to the dataset provider sorted by their degree of similarity as well as taking into account ancestor concepts.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/graph/query/similar-dataset-including-descendent/&lt;dataset-id&gt;
</code></pre>
<h3 id="parameters-available">Parameters available</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Values</th>
<th style="text-align: right">Required</th>
</tr>
</thead><tbody>
<tr>
<td>published</td>
<td style="text-align: center">Include only published datasets</td>
<td style="text-align: right">Boolean</td>
<td style="text-align: right">true/false</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>app</td>
<td style="text-align: center">List of applications datasets should belong to (at least one of them). Read more about this field <a href="index-rw.html#applications">here</a>.</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any text, values separated by commas</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>env</td>
<td style="text-align: center">Include only datasets with at least one of the specified environments - read more about this field in the <a href="index-rw.html#environments">Environments concept section</a>.</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">One or more values from [&#39;production&rsquo;, &#39;preproduction&rsquo;]</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>limit</td>
<td style="text-align: center">Maximum number of datasets returned by the endpoint</td>
<td style="text-align: right">Integer</td>
<td style="text-align: right">A positive integer (3 by default)</td>
<td style="text-align: right">No</td>
</tr>
</tbody></table>

<h3 id="example">Example</h3>

<p>Datasets that are similar to the dataset with id <code class="prettyprint">03bfb30e-829f-4299-bab9-b2be1b66b5d4</code> including only those that are <strong>published</strong> with a <strong>limit of 6 results</strong> in total, datasets from both <code class="prettyprint">production</code> and <code class="prettyprint">preproduction</code> environments are included.</p>
<pre class="highlight plaintext"><code>https://api.resourcewatch.org/v1/graph/query/similar-dataset-including-descendent/03bfb30e-829f-4299-bab9-b2be1b66b5d4?published=true&amp;env=production,preproduction&amp;app=rw&amp;limit=6
</code></pre><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05b7c688-09ba-4f33-90ea-185a1039df43"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"concepts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"country"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"forest"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"geospatial"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"table"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"numberOfOcurrences"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0448c79d-0ee0-42ff-9331-aeee70cef301"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"concepts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"forest_cover"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"forest_gain"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"forest_loss"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"geospatial"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"numberOfOcurrences"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"098b33df-6871-4e53-a5ff-b56a7d989f9a"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"concepts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"country"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"geospatial"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"numberOfOcurrences"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0be2ce12-79b3-434b-b557-d6ea92d787fe"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"concepts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"geospatial"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"table"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"numberOfOcurrences"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"050f4146-566c-4a6d-9aaa-b49ab66a3090"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"concepts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"geospatial"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"table"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"numberOfOcurrences"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00abb46f-34e2-4bf7-be30-1fb0b1de022f"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"concepts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"geospatial"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"table"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"numberOfOcurrences"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="search-datasets-by-concepts">Search datasets by concepts</h2>

<p>This endpoint performs a dataset search based on the concepts provided and the tags that have been associated to all the different datasets that are part of the
application. Ancestors of the tags directly associated to a datasets are taken into account in the search.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/graph/query/search-datasets?concepts[0][0]<span class="o">=</span><span class="s1">'water'</span>
</code></pre>
<p>Up to three sets of concepts can be provided as shown in the example below.
Given the following sets of concepts:</p>

<ul>
<li>Set 1: <code class="prettyprint">[&#39;spain&#39;, &#39;europe&#39;]</code></li>
<li>Set 2: <code class="prettyprint">[&#39;water&#39;]</code></li>
<li>Set 3: <code class="prettyprint">[&#39;raster&#39;, &#39;geospatial&#39;]</code></li>
</ul>

<p>The url should be formed as follows:</p>

<p><code class="prettyprint">https://api.resourcewatch.org/v1/graph/query/search-datasets?concepts[0][0]=spain,concepts[0][1]=europe,concepts[1][0]=water,concepts[2][0]=raster,concepts[2][1]=geospatial</code></p>

<p><strong>AND</strong> logical operators are applied among the sets while <strong>OR</strong> is used for set elements.</p>

<h3 id="parameters-available">Parameters available</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Values</th>
<th style="text-align: right">Required</th>
</tr>
</thead><tbody>
<tr>
<td>published</td>
<td style="text-align: center">Include only published datasets</td>
<td style="text-align: right">Boolean</td>
<td style="text-align: right">true/false</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>app</td>
<td style="text-align: center">List of applications datasets should belong to (at least one of them). Read more about this field <a href="index-rw.html#applications">here</a>.</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any text, values separated by commas</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>env</td>
<td style="text-align: center">Include only datasets with at least one of the specified environments - read more about this field in the <a href="index-rw.html#environments">Environments concept section</a>.</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">One or more values from [&#39;production&rsquo;, &#39;preproduction&rsquo;]</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>page[size]</td>
<td style="text-align: center">Maximum number of results returned by the endpoint</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">No</td>
<td style="text-align: right"></td>
</tr>
</tbody></table>

<h3 id="example">Example</h3>

<p>Search for datasets with the tag <code class="prettyprint">global</code> and <code class="prettyprint">water</code> and at least one of the two tags: <code class="prettyprint">raster</code>, <code class="prettyprint">geospatial</code>. The resulting datasets should also be published and be categorized either as <code class="prettyprint">production</code> or <code class="prettyprint">preproduction</code> and belong to the application <code class="prettyprint">rw</code>. The total number of results returned won&rsquo;t be limited since a very high number has been provided as limit <em>(999999)</em>.</p>

<p><code class="prettyprint">https://api.resourcewatch.org/v1/graph/query/search-datasets?concepts[0][0]=global&amp;concepts[1][0]=water&amp;concepts[2][0]=raster&amp;concepts[2][1]=geospatial&amp;published=true&amp;env=production,preproduction&amp;app=rw&amp;page[size]=999999</code></p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"11f43558-d703-4b9d-aff0-f2354a11b359"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"1b97e47e-ca18-4e50-9aae-a2853acca3f0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"20c70a51-4ddf-4f6c-ad2c-1a6729b95fa4"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"21ac3cd2-9c19-47c7-ad18-4bcad118870f"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"33bed1fb-9261-41bf-8b50-127a4d0c80c5"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"3624554e-b240-4edb-9110-1f010642c3f3"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"36803484-c413-49a9-abe2-2286ee99b624"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"371e700e-bc9a-4526-af92-335d888de309"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"60be01b0-99fb-459c-8a08-b934270f8c4b"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"63a7a997-695d-4629-b6e9-9b169f5c69bf"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"894f43a8-ce8e-43a5-a4c7-fa80faa43d63"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"99075509-df36-461e-abb0-659cee555bd0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"9e9a5c50-b825-4f12-838f-1650943c2be1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"c17fab24-f71a-4c3e-bb87-6b753a944e6b"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"c9eadefd-4a06-4f3b-a2eb-3e3f45624c24"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"d7c3d954-ac86-4d1a-bb6a-c8c432a94e26"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"e63bb157-4b98-4ecb-81d6-c1b15e79895a"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"e7582657-9c16-4eb1-89e8-0211d94015c6"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"e94f0e2d-2b5f-41ed-967f-d97e54dd81ea"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ede84747-0116-45c2-accb-1dfe141c00ff"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"f717ac77-6f06-493f-8336-4e660a18f74c"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fa6443ff-eb95-4d0f-84d2-f0c91682efdf"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="get-most-liked-datasets">Get most liked datasets</h2>

<p>This endpoint returns the list of the most liked datasets in descending order.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/graph/query/most-liked-datasets
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e2971008-029f-441b-97cd-ee0555728182"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"low"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="s2">"high"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f6bb99af-541a-4d41-9e47-cc36cb479d4b"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"low"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="s2">"high"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"223b936e-06b8-4970-abd9-4f123904d95d"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"low"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="s2">"high"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0b9f0100-ce5b-430f-ad8f-3363efa05481"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"low"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="s2">"high"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="get-most-viewed-datasets-list">Get most viewed datasets list</h2>

<p>This endpoint returns the list of the most viewed datasets in descending order of total views.</p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Values</th>
<th style="text-align: right">Required</th>
</tr>
</thead><tbody>
<tr>
<td>limit</td>
<td style="text-align: center">Maximum number of results</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">Any positive number</td>
<td style="text-align: right">No</td>
</tr>
</tbody></table>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/graph/query/most-viewed
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0087944f-871c-44bc-b4d9-cd5acfc27023"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"views"</span><span class="p">:</span><span class="w"> </span><span class="mi">172</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00abb46f-34e2-4bf7-be30-1fb0b1de022f"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"views"</span><span class="p">:</span><span class="w"> </span><span class="mi">68</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b0b8cf-6638-4a9b-9896-d919d0656a64"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"views"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01ae2fd7-b818-429f-a27e-a36c8def971a"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"views"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00b5c224-8a78-41c4-89a6-8299dec8609e"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"views"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="update-view-counter-for-dataset-and-user">Update view counter for dataset and user</h2>

<p>Updates the total view counter for the corresponding dataset. If the request is authenticated, it will also increment the counter of number of times the user has viewed the dataset. </p>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/graph/dataset/&lt;dataset-id&gt;/visited
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
          <h1 id="areas">Areas</h1>

<p>The following area endpoints are available</p>

<h2 id="get-user-areas">Get user areas</h2>

<blockquote>
<p>Getting a list of areas for the current user</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/area
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"area"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"59ca3213d08a7d001054522b"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test area France"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8f77fe62cf15d5098ba0ee11c5126aa6"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58e22f662071c01c02f76a0f"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-09-26T10:55:15.990Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-09-26T10:55:15.990Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">

        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">

        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">

        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"area"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"59ca32ea3209db0014e9a7b7"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test custom area"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b12640deba9d3c5012c5359dd5572e2d"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58e22f662071c01c02f76a0f"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-09-26T10:58:50.226Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-09-26T10:58:50.226Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">

        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">

        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">

        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Returns the list of areas created by the user provided</p>

<h3 id="filters">Filters</h3>

<blockquote>
<p>Getting a list of areas for the current user and a given application</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/area?application<span class="o">=</span>rw
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Values</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td style="text-align: center">Application. Read more about this field <a href="index-rw.html#applications">here</a>.</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any Text, values separated by commas</td>
</tr>
</tbody></table>

<h3 id="pagination">Pagination</h3>

<p>The RW API lists many of its resources as pages, as opposed to showing all results at once. By default, and for compatibility reasons, areas are listed in pages of 1000 elements each, but we recommend that you use the options below to set the page size to a much smaller number. You can customize this behavior using the following query parameters:</p>

<blockquote>
<p>Custom pagination: load page 2 using 25 results per page</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/area?page[number]<span class="o">=</span>2&amp;page[size]<span class="o">=</span>25
</code></pre>
<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Default</th>
</tr>
</thead><tbody>
<tr>
<td>page[size]</td>
<td style="text-align: center">The number elements per page.</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">1000</td>
</tr>
<tr>
<td>page[number]</td>
<td style="text-align: center">The page number</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">1</td>
</tr>
</tbody></table>

<h3 id="sorting">Sorting</h3>

<blockquote>
<p>Sorting areas</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/area?sort<span class="o">=</span>name
</code></pre>
<blockquote>
<p>Sorting areas by multiple criteria</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/area?sort<span class="o">=</span>name,createdAt
</code></pre>
<blockquote>
<p>Sort by name descending, createdAt ascending</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/area?sort<span class="o">=</span>-name,+createdAt
</code></pre>
<p>The Areas service currently supports sorting using the <code class="prettyprint">sort</code> query parameter. Sorting areas adheres to the conventions defined in the <a href="index-rw.html#sorting">Sorting guidelines for the RW API</a>, so we strongly recommend reading that section before proceeding.</p>

<h2 id="create-area">Create area</h2>

<p>Creates a new area</p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Values</th>
<th style="text-align: right">Required</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td style="text-align: center">Application. Read more about this field <a href="index-rw.html#applications">here</a>.</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any Text, values separated by commas</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>name</td>
<td style="text-align: center">Name of the new area</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any Text</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>geostore</td>
<td style="text-align: center">Geostore ID</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any Text</td>
<td style="text-align: right">Yes</td>
</tr>
</tbody></table>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/area <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "name": &lt;name&gt;,
   "application": &lt;application&gt;,
   "geostore": &lt;geostore id&gt;
 }'</span>
</code></pre>
<h3 id="example">Example</h3>

<p>Create an area with name &lsquo;Portugal area&rsquo; and Geostore ID &#39;713899292fc118a915741728ef84a2a7&rsquo; for the Resource Watch application</p>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/area?application<span class="o">=</span>rw <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "name": "Portugal area",
   "application": "rw",
   "geostore": "713899292fc118a915741728ef84a2a7"
 }'</span>
</code></pre><pre class="highlight plaintext"><code>{
  "data": {
    "type": "area",
    "id": "5a0da028e6d876001080c259",
    "attributes": {
      "name": "Portugal area",
      "application": "rw",
      "geostore": "713899292fc118a915741728ef84a2a7",
      "userId": "58e22f662071c01c02f76a0f",
      "createdAt": "2017-11-16T14:26:48.396Z",
      "updatedAt": "2017-11-16T14:26:48.396Z",
      "image": "",
      "datasets": [

      ],
      "use": {

      },
      "iso": {

      }
    }
  }
}
</code></pre>
<h2 id="delete-area">Delete area</h2>

<p>Deletes an area</p>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/area/&lt;area-id&gt; <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
</code></pre>
<h3 id="example">Example</h3>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/area/59ca3213d08a7d001054522b <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
</code></pre>
<h2 id="get-area">Get area</h2>

<p>Gets all the information from an area</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/area/&lt;area-id&gt; <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
</code></pre>
<h3 id="example">Example</h3>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/area/59ca32ea3209db0014e9a7b7 <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
</code></pre><pre class="highlight plaintext"><code>{
    "data": {
        "type": "area",
        "id": "59ca32ea3209db0014e9a7b7",
        "attributes": {
            "name": "Test custom area",
            "application": "rw",
            "geostore": "b12640deba9d3c5012c5359dd5572e2d",
            "userId": "58e22f662071c01c02f76a0f",
            "createdAt": "2017-09-26T10:58:50.226Z",
            "updatedAt": "2017-09-26T10:58:50.226Z",
            "image": "",
            "datasets": [],
            "use": {},
            "iso": {}
        }
    }
}
</code></pre>
          <h1 id="areas-v2">Areas v2</h1>

<p>Before reading any further, please ensure you have read the <a href="#area">Areas of Interest concept documentation</a> first. It gives you a brief and clear description of what an Area of Interest is and what it can do for you. </p>

<p>Once you&rsquo;ve read that section, you can come back here to learn more details about using the RW API&rsquo;s Areas service. Areas of Interest are used by the <a href="https://www.globalforestwatch.org/">Global Forest Watch website</a> to subscribe to notifications on deforestation and fire alerts inside a particular areas you might be interest in. The sections below describe in detail how you can use the endpoints provided by RW API&rsquo;s <a href="https://github.com/gfw-api/gfw-area">Areas service</a> to define your own geographic areas of interest.</p>

<h2 id="what-is-the-difference-between-v1-and-v2">What is the difference between v1 and v2?</h2>

<p>v2 areas are an upgrade in the functionality of the Areas service, and provide you with an easier-to-use interface for creating Areas of Interest. Features such as the notification of alerts inside your Area of Interest <strong>are only available in v2 endpoints</strong>.</p>

<p>Up until v2 areas endpoints were available, you could create Areas of Interest, but you could not define deforestation or fire alerts for your areas. In order to do that, you would need to manually <a href="index-rw.html#subscribing-to-an-area-of-interest">create a subscription that referenced your Area of Interest</a>. Not only that, but you also needed to manage this interaction between Areas of Interest and Subscriptions by yourself. </p>

<p>v2 areas endpoints were built with the intention of automating this interaction between areas and subscriptions, thus merging together <a href="index-rw.html#areas"><strong>v1 areas of interest</strong></a> and <a href="index-rw.html#subscriptions"><strong>subscriptions</strong></a>. In practice, this means that, if your users already had v1 areas or subscriptions previously created, they will show up as v2 areas when requesting data from the v2 endpoints. This also means that, if your application was already using either subscriptions or v1 areas, you can safely transition into v2 areas while keeping the legacy v1 areas and subscriptions that your users have created.</p>

<p>Throughout the sections below, you&rsquo;ll be able to find <strong>Implementation details</strong> sections that dive deeper into how this synchronization between Areas and Subscriptions is performed on each particular case.</p>

<h2 id="interaction-between-areas-and-subscriptions">Interaction between Areas and Subscriptions</h2>

<p>As it was stated in the paragraphs above, you can use v2 endpoint to create Areas of Interest and subscribe to deforestation of fire alerts. These subscriptions (and the associated emails or webhook notifications) are handled by the <a href="index-rw.html#subscriptions">Subscriptions service</a>. This means in practice that each Area might have a Subscription associated. If this is the case, the Area&rsquo;s <code class="prettyprint">subscriptionId</code> property will contain the id of the associated Subscription from the Subscriptions service.</p>

<p>This interaction between Areas and Subscriptions is transparent for the API users, meaning that you don&rsquo;t need to worry about creating, updating or deleting the subscriptions associated to your areas - this happens automatically, taken into account the Area properties.</p>

<h2 id="getting-all-user-areas">Getting all user areas</h2>

<blockquote>
<p>Example request to get all areas for the logged user:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v2/area
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"area"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e4d74c3ef240412c2d56a71"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gfw"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e2f0eaf9de40a6c87dd9b7d"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-19T12:17:01.176Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="s2">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"admin"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"saved"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"public"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"fireAlerts"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"deforestationAlerts"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"webhookUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"monthlySummary"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e4d273dce77c53768bc24f9"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your.email@resourcewatch.org"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The <code class="prettyprint">/v2/areas</code> endpoint returns all the areas of interest associated with the user who made the request. For a detailed description of each field, check out the <a href="#area-reference">Area reference</a> section.</p>

<h3 id="pagination">Pagination</h3>

<p>The RW API lists many of its resources as pages, as opposed to showing all results at once. Currently, and by default, areas are listed in pages of 100 elements each, but this default value will be reduced to 10 in the future - we recommend building your applications with the future value in mind. You can customize this behavior, as well as specify which page to load, using the following query parameters:</p>

<blockquote>
<p>Custom pagination: load page 2 using 25 results per page</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v2/area?page[number]<span class="o">=</span>2&amp;page[size]<span class="o">=</span>25
</code></pre>
<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Default</th>
</tr>
</thead><tbody>
<tr>
<td>page[size]</td>
<td style="text-align: center">The number elements per page. Values above 100 are not officially supported.</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">100 (will be reduced to 10 in the future)</td>
</tr>
<tr>
<td>page[number]</td>
<td style="text-align: center">The page number</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">1</td>
</tr>
</tbody></table>

<h3 id="filters">Filters</h3>

<blockquote>
<p>Filtering areas</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v2/area?application<span class="o">=</span>rw&amp;public<span class="o">=</span><span class="nb">true</span>
</code></pre>
<p>The <code class="prettyprint">/v2/areas</code> endpoint provides the following parameters to tailor the returned listing:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: left">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Example</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td style="text-align: left">Filter results by the application associated with the areas.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">&lsquo;gfw&rsquo;</td>
</tr>
<tr>
<td>status</td>
<td style="text-align: left">Filter results by the status of the area.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">&#39;saved&rsquo;</td>
</tr>
<tr>
<td>public</td>
<td style="text-align: left">Filter results by the privacy status of the area.</td>
<td style="text-align: right">Boolean</td>
<td style="text-align: right">true</td>
</tr>
<tr>
<td>all</td>
<td style="text-align: left">Return all the areas instead of just the areas associated with user of the request. This filter will only be taken into account for ADMIN users.</td>
<td style="text-align: right">Boolean</td>
<td style="text-align: right">true</td>
</tr>
</tbody></table>

<h3 id="sorting">Sorting</h3>

<blockquote>
<p>Sorting areas</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v2/area?sort=name"</span>
</code></pre>
<blockquote>
<p>Sorting layers by multiple criteria</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v2/area?sort=name,status"</span>
</code></pre>
<blockquote>
<p>Explicit order of sorting</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/v2/area?sort=-name,+status"</span>
</code></pre>
<p>The Areas v2 service currently supports sorting using the <code class="prettyprint">sort</code> query parameter. Sorting v2 areas adheres to the conventions defined in the <a href="index-rw.html#sorting">Sorting guidelines for the RW API</a>, so we strongly recommend reading that section before proceeding. Additionally, you can check out the <a href="#area-reference">Area reference</a> section for a detailed description of the fields you can use when sorting.</p>

<h3 id="errors-for-getting-user-areas">Errors for getting user areas</h3>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message (example)</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td><code class="prettyprint">Unauthorized</code></td>
<td>No authorization token was provided.</td>
</tr>
</tbody></table>

<h3 id="implementation-details">Implementation details</h3>

<p>Finds all areas for the user who requested the list of areas. For each area, if it has an associated subscription (i.e. the <code class="prettyprint">subscriptionId</code> field of the area is not empty), it merges the subscription data over the area data, returning it as a single object. After that, the remaining user subscriptions are converted to area objects and returned.</p>

<h2 id="getting-all-areas">Getting all areas</h2>

<blockquote>
<p>Example request to get ALL areas (only available for ADMIN users):</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v2/area?all<span class="o">=</span><span class="nb">true</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"area"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e4d74c3ef240412c2d56a71"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gfw"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e2f0eaf9de40a6c87dd9b7d"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-19T12:17:01.176Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-19T12:17:01.176Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="s2">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"admin"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"saved"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"public"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"fireAlerts"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"deforestationAlerts"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"webhookUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"monthlySummary"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e4d273dce77c53768bc24f9"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your.email@resourcewatch.org"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v2/area?all=true&amp;page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v2/area?all=true&amp;page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v2/area?all=true&amp;page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"prev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v2/area?all=true&amp;page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v2/area?all=true&amp;page[number]=1&amp;page[size]=10"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The same <code class="prettyprint">/v2/areas</code> endpoint, used to retrieve all of the logged user&rsquo;s areas, can be used to retrieve ALL areas (for all users). To trigger this behavior, all you need to do is provide the <code class="prettyprint">all=true</code> flag as a query parameter - <strong>keep in mind this option will only be taken into account for ADMIN users</strong> (i.e. if the logged user is not an ADMIN, the <code class="prettyprint">all=true</code> flag is ignored and the logged user&rsquo;s areas are returned).</p>

<p>For a detailed description of each field, check out the <a href="#area-reference">Area reference</a> section.</p>

<h3 id="pagination">Pagination</h3>

<blockquote>
<p>Custom pagination: load page 2 using 25 results per page</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v2/area?page[number]<span class="o">=</span>2&amp;page[size]<span class="o">=</span>25&amp;all<span class="o">=</span><span class="nb">true</span>
</code></pre>
<p>Due to performance and memory management issues, when viewing all areas (using the <code class="prettyprint">/v2/areas</code> endpoint with the <code class="prettyprint">all=true</code> query parameter), the returned result is paginated. You can customize this behavior using the following query parameters:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Example</th>
</tr>
</thead><tbody>
<tr>
<td>page[number]</td>
<td style="text-align: center">The number of the page to fetch. Only taken into account when using the <code class="prettyprint">all=true</code> filter.</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">1</td>
</tr>
<tr>
<td>page[size]</td>
<td style="text-align: center">The size of the page to fetch. Only taken into account when using the <code class="prettyprint">all=true</code> filter. Maximum value is 100.</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">10</td>
</tr>
</tbody></table>

<h3 id="filters">Filters</h3>

<blockquote>
<p>Filtering areas</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v2/area?application<span class="o">=</span>rw&amp;public<span class="o">=</span><span class="nb">true</span>&amp;all<span class="o">=</span><span class="nb">true</span>
</code></pre>
<p>The filters for this endpoint are the same as the <code class="prettyprint">/v2/areas</code> endpoint described above:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: left">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Example</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td style="text-align: left">Filter results by the application associated with the areas. Read more about this field <a href="index-rw.html#applications">here</a>.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">&#39;gfw&rsquo;</td>
</tr>
<tr>
<td>status</td>
<td style="text-align: left">Filter results by the status of the area.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">&#39;saved&rsquo;</td>
</tr>
<tr>
<td>public</td>
<td style="text-align: left">Filter results by the privacy status of the area.</td>
<td style="text-align: right">Boolean</td>
<td style="text-align: right">true</td>
</tr>
<tr>
<td>all</td>
<td style="text-align: left">Return all the areas instead of just the areas associated with user of the request. This filter will only be taken into account for ADMIN users.</td>
<td style="text-align: right">Boolean</td>
<td style="text-align: right">true</td>
</tr>
</tbody></table>

<h3 id="errors-for-getting-all-areas">Errors for getting all areas</h3>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message (example)</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td><code class="prettyprint">Unauthorized</code></td>
<td>No authorization token was provided.</td>
</tr>
</tbody></table>

<h3 id="implementation-details">Implementation details</h3>

<p>If the <code class="prettyprint">all=true</code> query filter is provided, the <code class="prettyprint">/find-all</code> endpoint of the Subscriptions service is used to find all existing subscriptions (for all users).</p>

<p>Then, for each area in the Areas service database, if it has an associated subscription (i.e. the <code class="prettyprint">subscriptionId</code> field of the area is not empty), it merges the subscription data over the area data, returning it as a single object. After that, the remaining subscriptions are converted to area objects and returned.</p>

<h2 id="getting-an-area-by-its-id">Getting an area by its id</h2>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v2/area/:id
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"area"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e4d787bef240412c2d56a74"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gfw"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e2f0eaf9de40a6c87dd9b7d"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-19T12:17:01.176Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-19T12:17:01.176Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"admin"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"saved"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"public"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"fireAlerts"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"deforestationAlerts"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"webhookUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"monthlySummary"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e4d273dce77c53768bc24f9"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tiago.garcia@vizzuality.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>If you know the id or the slug of a area, then you can access it directly - keep in mind the id search is case-sensitive. If the area has the <code class="prettyprint">public</code> attribute set to <code class="prettyprint">false</code>, you will only be able to fetch its information if you are the owner of the area. If the area has the <code class="prettyprint">public</code> attribute set to <code class="prettyprint">true</code> and the user who requests it is not the owner, some information will be hidden for privacy reasons.</p>

<h3 id="errors-for-getting-an-area-by-its-id">Errors for getting an area by its id</h3>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message (example)</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td><code class="prettyprint">Unauthorized</code></td>
<td>No authorization token was provided.</td>
</tr>
<tr>
<td>401</td>
<td><code class="prettyprint">Area private</code></td>
<td>You are trying to get the information of a private area without being the owner of the area.</td>
</tr>
</tbody></table>

<h3 id="implementation-details">Implementation details</h3>

<p>Try to find an area with the id provided:</p>

<ol>
<li>If the area exists:

<ol>
<li>If the area has an associated subscription, the subscription is fetched, its data is merged over the area and the result is returned.</li>
<li>If the area has no subscription associated, the area data is returned.</li>
</ol></li>
<li>If the area does not exist:

<ol>
<li>Try to find a subscription with the id provided. If it exists, it is returned as an area object, if not, a <code class="prettyprint">404 Not Found</code> error is returned.</li>
</ol></li>
</ol>

<h2 id="creating-an-area">Creating an area</h2>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v2/area
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> -d <span class="se">\</span>
 <span class="s1">'{
    "name": "Example area",
    "application": "gfw",
    "image": "",
    "tags": [],
    "public": false,
    "fireAlerts": true,
    "deforestationAlerts": true,
    "webhookUrl": "http://example.com",
    "monthlySummary": true,
    "email": "youremail@resourcewatch.org",
    "language": "en"
}'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"area"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e4d7c47ef240412c2d56a78"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example area"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gfw"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"wdpaid"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e2f0eaf9de40a6c87dd9b7d"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-19T18:19:51.485Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-19T18:19:51.485Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"public"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"fireAlerts"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"deforestationAlerts"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"webhookUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"monthlySummary"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e4d7c47dd8fa31290d548ae"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"youremail@resourcewatch.org"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Use this endpoint to create new areas. For a detailed description of each field that can be provided in the body of the request, check out the <a href="#area-reference">Area reference</a> section.</p>

<p>Keep in mind that you should provide one of the following when creating an area:</p>

<ul>
<li><code class="prettyprint">geostore</code> with the id of a geostore object obtained from <a href="index-rw.html#geostore16">RW API&rsquo;s Geostore service</a>, if you are creating an area that references a geostore;</li>
<li><code class="prettyprint">geostoreDataApi</code> with the id of a geostore object obtained from the GFW Data API, as an alternative way to create an area that references a geostore;</li>
<li><code class="prettyprint">wdpaid</code> with the id of a protected area if you are creating an area that references a protected area;</li>
<li><code class="prettyprint">iso</code> object with a valid country/region/subregion if you are creating an area that references an admin country/region/subregion;</li>
<li><code class="prettyprint">use</code> object with valid id and name of a land use concessioned area, if you are creating an area that references a land use area.</li>
</ul>

<p>Please check the <a href="index-rw.html#area-reference">Area model reference</a> for details on what values each field is expected to provide.</p>

<p>According to multiple factors (including the <code class="prettyprint">geostore</code> that is associated with the area, if the area subscribes to <code class="prettyprint">fireAlerts</code>, <code class="prettyprint">deforestationAlerts</code>, etc.), there might be a period of time in which the data for the area is being generated. While that is the case, the area will have <code class="prettyprint">status</code> set to <code class="prettyprint">&#39;pending&#39;</code>. Once the area data is ready, the <code class="prettyprint">status</code> of the area will be updated to <code class="prettyprint">&#39;saved&#39;</code>.</p>

<h3 id="errors-for-creating-an-area">Errors for creating an area</h3>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message (example)</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><code class="prettyprint">&lt;field&gt; can not be empty.</code></td>
<td>You are missing a required field while creating the area.</td>
</tr>
<tr>
<td>400</td>
<td><code class="prettyprint">&lt;field&gt; is not valid.</code></td>
<td>You provided an invalid field while creating the area.</td>
</tr>
<tr>
<td>400</td>
<td><code class="prettyprint">geostore and geostoreDataApi are mutually exclusive, cannot provide both at the same time</code></td>
<td>You are trying to provide <code class="prettyprint">geostore</code> and <code class="prettyprint">geostoreDataApi</code> at the same time, and only one of the fields can be provided.</td>
</tr>
<tr>
<td>401</td>
<td><code class="prettyprint">Unauthorized</code></td>
<td>No token was provided.</td>
</tr>
</tbody></table>

<h3 id="email-notifications">Email notifications</h3>

<p>After creating an area, if the <code class="prettyprint">email</code> field of the area contains a valid email address, an email is sent to the user. The email content varies according to the status of the area:</p>

<ul>
<li>If the area has status <code class="prettyprint">saved</code>, an email is sent to let the user know the area of interest is ready to be viewed.</li>
<li>If the area has status <code class="prettyprint">pending</code>, an email is sent to let the user know the area of interest is being generated and will be available later.</li>
</ul>

<p>If you want to understand more about how these emails are sent or how you can update its content, please check the developer docs section on <a href="developer.html#areas-v2-notification-emails">Areas v2 Email Notifications</a>.</p>

<h3 id="implementation-details">Implementation details</h3>

<p>POST of a new area always starts by creating the area. Then, taking into account the area attributes, it might also create a subscription which will then be associated with the area. The area&rsquo;s <code class="prettyprint">subscriptionId</code> attribute will then be updated with the id of the created subscription if that&rsquo;s the case. The created area is then returned.</p>

<p>The subscription is created only if the area has selected set to <code class="prettyprint">true</code> at least one of the following attributes:</p>

<ul>
<li><code class="prettyprint">deforestationAlerts</code></li>
<li><code class="prettyprint">fireAlerts</code></li>
<li><code class="prettyprint">monthlySummary</code></li>
</ul>

<h2 id="updating-an-area">Updating an area</h2>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v2/area/:id
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> -d <span class="se">\</span>
 <span class="s1">'{
    "name": "Example area",
    "application": "gfw",
    "image": "",
    "tags": [],
    "public": false,
    "fireAlerts": true,
    "deforestationAlerts": true,
    "webhookUrl": "http://example.com",
    "monthlySummary": true,
    "email": "youremail@resourcewatch.org",
    "language": "en"
}'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"area"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e4d7c47ef240412c2d56a78"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example area"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gfw"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"wdpaid"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e2f0eaf9de40a6c87dd9b7d"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-19T18:19:51.485Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-29T22:17:12.176Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"public"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"fireAlerts"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"deforestationAlerts"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"webhookUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"monthlySummary"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e4d7c47dd8fa31290d548ae"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"youremail@resourcewatch.org"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Use this endpoint to update an existing area. For a detailed description of each field that can be provided in the body of the request, check out the <a href="#area-reference">Area reference</a> section. Keep in mind that you must provide one of the following when updating an area:</p>

<ul>
<li><code class="prettyprint">geostore</code> with the id of a geostore object obtained from <a href="index-rw.html#geostore16">RW API&rsquo;s Geostore service</a>, if you are updating an area that references a geostore;</li>
<li><code class="prettyprint">geostoreDataApi</code> with the id of a geostore object obtained from the GFW Data API, as an alternative way to update an area that references a geostore;</li>
<li><code class="prettyprint">wdpaid</code> with the id of a protected area if you are updating an area that references a protected area;</li>
<li><code class="prettyprint">iso</code> object with a valid country/region/subregion if you are updating an area that references an admin country/region/subregion;</li>
<li><code class="prettyprint">use</code> object with valid id and name of a land use concessioned area, if you are updating an area that references a land use area.</li>
</ul>

<p>Please check the <a href="index-rw.html#area-reference">Area model reference</a> for details on what values each field is expected to provide.</p>

<h3 id="errors-for-updating-an-area">Errors for updating an area</h3>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message (example)</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><code class="prettyprint">&lt;field&gt; can not be empty.</code></td>
<td>You are missing a required field while updating the area.</td>
</tr>
<tr>
<td>400</td>
<td><code class="prettyprint">&lt;field&gt; is invalid.</code></td>
<td>You provided an invalid field while updating the area.</td>
</tr>
<tr>
<td>400</td>
<td><code class="prettyprint">Id required</code></td>
<td>No id was provided in the URL.</td>
</tr>
<tr>
<td>400</td>
<td><code class="prettyprint">geostore and geostoreDataApi are mutually exclusive, cannot provide both at the same time</code></td>
<td>You are trying to provide <code class="prettyprint">geostore</code> and <code class="prettyprint">geostoreDataApi</code> at the same time, and only one of the fields can be provided.</td>
</tr>
<tr>
<td>401</td>
<td><code class="prettyprint">Unauthorized</code></td>
<td>No token was provided.</td>
</tr>
<tr>
<td>403</td>
<td><code class="prettyprint">Not authorized</code></td>
<td>You are trying to update an area that is not owned by you and you are not an ADMIN user.</td>
</tr>
<tr>
<td>404</td>
<td><code class="prettyprint">Area not found</code></td>
<td>The area with id provided does not exist.</td>
</tr>
</tbody></table>

<h3 id="email-notifications">Email notifications</h3>

<p>After updating an area, if the <code class="prettyprint">email</code> field of the area contains a valid email address and the area&rsquo;s status is <code class="prettyprint">saved</code>, an email is sent to let the user know the area of interest is ready to be viewed.</p>

<p>If you want to understand more about how these emails are sent or how you can update its content, please check the developer docs section on <a href="developer.html#areas-v2-notification-emails">Areas v2 Email Notifications</a>.</p>

<h3 id="implementation-details">Implementation details</h3>

<p>PATCHing an area is a bit more complex, and it comes down to 3 major cases:</p>

<ol>
<li>The area already exists and has subscriptions preference (<code class="prettyprint">deforestationAlerts</code>, <code class="prettyprint">fireAlerts</code> or <code class="prettyprint">monthlySummary</code> set to true) in the request data:

<ol>
<li>If the area doesn&rsquo;t have a subscription associated, a new one is created and associated.</li>
<li>If the area already had a subscription, then the subscription is PATCHed according to the data provided in the request body.</li>
</ol></li>
<li>The area already exists and doesn’t has subscription preferences (<code class="prettyprint">deforestationAlerts</code>, <code class="prettyprint">fireAlerts</code> or <code class="prettyprint">monthlySummary</code> set to true) in the request data:

<ol>
<li>If the area had a subscription associated, then the subscription associated is deleted.</li>
<li>Otherwise, just save the area.</li>
</ol></li>
<li>The area doesn’t exist because on the fetch it returned a mapped subscription (meaning we are PATCHing an area using the id of a subscription):

<ol>
<li>First, create a new area, and then:

<ol>
<li>If the request data has subscriptions preference (<code class="prettyprint">deforestationAlerts</code>, <code class="prettyprint">fireAlerts</code> or <code class="prettyprint">monthlySummary</code> set to true), also PATCH the subscription.</li>
<li>If the request data doesn&rsquo;t have subscriptions preference (<code class="prettyprint">deforestationAlerts</code>, <code class="prettyprint">fireAlerts</code> or <code class="prettyprint">monthlySummary</code> set to true), delete the associated subscription.</li>
</ol></li>
</ol></li>
</ol>

<h2 id="deleting-an-area">Deleting an area</h2>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v2/area/:id
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
</code></pre>
<blockquote>
<p>Returns 204 No Content in case of success.</p>
</blockquote>

<p>Use this endpoint to delete an existing area. This endpoint requires authentication and, in order to DELETE an area, you need to be either the owner of the area or an ADMIN user.</p>

<p>DELETing an area deletes the area with id provided and any associated subscription with the area being deleted (identified by the id stored in the <code class="prettyprint">subscriptionId</code> field). This is done transparently from the perspective of an API user, so no action is needed to trigger this behavior.</p>

<h3 id="errors-for-deleting-an-area">Errors for deleting an area</h3>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message (example)</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><code class="prettyprint">Id required</code></td>
<td>No id was provided in the URL.</td>
</tr>
<tr>
<td>401</td>
<td><code class="prettyprint">Unauthorized</code></td>
<td>No token was provided.</td>
</tr>
<tr>
<td>403</td>
<td><code class="prettyprint">Not authorized</code></td>
<td>You are trying to delete an area that is not owned by you and you are not an ADMIN user.</td>
</tr>
<tr>
<td>404</td>
<td><code class="prettyprint">Area not found</code></td>
<td>The area with id provided does not exist.</td>
</tr>
</tbody></table>

<h2 id="update-areas-by-geostore">Update areas by geostore</h2>

<blockquote>
<p>Example request to update all areas that reference geostores with ids &ldquo;123&rdquo; and &ldquo;234&rdquo;:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v2/area/update
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> -d <span class="se">\</span>
 <span class="s1">'{
    "geostores": ["123", "234"],
    "update_params": {
        "status": "saved",
        "name": "Updated Area"
    }
}'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"area"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e4d74c3ef240412c2d56a71"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gfw"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e2f0eaf9de40a6c87dd9b7d"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-19T12:17:01.176Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-29T22:17:12.176Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"datasets"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="s2">"use"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"admin"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"saved"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"public"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"fireAlerts"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"deforestationAlerts"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"webhookUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"monthlySummary"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e4d273dce77c53768bc24f9"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tiago.garcia@vizzuality.com"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Use this endpoint to batch update multiple areas that are associated with one of the geostore ids provided in the request body. In order to use this endpoint, you need to be authenticated as an ADMIN user.</p>

<p>You can use the <code class="prettyprint">update_params</code> field of the request body to specify multiple fields to update on the areas that belong to the geostore ids provided in the body. Keep in mind that the same validations as when updating an area are applied. If a validation fails, the request will fail with <code class="prettyprint">400 Bad Request</code> and no area will be updated.</p>

<p>In case of success a 200 OK response is returned, and all the areas that match the update criteria (belonging to one of the geostores provided in the request body) will be returned.</p>

<h3 id="email-notifications">Email notifications</h3>

<p>After updating areas by geostore, for each area that was updated which has a valid email address associated and its status updated to <code class="prettyprint">saved</code>, an email will be sent to the user to let them know that the area is ready to be viewed.</p>

<p>If you want to understand more about how these emails are sent or how you can update its content, please check the developer docs section on <a href="developer.html#areas-v2-notification-emails">Areas v2 Email Notifications</a>.</p>

<h2 id="sync-areas">Sync areas</h2>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v2/area/sync
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"syncedAreas"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
        </span><span class="s2">"createdAreas"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Example snippet that synchronizes the areas before fetching the information of ALL areas:</p>
</blockquote>
<pre class="highlight javascript"><code><span class="c1">// First call the sync endpoint</span>
<span class="nx">await</span> <span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'v2/area/sync'</span><span class="p">);</span>

<span class="c1">// Then call the get endpoint while there are more pages to find</span>
<span class="kd">var</span> <span class="nx">results</span> <span class="o">=</span> <span class="p">[];</span>
<span class="kd">var</span> <span class="nx">hasNextPage</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">pageNumber</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">while</span> <span class="p">(</span><span class="nx">hasNextPage</span><span class="p">)</span> <span class="p">{</span>
   <span class="kd">var</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">request</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'v2/area?all=true&amp;page[number]='</span> <span class="o">+</span> <span class="nx">pageNumber</span><span class="p">);</span>
   <span class="nx">results</span> <span class="o">=</span> <span class="nx">results</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
   <span class="nx">pageNumber</span><span class="o">++</span><span class="p">;</span>
   <span class="nx">hasNextPage</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">links</span><span class="p">.</span><span class="nx">self</span> <span class="o">===</span> <span class="nx">res</span><span class="p">.</span><span class="nx">links</span><span class="p">.</span><span class="nx">last</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<p>Use this endpoint to synchronize each area information with the associated subscription. The usage of this endpoint is recommended if you are performing update processes that rely on updated subscription information for the areas.</p>

<p>This endpoint supports the following query parameters to control the execution of the sync:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Example</th>
</tr>
</thead><tbody>
<tr>
<td>startDate</td>
<td style="text-align: center">The date from which the sync will be executed. All subscriptions that have been updated since this date will be synced with the existing areas.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">2020-03-18T09:45:56.476Z</td>
</tr>
<tr>
<td>endDate</td>
<td style="text-align: center">The date until which the sync will be executed. All subscriptions that have been updated until this date will be synced with the existing areas.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">2020-03-25T09:45:56.476Z</td>
</tr>
</tbody></table>

<p><em>Note: By default, the sync is done for the last week changes (i.e. the default value for the <code class="prettyprint">startDate</code> parameter is one week ago and the default value for the <code class="prettyprint">endDate</code> parameter is now).</em></p>

<h2 id="area-reference">Area reference</h2>

<p>This section gives you a complete view at the properties that are maintained as part of an area. When interacting with an area (on get, on create, etc) you will find most of these properties available to you, although they may be organized in a slightly different structure (ie: on get, everything but the <code class="prettyprint">id</code> is nested inside an <code class="prettyprint">attributes</code> object).</p>

<p>You can find more details in the <a href="https://github.com/gfw-api/gfw-area/blob/develop/app/src/models/area.modelV2.js">source code</a>.</p>

<table><thead>
<tr>
<th>Field name</th>
<th>Type</th>
<th>Required</th>
<th>Default value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Yes (autogenerated)</td>
<td></td>
<td>Unique Id of the area. Auto generated on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Name of the area.</td>
</tr>
<tr>
<td>application</td>
<td>String</td>
<td>Yes</td>
<td>&#39;gfw&rsquo;</td>
<td>The application this area belongs to.</td>
</tr>
<tr>
<td>geostore</td>
<td>String</td>
<td>No</td>
<td></td>
<td>If this area references a geostore obtained from <a href="index-rw.html#geostore16">RW API&rsquo;s Geostore service</a>, the id of that geostore will be saved in this field.</td>
</tr>
<tr>
<td>geostoreDataApi</td>
<td>String</td>
<td>No</td>
<td></td>
<td>If this area references a geostore obtained from the GFW Data API, the id of that geostore will be saved in this field.</td>
</tr>
<tr>
<td>wdpaId</td>
<td>String</td>
<td>No</td>
<td></td>
<td>If this area references a WDPA, the id of the WDPA will be saved in this field.</td>
</tr>
<tr>
<td>userId</td>
<td>String</td>
<td>Yes (autopopulated)</td>
<td></td>
<td>Id of the user who owns the area. Set automatically on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>use</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>If this area references a land use concession, this field will contain an object that identifies the concrete area referred.</td>
</tr>
<tr>
<td>use.id</td>
<td>String</td>
<td>No</td>
<td></td>
<td>The id of the land use concession to track.</td>
</tr>
<tr>
<td>use.name</td>
<td>String</td>
<td>No</td>
<td></td>
<td>The name of the land use concession to track. The supported values for this field include <code class="prettyprint">mining</code> for <a href="http://api.resourcewatch.org/v1/dataset/c2142922-84d9-4564-8216-a4867b9e48c5">mining areas</a>, <code class="prettyprint">logging</code> for <a href="https://wri-01.carto.com/tables/gfw_oil_palm/public/map">Congo Basin logging roads</a>, <code class="prettyprint">oilpalm</code> for <a href="https://wri-01.carto.com/tables/gfw_woodfiber/public/map">palm oil plantations</a> and <code class="prettyprint">fiber</code> for <a href="https://wri-01.carto.com/tables/osm_logging_roads/public/map">wood fiber plantations</a>.</td>
</tr>
<tr>
<td>iso</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>If this area references an admin country or region, this field will contain an object that identifies the concrete area referred.</td>
</tr>
<tr>
<td>iso.country</td>
<td>String</td>
<td>No</td>
<td></td>
<td>The <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3">ISO 3166-1 alpha-3 code</a> of the country being referred by this area.</td>
</tr>
<tr>
<td>iso.region</td>
<td>String</td>
<td>No</td>
<td></td>
<td>The <a href="https://gadm.org/data.html">GADM id</a> of the region inside the country to reference (optional, you can reference the whole country, or just on specific region of the country).</td>
</tr>
<tr>
<td>iso.subregion</td>
<td>String</td>
<td>No</td>
<td></td>
<td>The <a href="https://gadm.org/data.html">GADM id</a> of the subregion inside the region to reference (optional, you can reference the whole region, or just on specific subregion of the region).</td>
</tr>
<tr>
<td>admin</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Alternative syntax, see the <code class="prettyprint">iso</code> field above.</td>
</tr>
<tr>
<td>admin.adm0</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Alternative syntax, see the <code class="prettyprint">iso.country</code> field above.</td>
</tr>
<tr>
<td>admin.adm1</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Alternative syntax, see the <code class="prettyprint">iso.region</code> field above.</td>
</tr>
<tr>
<td>admin.adm2</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Alternative syntax, see the <code class="prettyprint">iso.subregion</code> field above.</td>
</tr>
<tr>
<td>image</td>
<td>String</td>
<td>No</td>
<td></td>
<td>URL for an image representative of the area of interest.</td>
</tr>
<tr>
<td>templateId</td>
<td>String</td>
<td>No</td>
<td></td>
<td>?</td>
</tr>
<tr>
<td>tags</td>
<td>Array</td>
<td>Yes</td>
<td>[]</td>
<td>Array of string tags that can be used to categorize areas.</td>
</tr>
<tr>
<td>status</td>
<td>String</td>
<td>Yes</td>
<td>&#39;pending&rsquo;</td>
<td>The status of the area - can be one of <code class="prettyprint">pending</code>, <code class="prettyprint">saved</code> or <code class="prettyprint">failed</code>. Cannot be modified by users. Initially, it is set as <code class="prettyprint">pending</code>. Once all the data for the area is crunched and ready to be read, the status is updated to <code class="prettyprint">saved</code> and an email is sent to the user. If errors occur, the status is set to <code class="prettyprint">failed</code>.</td>
</tr>
<tr>
<td>public</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td>If the area is public or private. Public area information can be accessed by other users.</td>
</tr>
<tr>
<td>fireAlerts</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td>If the area subscribes to notifications on fire alerts - set this field to true if you wish to be notified about fire alerts in your area of interest.</td>
</tr>
<tr>
<td>deforestationAlerts</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td>If the area subscribes to notifications on deforestation alerts - set this field to true if you wish to be notified about deforestation alerts in your area of interest.</td>
</tr>
<tr>
<td>monthlySummary</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td>If the area subscribes to monthly summary notifications - set this field to true if you wish to be notified monthly about deforestation and fire alerts in your area of interest.</td>
</tr>
<tr>
<td>email</td>
<td>String</td>
<td>No</td>
<td></td>
<td>The email that will be used as receiver of the notification emails.</td>
</tr>
<tr>
<td>webhookUrl</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Instead of receiving an email as notification, you can choose to receive a hit in the webhook URL you set in this field.</td>
</tr>
<tr>
<td>language</td>
<td>String</td>
<td>No</td>
<td>&#39;en&rsquo;</td>
<td>The language in which you wish to receive the email notifications. <code class="prettyprint">en</code>, <code class="prettyprint">fr</code>, <code class="prettyprint">zh</code>, <code class="prettyprint">id</code>, <code class="prettyprint">pt_BR</code> or <code class="prettyprint">es_MX</code> are the supported values for this field. If any other value is provided, <code class="prettyprint">en</code> is automatically set.</td>
</tr>
<tr>
<td>subscriptionId</td>
<td>String</td>
<td>No</td>
<td></td>
<td>If an area is returned as the reflection of an existing subscription in the Subscriptions service, this field will contain the id of the corresponding subscription.</td>
</tr>
<tr>
<td>createdAt</td>
<td>Date</td>
<td>No (autogenerated)</td>
<td>now</td>
<td>Automatically maintained date of when the area was created. Cannot be modified by users.</td>
</tr>
<tr>
<td>updatedAt</td>
<td>Date</td>
<td>No (autogenerated)</td>
<td>now</td>
<td>Automatically maintained date of when the area was last updated. Cannot be modified by users.</td>
</tr>
</tbody></table>

          <h1 id="webshot">Webshot</h1>

<p>The webshot set of endpoints allows you to capture a given page as a document file, that can then be used, for example, as a preview thumbnail.</p>

<aside class="notice">
This process is computational demanding and may be slow at times, depeding on server load and complexity of the page being rendered. Avoid making consecutive or batch requests to these endpoint, and allow enough time for them to process. 
</aside>

<p>This service has two endpoints:</p>

<h3 id="pdf">PDF</h3>

<p>This endpoint expects a URL as a query parameter and generates a pdf containing a rendered version of that page: </p>
<pre class="highlight plaintext"><code>curl -X GET \
  'http://api.resourcewatch.org/v1/webshot/pdf?url=http://google.com&amp;filename=my-google-screenshoz.pdf' \
  -H 'Authorization: Bearer &lt;your-token&gt;' \
  -H 'Content-Type: application/json' \
</code></pre>
<p>The endpoint accepts the following optional parameters:</p>

<ul>
<li><code class="prettyprint">height</code> - Configure the height of the generated screenshot.</li>
<li><code class="prettyprint">width</code> - Configure the width of the generated screenshot.</li>
<li><code class="prettyprint">format</code> - Configure the format of the generated screenshot, admiting two values: <code class="prettyprint">png</code> and <code class="prettyprint">pdf</code>. <code class="prettyprint">pdf</code> is the default value.</li>
</ul>

<p>It is important to take into account that this endpoint works by rendering the <code class="prettyprint">https://resourcewatch.org/embed/widget/&lt;widget id&gt;</code> URL with those dimensions applied to the viewport. So the resulting screenshot will have the proportional size of the corresponding DOM element within that viewport, and not the exact <code class="prettyprint">height</code> and <code class="prettyprint">width</code> specified.</p>

<h3 id="widget">Widget</h3>

<p>This endpoint generates a thumbnail image for the provided widget and stores it on AWS S3.</p>

<aside class="notice">
This endpoint does not validate the existence of the widget - you will not get a 404 HTTP error if you provided a non-existent widget id. 
</aside>
<pre class="highlight plaintext"><code>curl -X POST \
  http://api.resourcewatch.org/v1/webshot/widget/7b540186-9a9f-4e13-a6e8-f38e64fab2e1/thumbnail \
  -H 'Authorization: Bearer &lt;your-token&gt;' \
  -H 'Content-Type: application/json' \
</code></pre><pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"widgetThumbnail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://s3.amazonaws.com/resourcewatch/thumbnails/&lt;filename&gt;.png"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint accepts two optional query parameters, <code class="prettyprint">height</code> and <code class="prettyprint">width</code>, that configure the size of the generated screenshot. Keep in mind that this endpoint works by rendering the <code class="prettyprint">https://resourcewatch.org/embed/widget/&lt;widget id&gt;</code> URL with those dimensions applied to the viewport, and then captures the content of the <code class="prettyprint">.widget-content</code> DOM element into an image file. As such, the resulting screenshot will have the proportional size of the corresponding DOM element within that viewport, and not the exact <code class="prettyprint">height</code> and <code class="prettyprint">width</code> specified.</p>

          <h1 id="topic">Topic</h1>

<aside class="warning">
    <span>Deprecation notice</span>
    <p>
      Topics are deprecated. Use Dashboards instead.
    </p>
</aside>

<h2 id="what-is-a-topic">What is a Topic?</h2>

<p>A topic contains the information to display a web page belonging to a user.</p>

<h2 id="getting-all-topics">Getting all topics</h2>

<p>This endpoint will allow to get all topics belonging to a user:</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/topic -H <span class="s1">'Authorization: Bearer exampleToken'</span>
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"topics"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities topic"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities-topic"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;p&gt;&lt;/p&gt;</span><span class="se">\n</span><span class="s2">&lt;iframe width=</span><span class="se">\"</span><span class="s2">500</span><span class="se">\"</span><span class="s2"> height=</span><span class="se">\"</span><span class="s2">410</span><span class="se">\"</span><span class="s2"> src=</span><span class="se">\"</span><span class="s2">/embed/widget/5ebeddda-8f3d-4e63-8a52-08e15c3e148c</span><span class="se">\"</span><span class="s2"> frameBorder=</span><span class="se">\"</span><span class="s2">0</span><span class="se">\"</span><span class="s2">&gt;&lt;/iframe&gt;</span><span class="se">\n</span><span class="s2">&lt;p&gt;&lt;/p&gt;</span><span class="se">\n</span><span class="s2">&lt;iframe width=</span><span class="se">\"</span><span class="s2">500</span><span class="se">\"</span><span class="s2"> height=</span><span class="se">\"</span><span class="s2">410</span><span class="se">\"</span><span class="s2"> src=</span><span class="se">\"</span><span class="s2">/embed/widget/73c574b9-f9ab-4f77-87be-651ff8dac5fe</span><span class="se">\"</span><span class="s2"> frameBorder=</span><span class="se">\"</span><span class="s2">0</span><span class="se">\"</span><span class="s2">&gt;&lt;/iframe&gt;</span><span class="se">\n</span><span class="s2">&lt;p&gt;test1&lt;/p&gt;</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eb63867922e16e34ef3ce862"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
      </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="filters">Filters</h3>

<p>Available filters parameters:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>published</td>
<td style="text-align: center">Filter topics by publishing status (true, false)</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>private</td>
<td style="text-align: center">Filter topics by private status (true, false)</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>user</td>
<td style="text-align: center">Filter topics by author user id</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">The application to which the topic belongs. Read more about this field <a href="index-rw.html#applications">here</a>.</td>
<td style="text-align: right">Text (single value)</td>
</tr>
</tbody></table>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/topic?user<span class="o">=</span>57bc2608f098ce98007985e4&amp;private<span class="o">=</span><span class="nb">false</span>
</code></pre>
<aside class="warning">
    <span>Deprecation notice</span>
    <p>
      The format <b><i>filter[filterName]=value</i></b> which was previously supported for some filters, is now deprecated, in favor of <b><i>filterName=value</i></b>.
    </p>
</aside>
<pre class="highlight shell"><code><span class="c"># Deprecated syntax</span>
curl -X GET https://api.resourcewatch.org/v1/topic?filter[user]<span class="o">=</span>57bc2608f098ce98007985e4&amp;filter[private]<span class="o">=</span><span class="nb">false</span>
</code></pre>
<h3 id="sorting">Sorting</h3>

<p>There&rsquo;s currently no support for custom sorting of topics. The topics are listed on a pseudo-random order.</p>

<h3 id="include-related-entities">Include related entities</h3>

<p>When loading topics, you can optionally pass an <code class="prettyprint">includes</code> query argument to load additional data.</p>

<h4 id="user">User</h4>

<p>Loads the name and email address of the author of the topic. If you request this issue as an authenticated user with ADMIN role, you will additionally get the author&rsquo;s role.</p>

<p>If the data is not available (for example, the user has since been deleted), no <code class="prettyprint">user</code> property will be added to the layer object.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/topic?includes<span class="o">=</span>user
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"86"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"topics"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test topic three"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test-topic-three-cd4305e9-e3c8-456b-85a0-32eccb6100e6"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test topic three summary"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test topic three description"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test topic three description"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="s2">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ac9f9e29309063404573a2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">],</span><span class="w">
          </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.doe@vizzuality.com"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="creating-a-topic">Creating a topic</h2>

<aside class="warning">
    <span>Deprecation notice</span>
    <p>
      Topics are deprecated. Use Dashboards instead.
    </p>
</aside>

<p>When creating a topic, the <code class="prettyprint">application</code> field should be present and cannot contain any values that are not associated with the creating user&rsquo;s account. If an <code class="prettyprint">application</code> value is not provided, <code class="prettyprint">[&quot;rw&quot;]</code> is used by default, and the process will fail if the user account does not belong to it. Any role can create a topic.</p>

<p>Supported fields:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Accepted values</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Short name for the topic</td>
<td>any valid text</td>
</tr>
<tr>
<td>slug</td>
<td>Unique identifier for the topic</td>
<td>any valid text</td>
</tr>
<tr>
<td>summary</td>
<td>Summary of the content of the topic</td>
<td>any valid text</td>
</tr>
<tr>
<td>description</td>
<td>Description of the topic</td>
<td>any valid text</td>
</tr>
<tr>
<td>content</td>
<td>Content of the topic, typically encoded as a JSON string</td>
<td>any valid text</td>
</tr>
<tr>
<td>published</td>
<td>If the topic is in a publishable state</td>
<td>boolean</td>
</tr>
<tr>
<td>photo</td>
<td>Object containing a set of image urls associated with the topic</td>
<td>object</td>
</tr>
<tr>
<td>user_id</td>
<td>Id of the user who created the topic</td>
<td>string with valid user id (not validated)</td>
</tr>
<tr>
<td>private</td>
<td></td>
<td>boolean</td>
</tr>
<tr>
<td>application</td>
<td>Application(s) to which the topic belongs. Defaults to <code class="prettyprint">[&quot;rw&quot;]</code>. Read more about this field <a href="index-rw.html#applications">here</a>.</td>
<td>array of strings</td>
</tr>
</tbody></table>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/topics <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
      "data": {
          "type": "topics",
          "attributes": {
              "name": "Cities",
              "summary": "Traditional models of city development can lock us into congestion, sprawl, and inefficient resource use. However, compact, ...",
              "description": "",
              "content": "[{...}]",
              "published": false,
              "photo": {
                  "cover": "...",
                  "thumb": "...",
                  "original": "..."
              },
              "user-id": "eb63867922e16e34ef3ce862",
              "private": true,
              "application":  ["rw"]
          }
      }
  }'</span>
</code></pre><pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"243"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"topics"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities-94bbc472-8970-4d9e-a3f2-d5422b1011e0"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Traditional models of city development can lock us into congestion, sprawl, and inefficient resource use. However, compact, ..."</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[{...}]"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eb63867922e16e34ef3ce862"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="editing-a-topic">Editing a topic</h2>

<aside class="warning">
    <span>Deprecation notice</span>
    <p>
      Topics are deprecated. Use Dashboards instead.
    </p>
</aside>

<p>In order to perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must be logged in and belong to the same application as the topic</li>
<li>the user must comply with <a href="index-rw.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
</ul>

<p>When updating the <code class="prettyprint">application</code> field of a topic, a user cannot add values not associated with their user account.</p>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/topics/&lt;id of the topic&gt; <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
      "data": {
          "attributes": {
              "description": "Topic related with cities."
          }
      }
  }'</span>
</code></pre><pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"243"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"topics"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities-94bbc472-8970-4d9e-a3f2-d5422b1011e0"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Traditional models of city development can lock us into congestion, sprawl, and inefficient resource use. However, compact, ..."</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Topic related with cities."</span><span class="p">,</span><span class="w">
            </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[{...}]"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eb63867922e16e34ef3ce862"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="clone-a-topic">Clone a topic</h2>

<p>Clones an existing topic using its ID.
If the original topic contains functioning widgets, they will be duplicated and the new ids will be used by the new topic.</p>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/topics/10/clone -H <span class="s1">'Authorization: Bearer exampleToken'</span>
</code></pre><pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"224"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"topics"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities-a9cb2c87-f6b6-48cf-9b52-9e0de4fd8d6f"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Traditional models of city development can lock us into congestion, sprawl, and inefficient resource use. However, compact, ..."</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[{</span><span class="se">\"</span><span class="s2">id</span><span class="se">\"</span><span class="s2">:1511952250652,</span><span class="se">\"</span><span class="s2">type</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">widget</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">content</span><span class="se">\"</span><span class="s2">:{</span><span class="se">\"</span><span class="s2">widgetId</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">b9186ce9-78ae-418b-a6d3-d521283ce485</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">categories</span><span class="se">\"</span><span class="s2">:[]}},...}]"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/system/topics/photos/data?1523301918"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/system/topics/photos/data?1523301918"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/system/topics/photos/data?1523301918"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eb63867922e16e34ef3ce862"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
          <h1 id="dashboard">Dashboard</h1>

<h2 id="what-is-a-dashboard">What is a dashboard</h2>

<p>A dashboard contains the information to display a web page belonging to a user.</p>

<h2 id="getting-all-dashboards">Getting all dashboards</h2>

<blockquote>
<p>This endpoint will allow to get all dashboards belonging to a user:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dashboard -H <span class="s1">'Authorization: Bearer &lt;your-token&gt;'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dashboards"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities Dashboard"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities-dashboard"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;p&gt;&lt;/p&gt;</span><span class="se">\n</span><span class="s2">&lt;iframe width=</span><span class="se">\"</span><span class="s2">500</span><span class="se">\"</span><span class="s2"> height=</span><span class="se">\"</span><span class="s2">410</span><span class="se">\"</span><span class="s2"> src=</span><span class="se">\"</span><span class="s2">/embed/widget/5ebeddda-8f3d-4e63-8a52-08e15c3e148c</span><span class="se">\"</span><span class="s2"> frameBorder=</span><span class="se">\"</span><span class="s2">0</span><span class="se">\"</span><span class="s2">&gt;&lt;/iframe&gt;</span><span class="se">\n</span><span class="s2">&lt;p&gt;&lt;/p&gt;</span><span class="se">\n</span><span class="s2">&lt;iframe width=</span><span class="se">\"</span><span class="s2">500</span><span class="se">\"</span><span class="s2"> height=</span><span class="se">\"</span><span class="s2">410</span><span class="se">\"</span><span class="s2"> src=</span><span class="se">\"</span><span class="s2">/embed/widget/73c574b9-f9ab-4f77-87be-651ff8dac5fe</span><span class="se">\"</span><span class="s2"> frameBorder=</span><span class="se">\"</span><span class="s2">0</span><span class="se">\"</span><span class="s2">&gt;&lt;/iframe&gt;</span><span class="se">\n</span><span class="s2">&lt;p&gt;test1&lt;/p&gt;</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eb63867922e16e34ef3ce862"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"production"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"preproduction"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">],</span><span class="w">
                </span><span class="s2">"is-highlighted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"is-featured"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"author-title"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"author-image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/cover/missing.png"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/thumb/missing.png"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/original/missing.png"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://staging-api.globalforestwatch.org/v1/dashboard?page%5Bnumber%5D=1&amp;page%5Bsize%5D=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://staging-api.globalforestwatch.org/v1/dashboard?page%5Bnumber%5D=1&amp;page%5Bsize%5D=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"prev"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://staging-api.globalforestwatch.org/v1/dashboard?page%5Bnumber%5D=2&amp;page%5Bsize%5D=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://staging-api.globalforestwatch.org/v1/dashboard?page%5Bnumber%5D=14&amp;page%5Bsize%5D=10"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">
        </span><span class="s2">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">140</span><span class="p">,</span><span class="w">
        </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="filters">Filters</h3>

<blockquote>
<p>Example request using query string filters:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dashboard?name<span class="o">=</span>text&amp;private<span class="o">=</span><span class="nb">false</span>
</code></pre>
<blockquote>
<p>Deprecated filter syntax:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dashboard?filter[name]<span class="o">=</span>text&amp;filter[private]<span class="o">=</span><span class="nb">false</span>
</code></pre>
<p>Available filters parameters:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td style="text-align: center">Filter dashboards by name (partial matches and case-insensitive supported).</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>published</td>
<td style="text-align: center">Filter dashboards by publishing status (true, false).</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>private</td>
<td style="text-align: center">Filter dashboards by private status (true, false).</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>user</td>
<td style="text-align: center">Filter dashboards by author user id.</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>user.role</td>
<td style="text-align: center">The role of the user who created the dashboard. If the requesting user does not have the ADMIN role, this filter is ignored.</td>
<td style="text-align: right"><code class="prettyprint">ADMIN</code>, <code class="prettyprint">MANAGER</code> or <code class="prettyprint">USER</code></td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">The application to which the dashboard belongs. Read more about this field <a href="index-rw.html#applications">here</a>.</td>
<td style="text-align: right">Text (single value)</td>
</tr>
<tr>
<td>is-highlighted</td>
<td style="text-align: center">Filter dashboards by highlighted ones (true,false).</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>is-featured</td>
<td style="text-align: center">Filter dashboards by featured ones (true,false).</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>author-title</td>
<td style="text-align: center">Filter dashboards by the title of the author of the dashboard.</td>
<td style="text-align: right">Text</td>
</tr>
</tbody></table>

<p><strong>Deprecation notice:</strong> The format <em>filter[filterName]=value</em> which was previously supported for some filters, is now deprecated, in favor of <em>filterName=value</em>.</p>

<h3 id="pagination">Pagination</h3>

<blockquote>
<p>Example request using query string parameters for paging the result:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dashboard?page[size]<span class="o">=</span>15&amp;page[number]<span class="o">=</span>2
</code></pre>
<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Default value</th>
</tr>
</thead><tbody>
<tr>
<td>page[size]</td>
<td style="text-align: center">The number elements per page. The maximum allowed value is 100</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">10</td>
</tr>
<tr>
<td>page[number]</td>
<td style="text-align: center">The page number</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">1</td>
</tr>
</tbody></table>

<h3 id="sorting">Sorting</h3>

<blockquote>
<p>Sorting dashboards</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dashboard?sort<span class="o">=</span>name
</code></pre>
<blockquote>
<p>Sorting dashboards by multiple criteria</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dashboard?sort<span class="o">=</span>name,slug
</code></pre>
<blockquote>
<p>Explicit order of sorting</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dashboard?sort<span class="o">=</span>-name,+slug
</code></pre>
<blockquote>
<p>Sorting dashboards by the role of the user who owns the dashboard</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dashboard?sort<span class="o">=</span>user.role
</code></pre>
<p>The Dashboards service currently supports sorting using the <code class="prettyprint">sort</code> query parameter. Sorting dashboards adheres to the conventions defined in the <a href="index-rw.html#sorting">Sorting guidelines for the RW API</a>, so we strongly recommend reading that section before proceeding. In addition to all dashboard model fields, you can sort the returned results by the name (using <code class="prettyprint">user.name</code>) or role (using <code class="prettyprint">user.role</code>) of the user owner of the dashboard. Keep in mind that sorting by user data is restricted to ADMIN users.</p>

<h3 id="include-related-entities">Include related entities</h3>

<p>When loading dashboards, you can optionally pass an <code class="prettyprint">includes</code> query argument to load additional data.</p>

<h4 id="user">User</h4>

<blockquote>
<p>Example request including the information for the user who owns the dashboard:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dashboard?includes<span class="o">=</span>user
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"86"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dashboards"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test dashboard three"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test-dashboard-three-cd4305e9-e3c8-456b-85a0-32eccb6100e6"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test dashboard three summary"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test dashboard three description"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test dashboard three description"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="s2">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ac9f9e29309063404573a2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="s2">"production"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="s2">"preproduction"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">],</span><span class="w">
          </span><span class="s2">"is-highlighted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"is-featured"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"author-title"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"author-image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/cover/missing.png"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/thumb/missing.png"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/original/missing.png"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.doe@vizzuality.com"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Loads the name and email address of the owner of the dashboard. If you request this issue as an authenticated user with ADMIN role, you will additionally get the owner&rsquo;s role.</p>

<p>If the data is not available (for example, the user has since been deleted), no <code class="prettyprint">user</code> property will be added to the layer object.</p>

<h2 id="getting-a-dashboard-by-its-id">Getting a dashboard by its ID</h2>

<blockquote>
<p>How to get a dashboard by its ID:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET http://api.resourcewatch.org/dashboard/24
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"24"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dashboards"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Traditional models of city development can lock us into congestion, sprawl, and inefficient resource use. However, compact, connected, and efficient growth can help ensure more competitive cities, and provide a better quality of life for citizens.  The decisions that national leaders, local officials, developers, and planners make today will determine how billions of urban cities will live over the next century. Already, half the global population resides in cities. That figure is set to increase to 70 percent by 2050."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[]"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/wri-api-backups/resourcewatch/staging/dashboards/photos/000/000/024/cover/data?1523301918"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/wri-api-backups/resourcewatch/staging/dashboards/photos/000/000/024/thumb/data?1523301918"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/wri-api-backups/resourcewatch/staging/dashboards/photos/000/000/024/original/data?1523301918"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58f63c81bd32c60206ed6b12"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"production"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"preproduction"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"is-highlighted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"is-featured"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"author-title"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"author-image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/cover/missing.png"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/thumb/missing.png"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/original/missing.png"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="creating-a-dashboard">Creating a dashboard</h2>

<blockquote>
<p>Example request for creating a dashboard:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dashboard <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
      "data": {
          "type": "dashboards",
          "attributes": {
              "name": "Cities",
              "summary": "Traditional models of city development can lock us into ...",
              "description": "",
              "content": "[{...}]",
              "published": false,
              "photo": {
                  "cover": "...",
                  "thumb": "...",
                  "original": "..."
              },
              "private": true,
              "production": true,
              "preproduction": false,
              "staging": false,
              "application":  ["rw"],
              "is-highlighted": false,
              "is-featured": false,
              "author-title": "",
              "author-image": @file
          }
      }
  }'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"243"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dashboards"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities-94bbc472-8970-4d9e-a3f2-d5422b1011e0"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Traditional models of city development can lock us into ..."</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[{...}]"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eb63867922e16e34ef3ce862"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"production"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"preproduction"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">],</span><span class="w">
            </span><span class="s2">"is-highlighted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"is-featured"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"author-title"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"author-image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>When creating a dashboard, the <code class="prettyprint">application</code> field should be present and cannot contain any values that are not associated with the creating user&rsquo;s account. If an <code class="prettyprint">application</code> value is not provided, <code class="prettyprint">[&quot;rw&quot;]</code> is used by default, and the process will fail if the user account does not belong to it. Additionally, keep in mind that this endpoint implements role-based access control in accordance with <a href="index-rw.html#role-based-access-control">the RW API role-based access control guidelines</a>.</p>

<p>Supported fields:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Accepted values</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Short name for the dashboard</td>
<td>any valid text</td>
</tr>
<tr>
<td>summary</td>
<td>Summary of the content of the dashboard</td>
<td>any valid text</td>
</tr>
<tr>
<td>description</td>
<td>Description of the dashboard</td>
<td>any valid text</td>
</tr>
<tr>
<td>content</td>
<td>Content of the dashboard, typically encoded as a JSON string</td>
<td>any valid text</td>
</tr>
<tr>
<td>published</td>
<td>If the dashboard is in a publishable state</td>
<td>boolean</td>
</tr>
<tr>
<td>photo</td>
<td>Object containing a set of image urls associated with the dashboard</td>
<td>object</td>
</tr>
<tr>
<td>private</td>
<td>If the dashboard is private or publicly available.</td>
<td>boolean</td>
</tr>
<tr>
<td>production</td>
<td>If the dashboard is available in the production environment.</td>
<td>boolean</td>
</tr>
<tr>
<td>preproduction</td>
<td>If the dashboard is available in the preproduction environment.</td>
<td>boolean</td>
</tr>
<tr>
<td>staging</td>
<td>If the dashboard is available in the staging environment.</td>
<td>boolean</td>
</tr>
<tr>
<td>application</td>
<td>Application(s) to which the dashboard belongs. Defaults to <code class="prettyprint">[&quot;rw&quot;]</code>. Read more about this field <a href="index-rw.html#applications">here</a>.</td>
<td>array of strings</td>
</tr>
<tr>
<td>is-highlighted</td>
<td>If this dashboard is highlighted (<code class="prettyprint">true</code>/<code class="prettyprint">false</code>). Defaults to <code class="prettyprint">false</code>. Only accessible to users with <code class="prettyprint">ADMIN</code> role.</td>
<td>boolean</td>
</tr>
<tr>
<td>is-featured</td>
<td>If this dashboard is featured (<code class="prettyprint">true</code>/<code class="prettyprint">false</code>). Defaults to <code class="prettyprint">false</code>. Can only be set by user with <code class="prettyprint">ADMIN</code> role.</td>
<td>boolean</td>
</tr>
<tr>
<td>author-title</td>
<td>The title of the author of the dashboard.</td>
<td>any valid text</td>
</tr>
<tr>
<td>author-image</td>
<td>File for the image of the author of the dashboard.</td>
<td>valid image file (jpg, jpeg, png)</td>
</tr>
</tbody></table>

<h2 id="editing-a-dashboard">Editing a dashboard</h2>

<blockquote>
<p>Example request for updating a dashboard:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/dashboard/&lt;id of the dashboard&gt; <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
      "data": {
          "attributes": {
              "description": "Dashboard that uses cities"
          }
      }
  }'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"243"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dashboards"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities-94bbc472-8970-4d9e-a3f2-d5422b1011e0"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Traditional models of city development can lock us ..."</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dashboard that uses cities"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[{...}]"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eb63867922e16e34ef3ce862"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"production"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"preproduction"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">],</span><span class="w">
            </span><span class="s2">"is-highlighted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"is-featured"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"author-title"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"author-image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>In order to perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must comply with <a href="index-rw.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
<li>the user must be logged in and belong to the same application as the dashboard</li>
</ul>

<p>When updating the <code class="prettyprint">application</code> field of a dashboard, a user cannot add values not associated with their user account.</p>

<h2 id="delete-dashboard">Delete dashboard</h2>

<blockquote>
<p>Example request for deleting a dashboard:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dashboard/&lt;id of the dashboard&gt; <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>
</code></pre>
<p>In order to perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must comply with <a href="index-rw.html#role-based-access-control">the RW API role-based access control guidelines</a>.</li>
<li>the user must be logged in and belong to the same application as the dashboard</li>
</ul>

<h2 id="clone-dashboard">Clone dashboard</h2>

<blockquote>
<p>Example request for cloning a dashboard:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dashboard/&lt;id&gt;/clone <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "data": {
        "attributes": {
            "name": "Copy of Cities dashboard",
        }
    }
  }'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"224"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dashboards"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Copy of Cities dashboard"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities-a9cb2c87-f6b6-48cf-9b52-9e0de4fd8d6f"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Traditional models of city development can lock us into congestion, sprawl, and inefficient resource use. However, compact, ..."</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[{</span><span class="se">\"</span><span class="s2">id</span><span class="se">\"</span><span class="s2">:1511952250652,</span><span class="se">\"</span><span class="s2">type</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">widget</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">content</span><span class="se">\"</span><span class="s2">:{</span><span class="se">\"</span><span class="s2">widgetId</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">b9186ce9-78ae-418b-a6d3-d521283ce485</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">categories</span><span class="se">\"</span><span class="s2">:[]}},...}]"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/system/dashboards/photos/data?1523301918"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/system/dashboards/photos/data?1523301918"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/system/dashboards/photos/data?1523301918"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1111167922e16e34ef3ce872"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"production"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"preproduction"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">],</span><span class="w">
            </span><span class="s2">"is-highlighted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"is-featured"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"author-title"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"author-image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/cover/missing.png"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/thumb/missing.png"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/original/missing.png"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Clones an existing dashboard using its ID. If the original dashboard contains widgets, they will be duplicated and the new ids will be used by the new dashboard. Data can be provided in the body of the request in order to overwrite the data of the original dashboard. In the example on the side, the <code class="prettyprint">name</code> of the dashboard will be overwritten.</p>

<p>The following attributes can be overwritten by providing new values in the request body:</p>

<ul>
<li><code class="prettyprint">name</code></li>
<li><code class="prettyprint">description</code></li>
<li><code class="prettyprint">content</code></li>
<li><code class="prettyprint">published</code></li>
<li><code class="prettyprint">summary</code></li>
<li><code class="prettyprint">photo</code></li>
<li><code class="prettyprint">private</code></li>
<li><code class="prettyprint">production</code></li>
<li><code class="prettyprint">preproduction</code></li>
<li><code class="prettyprint">staging</code></li>
<li><code class="prettyprint">author-title</code></li>
</ul>

          <h1 id="tasks">Tasks</h1>

<h2 id="what-is-a-task">What is a task?</h2>

<p>In the context of this API, a task is a process in charge of performing certain actions on datasets of the document type.
These actions can be creating a dataset or overwriting its content.</p>

<p>A task may contains the following fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td style="text-align: center">Id of the task</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>type</td>
<td style="text-align: center">Task type - see full list <a href="https://github.com/resource-watch/doc-importer-messages/blob/master/task.messages.js#L4">here</a></td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>message</td>
<td style="text-align: center">Task message, which parametrizes the task</td>
<td style="text-align: right">Object</td>
</tr>
<tr>
<td>status</td>
<td style="text-align: center">Status of the task - see full list <a href="https://github.com/resource-watch/doc-orchestrator/blob/master/app/src/app.constants.js#L3">here</a></td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>reads</td>
<td style="text-align: center">Number of data reads performed by the task</td>
<td style="text-align: right">Number</td>
</tr>
<tr>
<td>writes</td>
<td style="text-align: center">Number of data writes performed by the task</td>
<td style="text-align: right">Number</td>
</tr>
<tr>
<td>index</td>
<td style="text-align: center">Name of the Elasticsearch index used in this task</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>datasetId</td>
<td style="text-align: center">Id of the dataset to which this task relates</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>logs</td>
<td style="text-align: center">List of the individual operations carried out by this task</td>
<td style="text-align: right">Array</td>
</tr>
<tr>
<td>error</td>
<td style="text-align: center">Error message generated should the task fail</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>createdAt</td>
<td style="text-align: center">Date and time in which the task was created</td>
<td style="text-align: right">DateTime</td>
</tr>
<tr>
<td>updatedAt</td>
<td style="text-align: center">Date and time in which the task was last updated</td>
<td style="text-align: right">DateTime</td>
</tr>
</tbody></table>

<p>A task is fundamentally an internal element to the API, and it&rsquo;s visibility and interaction is limited to maintenance and debug actions.
At its core, a task represents a single package that contains:</p>

<ul>
<li>An action to be carried out.</li>
<li>A message that parametrises that action.</li>
<li>A status that identifies the progress stage of the task.</li>
<li>A dataset to which that action should relate.</li>
<li>An Elasticsearch index identifier where the resulting data will be saved.</li>
<li>Counters for read and write operations.</li>
<li>Logs for those operations.</li>
<li>An optional error field that identifies what happened in case of failure.</li>
</ul>

<h2 id="get-all-tasks">Get all tasks</h2>

<p>To obtain all tasks:</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/doc-importer/task
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b02cfd-dabf-4ad0-a04d-5501cf248a0c"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"task"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TASK_CREATE"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b02cfd-dabf-4ad0-a04d-5501cf248a0c"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TASK_CREATE"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"datasetId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65593fee-26e0-4c3c-84b3-cc0921bf8bc1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"fileUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://gfw2-data.s3.amazonaws.com/country-pages/fire_alerts_all.csv"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"csv"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"legend"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                        </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                        </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                        </span><span class="s2">"nested"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"dataPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rows"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SAVED"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"reads"</span><span class="p">:</span><span class="w"> </span><span class="mi">973</span><span class="p">,</span><span class="w">
                </span><span class="s2">"writes"</span><span class="p">:</span><span class="w"> </span><span class="mi">973</span><span class="p">,</span><span class="w">
                </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-20T07:39:31.295Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-20T10:10:07.147Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index_65593fee26e04c3c84b3cc0921bf8bc1_1550648371365"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"datasetId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65593fee-26e0-4c3c-84b3-cc0921bf8bc1"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"logs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a67f2557-9237-4435-82fd-3a0ad64b0292"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATUS_INDEX_CREATED"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"taskId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b02cfd-dabf-4ad0-a04d-5501cf248a0c"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index_65593fee26e04c3c84b3cc0921bf8bc1_1550648371365"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"53ac8e83-167b-4c77-9b61-6642b1764b32"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATUS_READ_DATA"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"taskId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b02cfd-dabf-4ad0-a04d-5501cf248a0c"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">

            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"415ecb4e-ed9a-4b0f-9f8b-7755775b08f5"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"task"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TASK_CREATE"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"415ecb4e-ed9a-4b0f-9f8b-7755775b08f5"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TASK_CREATE"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"datasetId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"638cce8c-3e97-4bdd-b4de-41cd28254370"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"fileUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://gfw2-data.s3.amazonaws.com/country-pages/fire_alerts_all.csv"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"csv"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"legend"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                        </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                        </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                        </span><span class="s2">"nested"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"dataPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rows"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SAVED"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"reads"</span><span class="p">:</span><span class="w"> </span><span class="mi">973</span><span class="p">,</span><span class="w">
                </span><span class="s2">"writes"</span><span class="p">:</span><span class="w"> </span><span class="mi">973</span><span class="p">,</span><span class="w">
                </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-20T07:39:36.421Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-20T10:10:09.175Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index_638cce8c3e974bddb4de41cd28254370_1550652900017"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"datasetId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"638cce8c-3e97-4bdd-b4de-41cd28254370"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"logs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8f5b6b0c-9132-4b5c-b7c4-b58582b3cb0b"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATUS_INDEX_CREATED"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"taskId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"415ecb4e-ed9a-4b0f-9f8b-7755775b08f5"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index_638cce8c3e974bddb4de41cd28254370_1550652900017"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"63c69b2b-31cd-4bdb-9794-f6d4ec155e7b"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATUS_READ_DATA"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"taskId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"415ecb4e-ed9a-4b0f-9f8b-7755775b08f5"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/doc-importer/task?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/doc-importer/task?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/doc-importer/task?page[number]=23&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"prev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/doc-importer/task?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/doc-importer/task?page[number]=2&amp;page[size]=10"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w">
        </span><span class="s2">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">227</span><span class="p">,</span><span class="w">
        </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="pagination">Pagination</h3>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Default value</th>
</tr>
</thead><tbody>
<tr>
<td>page[size]</td>
<td style="text-align: center">The number elements per page. The maximum allowed value is 100</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">10</td>
</tr>
<tr>
<td>page[number]</td>
<td style="text-align: center">The page number</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">1</td>
</tr>
</tbody></table>

<h3 id="filter-params">Filter params</h3>

<p>Available filters:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td style="text-align: center">Task type</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>status</td>
<td style="text-align: center">Task status</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>datasetID</td>
<td style="text-align: center">Id of the dataset to which the task refers</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>createdAt</td>
<td style="text-align: center">Tasks created on the given date</td>
<td style="text-align: right">Date</td>
</tr>
<tr>
<td>updatedAt</td>
<td style="text-align: center">Tasks last updated on the given date</td>
<td style="text-align: right">Date</td>
</tr>
<tr>
<td>createdBefore</td>
<td style="text-align: center">Tasks created before the given date</td>
<td style="text-align: right">Date</td>
</tr>
<tr>
<td>createdAfter</td>
<td style="text-align: center">Tasks created after the given date</td>
<td style="text-align: right">Date</td>
</tr>
<tr>
<td>updatedBefore</td>
<td style="text-align: center">Tasks last updated before the given date</td>
<td style="text-align: right">Date</td>
</tr>
<tr>
<td>updatedAfter</td>
<td style="text-align: center">Tasks last updated after the given date</td>
<td style="text-align: right">Date</td>
</tr>
</tbody></table>

<blockquote>
<p>Return tasks with type TASK_OVERWRITE</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/doc-importer/task?type<span class="o">=</span>TASK_OVERWRITE
</code></pre>
<blockquote>
<p>Return the tasks with status SAVED</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/doc-importer/task?status<span class="o">=</span>SAVED
</code></pre>
<blockquote>
<p>Return the tasks created on Feb 1st 2019</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/doc-importer/task?createdAt<span class="o">=</span>2019-02-01
</code></pre>
<blockquote>
<p>Return the tasks last updated between Jan 2nd and Feb 2nd 2019</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/doc-importer/task?updatedAfter<span class="o">=</span>2019-01-02&amp;updatedBefore<span class="o">=</span>2019-02-02
</code></pre>
<blockquote>
<p>Return the tasks last updated before and Feb 2nd 2019 and with status ERROR</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/doc-importer/task?updatedBefore<span class="o">=</span>2019-02-02&amp;status<span class="o">=</span>ERROR
</code></pre>
<h2 id="get-a-single-task">Get a single task</h2>

<p>To obtain the task:</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/doc-importer/task/55b02cfd-dabf-4ad0-a04d-5501cf248a0c
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b02cfd-dabf-4ad0-a04d-5501cf248a0c"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"task"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TASK_CREATE"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b02cfd-dabf-4ad0-a04d-5501cf248a0c"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TASK_CREATE"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"datasetId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65593fee-26e0-4c3c-84b3-cc0921bf8bc1"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"fileUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://gfw2-data.s3.amazonaws.com/country-pages/fire_alerts_all.csv"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"csv"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"legend"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="s2">"nested"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"dataPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rows"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SAVED"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"reads"</span><span class="p">:</span><span class="w"> </span><span class="mi">973</span><span class="p">,</span><span class="w">
            </span><span class="s2">"writes"</span><span class="p">:</span><span class="w"> </span><span class="mi">973</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-20T07:39:31.295Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-20T10:10:07.147Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index_65593fee26e04c3c84b3cc0921bf8bc1_1550648371365"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"datasetId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65593fee-26e0-4c3c-84b3-cc0921bf8bc1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"logs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a67f2557-9237-4435-82fd-3a0ad64b0292"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATUS_INDEX_CREATED"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"taskId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b02cfd-dabf-4ad0-a04d-5501cf248a0c"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index_65593fee26e04c3c84b3cc0921bf8bc1_1550648371365"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"53ac8e83-167b-4c77-9b61-6642b1764b32"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATUS_READ_DATA"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"taskId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b02cfd-dabf-4ad0-a04d-5501cf248a0c"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="delete-a-task">Delete a task</h2>

<p>You can delete a task if, for example, it is stuck on a running state, but it&rsquo;s not actually running. This should
be considered a &ldquo;only do it if you know what you are doing&rdquo; operation, and requires ADMIN permission.</p>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/doc-importer/task/&lt;task_id&gt; <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>
</code></pre>
          <h1 id="user-management">User management</h1>

<p>The following endpoints expose the RW API&rsquo;s functionality regarding user management. These endpoints will allow you to login, recover a forgotten password, create, edit or delete a user account. We&rsquo;ve already covered the basics of getting a user account in the <a href="#authentication">authentication</a> section, and here we&rsquo;ll dive deeper into all the functionality exposed by these endpoints.</p>

<p>These endpoints have a key difference from most of the endpoint covered so far. The great majority of the RW API endpoints are meant to be used by your applications, and as such produce JSON responses, which are easily interpreted by computers. However, some of the functionality we&rsquo;ll cover in this section is meant to be used only or also by humans, making JSON a less than ideal response format. </p>

<p>Some (but not all) of the endpoints documented here will produce a response in either JSON or HTML format, depending on the value you provide on the <code class="prettyprint">Content-type</code> HTTP request header. 
Use <code class="prettyprint">Content-Type: application/json</code> if you are calling the endpoint from an application, and would like to get a JSON formatted response. 
If you are accessing these endpoints from a browser, it will typically generate a request with the <code class="prettyprint">Content-Type: text/html</code> header, in which case the reply will be in HTML format.</p>

<p>Keep in mind that not all endpoints support both formats, and will output either HTML or JSON, no matter which <code class="prettyprint">Content-Type</code> value you provide.</p>

<h2 id="general-notes-on-rw-api-users">General notes on RW API users</h2>

<p>User accounts in the RW API work pretty much like you would expect: you create a user account, login with it, and use it on your day-to-day interactions to access certain actions and associate certain RW API resources with it.</p>

<p>Besides authentication, user accounts are also used for authorization. Authorization is implemented on a per-service basis, but is commonly built on top of 3 elements associated with your a user account:</p>

<ul>
<li><code class="prettyprint">id</code></li>
<li><code class="prettyprint">role</code></li>
<li><code class="prettyprint">application</code></li>
</ul>

<p><code class="prettyprint">id</code> is a unique identifier of your account. Certain actions may be limited to specific users, typically in the context of a given resource being associated directly with a specific user <code class="prettyprint">id</code>.</p>

<p><code class="prettyprint">role</code> can be one of 3 values: <code class="prettyprint">USER</code>, <code class="prettyprint">MANAGER</code> and <code class="prettyprint">ADMIN</code> and it is usually used for role-based access control - read more about this field in the <a href="index-rw.html#user-roles">User roles concept documentation</a>.</p>

<p><code class="prettyprint">application</code> is a list of keys meant to identify the different client applications that are built using the RW API. It&rsquo;s present not only on user accounts, but also on many of the resources found on the RW API, either as a single value or as a list of values. Typically, in order to manipulate a given resource, that resource and the user account must have at least one overlapping <code class="prettyprint">application</code> value. You can find out more about how the <code class="prettyprint">application</code> field works <a href="index-rw.html#applications">here</a>.</p>

<p>Keep in mind that it&rsquo;s up to each individual RW API service (dataset, widget, layer, etc) to define how they restrict or allow actions based on these or other factors, so the examples above may not be true for all cases. Refer to the documentation of each resource and endpoint for more details on restrictions they may have regarding user accounts and their properties.</p>

<h2 id="user-management-and-applications">User management and applications</h2>

<p>As we&rsquo;ve covered in previous sections, several RW API resources, like users, datasets or widgets, are associated with one or more applications. Applications are a way to identify the different tools that rely on the RW API, and are used to make resource management easier.</p>

<p>The user management service can also models its behavior based on the application that&rsquo;s making use of it - this can be controlled by the <code class="prettyprint">origin</code> query parameter. This parameter can be passed on every request, or on the first request only, if you are relying on cookie-based sessions. In it, you can identify the application using the RW API. If it&rsquo;s a known application, certain elements will be adjusted:</p>

<ul>
<li>Logo and color scheme on HTML pages and emails.</li>
<li>Fallback redirects on login.</li>
<li>Available 3rd party authentication mechanisms and associated accounts on those platforms.</li>
</ul>

<p>If you use an <code class="prettyprint">origin</code> application that&rsquo;s not known to the RW API, you will see a fallback configuration of these elements, and 3rd party login will be disabled. If you&rsquo;d like your application to be supported, please <a href="https://resourcewatch.org/about/contact-us">contact us</a> - we&rsquo;d love to hear about how the RW API can help your projects.</p>

<h2 id="login-email-password">Login (email + password)</h2>

<p>Login endpoints support both HTML and JSON output formats, depending on the <code class="prettyprint">Content-type</code> provided in the request. Keep in mind that HTML-based requests will result in redirects - for example, after successfully logging in, you will be taken to <code class="prettyprint">/auth/success</code> - while JSON based requests will simply return the matching HTTP code - 200 in case of a successful login.</p>

<h3 id="get-lt-base-api-url-gt-auth">GET <code class="prettyprint">&lt;BASE API URL&gt;/auth/</code></h3>

<p>Convenience URL that redirects to <code class="prettyprint">&lt;BASE API URL&gt;/auth/login</code> - the HTML login page.</p>

<h3 id="get-lt-base-api-url-gt-auth-login">GET <code class="prettyprint">&lt;BASE API URL&gt;/auth/login</code></h3>

<p>HTML page that displays the login, registration and password reset links. This is the most common entry point when using the HTML UI provided by the RW API for user management.</p>

<h3 id="post-lt-base-api-url-gt-auth-login">POST <code class="prettyprint">&lt;BASE API URL&gt;/auth/login</code></h3>

<blockquote>
<p>Email + password based login - JSON format</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/auth/login"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "email":"your-email@provider.com",
    "password":"potato"
}'</span>
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your-email@provider.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-15T04:46:35.313Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"extraUserData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"rw"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjViZWNmYTJiNjdkYTBkM2VjMDdhMjdmNiIsInJvbGUiOiJVU0VSIiwicHJvdmlkZXIiOiJsb2NhbCIsImVtYWlsIjoidGVzdEBleGFtcGxlLmNvbSIsImV4dHJhVXNlckRhdGEiOnsiYXBwcyI6WyJydyJdfSwiY3JlYXRlZEF0IjoxNTQzMzE1NzMxNzcwLCJpYXQiOjE1NDMzMTU3MzF9.kIdkSOb7mCMOxE2ipqVOBrK7IefAjLDhaPG9DT1qvCw"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Endpoint for email + password based login.</p>

<p>For HTML requests, it will redirect to either <code class="prettyprint">&lt;BASE API URL&gt;/auth/success</code> or <code class="prettyprint">&lt;BASE API URL&gt;/auth/fail</code> depending on whether the login was successful or not. If successful, the HTTP reply will have a session cookie that may be used in subsequent requests. An optional <code class="prettyprint">callbackUrl</code> query parameter can be provided, in which case the user will be redirected to that URL in case of login success. </p>

<p>For JSON requests, in case of successful logins, the user details will be returned as a JSON object.</p>

<p><strong>Errors</strong></p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Invalid email or password.</td>
<td>Login credentials are missing or incorrect.</td>
</tr>
</tbody></table>

<h3 id="get-lt-base-api-url-gt-auth-fail">GET <code class="prettyprint">&lt;BASE API URL&gt;/auth/fail</code></h3>

<p>Displays login errors for HTML requests. Not supported on JSON requests.</p>

<h3 id="get-lt-base-api-url-gt-auth-check-logged">GET <code class="prettyprint">&lt;BASE API URL&gt;/auth/check-logged</code></h3>

<blockquote>
<p>Check if the user is logged</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/auth/check-logged"</span> <span class="se">\</span>
    -H <span class="s1">'Cookie: &lt;your cookie values&gt;'</span>
</code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5bfd237767b3176dd63f2eb7"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your-email@provider.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-27T10:59:03.531Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"extraUserData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Checks if you are logged in. This is typically used to determine if a session has been established between the the user&rsquo;s browser and the RW API. </p>

<p><strong>Errors</strong></p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Not authenticated.</td>
<td>You are not logged in.</td>
</tr>
</tbody></table>

<h3 id="get-lt-base-api-url-gt-auth-success">GET <code class="prettyprint">&lt;BASE API URL&gt;/auth/success</code></h3>

<p>Successful login page for HTML requests. Not supported on JSON requests.</p>

<h3 id="get-lt-base-api-url-gt-auth-logout">GET <code class="prettyprint">&lt;BASE API URL&gt;/auth/logout</code></h3>

<p>Login invalidation endpoint. Only invalidates the session cookie set on login. If using JWT token based authentication, this endpoint will NOT invalidate the token.</p>

<h3 id="get-lt-base-api-url-gt-auth-generate-token">GET <code class="prettyprint">&lt;BASE API URL&gt;/auth/generate-token</code></h3>

<blockquote>
<p>Generate the user&rsquo;s JWT token</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/auth/generate-token"</span> <span class="se">\</span>
    -H <span class="s1">'Cookie: &lt;your cookie values&gt;'</span>
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjViZWNmYTJiNjdkYTBkM2VjMDdhMjdmNiIsInJvbGUiOiJVU0VSIiwicHJvdmlkZXIiOiJsb2NhbCIsImVtYWlsIjoidGVzdEBleGFtcGxlLmNvbSIsImV4dHJhVXNlckRhdGEiOnsiYXBwcyI6WyJydyJdfSwiY3JlYXRlZEF0IjoxNTQzMzE1NzMxNzcwLCJpYXQiOjE1NDMzMTU3MzF9.kIdkSOb7mCMOxE2ipqVOBrK7IefAjLDhaPG9DT1qvCw"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Generates a JWT token for the current user session. This is useful when using the HTML UI through a browser, where a session is established using a cookie returned on login. This cookie authenticates the user, and allows retrieving the token.</p>

<p><strong>Errors</strong></p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Not authenticated.</td>
<td>You are not logged in.</td>
</tr>
</tbody></table>

<h2 id="login-3rd-party-oauth">Login (3rd party oauth)</h2>

<p>Besides its own email + password login mechanism, that you can interact with and build your own UI on top of, the RW API also provides authentication using 3rd party accounts, like Facebook, Twitter, Apple or Google. These 4 authentication mechanisms use <a href="https://en.wikipedia.org/wiki/OAuth">OAuth</a> access delegation, meaning users can use their accounts on these platforms to access the RW API. For each mechanism, users will be informed, when logging in, which data the RW API requires to provide this access.</p>

<p>For each provider, there&rsquo;s a corresponding endpoint that starts the authentication flow. These endpoints simply redirect the user to the respective provider page, along with some data that allows the provider to contact the RW API when the login process is finished. You can forward users to these endpoints if, for example, you want to have your own login links on your UI.</p>

<p>Keep in mind that, depending on the <code class="prettyprint">origin</code> application you specify, different Twitter, Facebook or Google applications will be used. Also, not all <code class="prettyprint">origin</code> applications support all 3 providers.</p>

<h3 id="3rd-party-authentication-using-twitter">3rd party authentication using Twitter</h3>

<ul>
<li>GET <code class="prettyprint">&lt;BASE API URL&gt;/auth/twitter</code> - Starts authentication using the configured Twitter settings</li>
<li>GET <code class="prettyprint">&lt;BASE API URL&gt;/auth/twitter/callback</code> - Callback used once Twitter auth is done</li>
</ul>

<h3 id="3rd-party-authentication-using-google">3rd party authentication using Google</h3>

<ul>
<li>GET <code class="prettyprint">&lt;BASE API URL&gt;/auth/google</code> - Starts authentication using the configured Google settings</li>
<li>GET <code class="prettyprint">&lt;BASE API URL&gt;/auth/google/callback</code> - Callback used once Google auth is done</li>
<li>GET <code class="prettyprint">&lt;BASE API URL&gt;/auth/google/token?access_token=&lt;Google token&gt;</code> - Endpoint that expects the Google token used by the API to validate the user session. It</li>
</ul>

<h3 id="3rd-party-authentication-using-facebook">3rd party authentication using Facebook</h3>

<ul>
<li>GET <code class="prettyprint">&lt;BASE API URL&gt;/auth/facebook</code> - Starts authentication using the configured Facebook settings</li>
<li>GET <code class="prettyprint">&lt;BASE API URL&gt;/auth/facebook/callback</code> - Callback used once Facebook auth is done</li>
<li>GET <code class="prettyprint">&lt;BASE API URL&gt;/auth/facebook/token?access_token=&lt;Facebook token&gt;</code> - Endpoint that expects the Facebook token used by the API to validate the user session.</li>
</ul>

<h3 id="3rd-party-authentication-using-apple">3rd party authentication using Apple</h3>

<ul>
<li>GET <code class="prettyprint">&lt;BASE API URL&gt;/auth/apple</code> - Starts authentication using the configured Apple settings</li>
<li>POST <code class="prettyprint">&lt;BASE API URL&gt;/auth/apple/callback</code> - Callback used once Apple auth is done</li>
<li>GET <code class="prettyprint">&lt;BASE API URL&gt;/auth/apple/token?access_token=&lt;Apple JWT token&gt;</code> - Endpoint that expects the Apple JWT token obtained by the user while authenticating using another application. It validates that token using Apple&rsquo;s services, and if valid, creates/updates the user&rsquo;s RW API account. It returns a RW API JWT token.</li>
</ul>

<h2 id="registration">Registration</h2>

<p>Registration endpoints support both HTML and JSON output formats, depending on the <code class="prettyprint">Content-type</code> provided in the request.</p>

<h3 id="view-the-registration-page">View the registration page</h3>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/auth/sign-up"</span>
</code></pre>
<p>Account creation page, for accounts using email + password based login for HTML requests. Not supported on JSON requests.</p>

<h3 id="register-a-new-user-account">Register a new user account</h3>

<blockquote>
<p>Account creation using email + password</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/auth/sign-up"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "email":"your-email@provider.com",
    "password":"potato",
    "repeatPassword":"potato",
    "apps": ["rw"]
}'</span>
</code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5bfd237767b3176dd63f2eb7"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your-email@provider.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-27T10:59:03.531Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"extraUserData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Account creation using email + password with a user defined origin app</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/auth/sign-up?origin=rw"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "email":"your-email@provider.com",
    "password":"potato",
    "repeatPassword":"potato",
    "apps": ["rw"]
}'</span>
</code></pre>
<p>Account creation endpoint, for accounts using email + password based login for both HTML and JSON requests.</p>

<p>The combination of both <code class="prettyprint">user email</code> and <code class="prettyprint">provider</code> must be unique - a given email address may be associated with multiple, non-related user accounts by using different authentication providers (email+password, facebook, twitter, apple, etc).</p>

<p>For HTML requests, it will display a message informing about any validation error, or informing the user in case of success.</p>

<p>For JSON requests, successful logins will return a JSON object containing the details of the user.</p>

<p>Keep in mind that this endpoint creates a <strong>deactivated</strong> user account. A successful call to this endpoint send an email to the user, with a link that the user must click in order to confirm their account. Once confirmed using this process, the user account becomes activated and fully functional, and the user will be able to log in.</p>

<p>The email sent to the user will have the identity of the <code class="prettyprint">origin</code> app provided on the request, with a system-wide fallback (GFW) being used in case none is provided.</p>

<p>While optional, it&rsquo;s highly recommended that you specify which apps the user will be granted access to, as most API operation validate the user&rsquo;s apps match datasets, widgets, etc. All accounts created this way will have the <code class="prettyprint">USER</code> role.</p>

<p><strong>Errors</strong></p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>422</td>
<td>Email exists.</td>
<td>An account already exists for the provided email address.</td>
</tr>
<tr>
<td>422</td>
<td>Email, Password and Repeat password are required.</td>
<td>You are missing one of the required fields.</td>
</tr>
</tbody></table>

<h3 id="confirm-user-account">Confirm user account</h3>

<blockquote>
<p>JSON Request:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/auth/confirm/:token"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>
</code></pre>
<blockquote>
<p>JSON Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadc495eae7358322dd64b"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"info@vizzuality.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-31T13:06:17.676Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-31T13:06:17.676Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"extraUserData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Request with callback:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/auth/confirm/:token?callbackUrl=https://your-app.com"</span>
</code></pre>
<p>Endpoint used in the user validation email to confirm the address upon registration.</p>

<p>It accepts an optional <code class="prettyprint">callbackUrl</code> query parameter with an URL to which the user will be redirect if the confirmation succeeds.</p>

<p>Should no <code class="prettyprint">callbackUrl</code> be provided, the user is redirected to an URL based on the first application associated to their user account - see <code class="prettyprint">ct-oauth-plugin</code> configuration for more info.</p>

<p>Should that application have no configured redirect URL, or the user have no configured app, they are redirect to a platform-wide default URL - see <code class="prettyprint">ct-oauth-plugin</code> configuration for more info.</p>

<h2 id="password-recovery">Password recovery</h2>

<p>Password recovery endpoints support both HTML and JSON output formats, depending on the <code class="prettyprint">Content-type</code> provided in the request. These can be used either as part of your application (for example, if you want your UI to have these features built in) or as a standalone, end user facing interface (for applications that prefer to rely on the existing UI elements provided by the RW API).</p>

<h3 id="get-lt-base-api-url-gt-auth-reset-password">GET <code class="prettyprint">&lt;BASE API URL&gt;/auth/reset-password</code></h3>

<p>Displays the password reset form HTML page.</p>

<h3 id="post-lt-base-api-url-gt-auth-reset-password">POST <code class="prettyprint">&lt;BASE API URL&gt;/auth/reset-password</code></h3>

<blockquote>
<p>Request a password reset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/auth/reset-password"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "email":"your-email@provider.com"
}'</span>
</code></pre>
<blockquote>
<p>Response (JSON)</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email sent"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Endpoint where the password reset request is sent. If an account associated with the provided email address exists, a message will be sent to it with a link that will allow the user to reset their account&rsquo;s password. That link will be valid for 24 hours.</p>

<p>Note that, for security reasons, if no account associated with the provided email address exists, the output will be the same.  </p>

<p><strong>Errors</strong></p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>422</td>
<td>Mail required.</td>
<td>You need to specify the email address in the request body.</td>
</tr>
</tbody></table>

<h3 id="get-lt-base-api-url-gt-auth-reset-password-token">GET <code class="prettyprint">&lt;BASE API URL&gt;/auth/reset-password/:token</code></h3>

<p>Endpoint used when the user clicks the link sent in the reset password email. This endpoint is meant to be used only by the end user.</p>

<p><strong>Errors</strong></p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>422</td>
<td>Token expired.</td>
<td>The reset password link is more than 24 hours old and is no longer valid.</td>
</tr>
</tbody></table>

<h3 id="post-lt-base-api-url-gt-auth-reset-password-token">POST <code class="prettyprint">&lt;BASE API URL&gt;/auth/reset-password/:token</code></h3>

<blockquote>
<p>New password submission</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.resourcewatch.org/auth/reset-password/&lt;email token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "password":"potato",
    "repeatPassword":"potato"
}'</span>
</code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"local"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadb0adf24534d1ad05dfb"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.user@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"extraUserData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"gfw"</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-31T13:00:58.191Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-31T13:00:58.191Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Endpoint used to submit the new password.</p>

<p>For HTML requests, it will redirect the user to the configured redirect URL on success, or return to the &ldquo;Reset your password&rdquo; form on error.</p>

<p>For JSON requests, it will return the user object on success, or a JSON object containing details in case of error.</p>

<p><strong>Errors</strong></p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>422</td>
<td>Token expired.</td>
<td>The reset password link is more than 24 hours old and is no longer valid.</td>
</tr>
<tr>
<td>422</td>
<td>Password and Repeat password are required.</td>
<td>You need to specify both the <code class="prettyprint">password</code> and the <code class="prettyprint">repeatPassword</code> values.</td>
</tr>
<tr>
<td>422</td>
<td>Password and Repeat password not equal.</td>
<td>You need to specify equal <code class="prettyprint">password</code> and <code class="prettyprint">repeatPassword</code> values.</td>
</tr>
</tbody></table>

<h2 id="user-details-management">User details management</h2>

<p>This section covers endpoints that focus on retrieving, modifying or deleting user accounts. Unlike previous endpoints, these are meant to be consumed by applications, and will always produce a JSON response.</p>

<h3 id="getting-all-users">Getting all users</h3>

<blockquote>
<p>Lists all currently active users belonging to the same apps as the requester</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/auth/user"</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
             </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5d2fadb3adf1dc74d2ad05dfb"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.doe@vizzuality.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-31T13:00:58.191Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-31T13:00:58.191Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"extraUserData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
     </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="s2">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/auth/user?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/auth/user?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/auth/user?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"prev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/auth/user?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/auth/user?page[number]=1&amp;page[size]=10"</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="s2">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
         </span><span class="s2">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
         </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
     </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint allows users with <code class="prettyprint">ADMIN</code> role to list and filter existing user accounts. Through this endpoint, only 3rd party-based and confirmed email-based user accounts are listed - user accounts that have not been confirmed will not be listed. It&rsquo;s also important to keep in mind that, by default, only users belonging to the same apps as the requesting user will be shown - you can use <a href="#filters337">filters</a> to modify this behavior.</p>

<p><strong>Errors</strong></p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Not authenticated.</td>
<td>You need to be logged in to use this endpoint.</td>
</tr>
</tbody></table>

<h4 id="pagination">Pagination</h4>

<blockquote>
<p>Custom pagination: load page 2 using 25 results per page</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/auth/user?page[number]=2&amp;page[size]=25"</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
</code></pre>
<p>By default, users are listed in pages of 10 results each, and the first page is loaded. However, you can customize this behavior using the following query parameters:  </p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Default</th>
</tr>
</thead><tbody>
<tr>
<td>page[size]</td>
<td style="text-align: center">The number elements per page. Values above 100 are not officially supported.</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">10</td>
</tr>
<tr>
<td>page[number]</td>
<td style="text-align: center">The page number</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">1</td>
</tr>
</tbody></table>

<h4 id="filters">Filters</h4>

<blockquote>
<p>List users with the ADMIN role (and associated with the current user&rsquo;s app)</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/auth/user?role=ADMIN"</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
</code></pre>
<blockquote>
<p>List users with the ADMIN role and associated with either <code class="prettyprint">gfw</code> or <code class="prettyprint">rw</code> apps</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/auth/user?role=ADMIN&amp;app=gfw,rw"</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
             </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5d2fadb3adf1dc74d2ad05dfb"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.doe@vizzuality.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-31T13:00:58.191Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-31T13:00:58.191Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"extraUserData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
     </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="s2">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/auth/user?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/auth/user?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/auth/user?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"prev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/auth/user?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/auth/user?page[number]=1&amp;page[size]=10"</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="s2">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
         </span><span class="s2">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
         </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
     </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The users list provides a set of parameters that you can use to tailor your users listing. Please note that filtering users adheres to the conventions defined in the <a href="index-rw.html#filtering">Filter guidelines for the RW API</a>, so we strongly recommend reading that section before proceeding. in addition to these conventions, you can use the following fields as filters supported by the users list endpoint:</p>

<table><thead>
<tr>
<th>Filter</th>
<th>Description</th>
<th>Type</th>
<th>Expected values</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Filter returned users by their name.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>email</td>
<td>Filter returned users by their email address. Keep in mind that user accounts that rely on 3rd party authentication mechanisms may not have an email address.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>provider</td>
<td>Filter returned users by their provider.</td>
<td>String</td>
<td><code class="prettyprint">local</code>, <code class="prettyprint">google</code>, <code class="prettyprint">twitter</code>, <code class="prettyprint">facebook</code> or <code class="prettyprint">apple</code></td>
</tr>
<tr>
<td>role</td>
<td>Filter returned users by their role.</td>
<td>String</td>
<td><code class="prettyprint">USER</code>, <code class="prettyprint">MANAGER</code> or <code class="prettyprint">ADMIN</code></td>
</tr>
<tr>
<td>app</td>
<td>Filter returned users by their app. Multiple values can be passed, separated by commas, in which case any user associated with at least one of the applications will be returned. Pass <code class="prettyprint">all</code> to show users for all apps.</td>
<td>String</td>
<td>any valid text</td>
</tr>
</tbody></table>

<h3 id="get-the-current-user">Get the current user</h3>

<blockquote>
<p>Shows info for user currently logged in</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/auth/user/me"</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
</code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"local"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadb0adf24534d1ad05dfb"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.user@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"extraUserData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"gfw"</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-31T13:00:58.191Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-31T13:00:58.191Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint allows you to get the details of the user account associated with the current token. It&rsquo;s available to all authenticated users.</p>

<p><strong>Errors</strong></p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Not authenticated.</td>
<td>You need to be logged in to use this endpoint.</td>
</tr>
</tbody></table>

<h3 id="get-a-user-by-id">Get a user by id</h3>

<blockquote>
<p>Shows info for user with the given id</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.resourcewatch.org/auth/user/&lt;user_id&gt;"</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
</code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"local"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbadb0adf24534d1ad05dfb"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.user@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"extraUserData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"gfw"</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-31T13:00:58.191Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-31T13:00:58.191Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint allows you to get the details of the user account associated with the current token. It&rsquo;s available to users with role <code class="prettyprint">ADMIN</code>.</p>

<p><strong>Errors</strong></p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Not authenticated.</td>
<td>You need to be logged in to use this endpoint.</td>
</tr>
<tr>
<td>403</td>
<td>Not authorized.</td>
<td>You need to have the <code class="prettyprint">ADMIN</code> role to use this endpoint.</td>
</tr>
</tbody></table>

<h3 id="update-your-user-account-details">Update your user account details</h3>

<blockquote>
<p>Updates current user details</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH <span class="s2">"https://api.resourcewatch.org/auth/user/me"</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
 <span class="s1">'{
    "name":"new-name",
    "photo": "https://photo-url.com",
    "extraUserData" : {
        apps: ["rw", "gfw"]
    },
    "role": "MANAGER"
}'</span>
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57bc2611f098ce9800798688"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new-name"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"photo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://photo-url.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-13T10:45:46.368Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-13T10:45:46.368Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MANAGER"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"extraUserData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
           </span><span class="s2">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">,</span><span class="w"> </span><span class="s2">"gfw"</span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoints allows updating your user account details. It&rsquo;s available to any logged in user, allowing them to modify the following fields:</p>

<ul>
<li><code class="prettyprint">name</code></li>
<li><code class="prettyprint">photo</code></li>
<li><code class="prettyprint">extraUserData.apps</code> (only allowed for users with <code class="prettyprint">ADMIN</code> role)</li>
<li><code class="prettyprint">role</code> (only allowed for users with <code class="prettyprint">ADMIN</code> role)</li>
</ul>

<p>The response will contain the user details, reflecting the applied changes.</p>

<aside class="notice">
Updating your account details may invalidate your token and cause your apps to stop working.
</aside>

<p><strong>Errors</strong></p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Not authenticated.</td>
<td>You need to be logged in to use this endpoint.</td>
</tr>
</tbody></table>

<h3 id="update-another-user-39-s-account-details">Update another user&rsquo;s account details</h3>

<blockquote>
<p>Updates details of user given its id</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH <span class="s2">"https://api.resourcewatch.org/auth/user/57bc2611f098ce9800798688"</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
 <span class="s1">'{
    "name":"new-name",
    "photo": "https://photo-url.com",
    "extraUserData" : {
        apps: ["rw", "gfw"]
    },
    "role": "MANAGER"
}'</span>
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57bc2611f098ce9800798688"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new-name"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"photo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://photo-url.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-13T10:45:46.368Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-13T10:45:46.368Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MANAGER"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"extraUserData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
           </span><span class="s2">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">,</span><span class="w"> </span><span class="s2">"gfw"</span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoints allows updating the user account details of another user. It&rsquo;s available to users with the <code class="prettyprint">ADMIN</code> role, allowing them to modify the following fields:</p>

<ul>
<li><code class="prettyprint">name</code></li>
<li><code class="prettyprint">photo</code></li>
<li><code class="prettyprint">extraUserData.apps</code></li>
<li><code class="prettyprint">role</code></li>
</ul>

<p>The response will contain the user details, reflecting the applied changes.</p>

<aside class="notice">
Updating a user&rsquo;s account details may invalidate their token and cause their apps to stop working.
</aside>

<p><strong>Errors</strong></p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Not authenticated.</td>
<td>You need to be logged in to use this endpoint.</td>
</tr>
<tr>
<td>403</td>
<td>Not authorized.</td>
<td>You need to have the <code class="prettyprint">ADMIN</code> role to use this endpoint.</td>
</tr>
</tbody></table>

<h3 id="deleting-a-user">Deleting a user</h3>

<blockquote>
<p>Deletes a user by its id</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE <span class="s2">"https://api.resourcewatch.org/auth/user/&lt;user_id&gt;"</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57bc2611f098ce9800798688"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new-name"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"photo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://photo-url.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-13T10:45:46.368Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-13T10:45:46.368Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MANAGER"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"extraUserData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
           </span><span class="s2">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">,</span><span class="w"> </span><span class="s2">"gfw"</span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoints deletes the user account with the given id. It&rsquo;s available to users with the <code class="prettyprint">ADMIN</code> role. The response will contain the details of the user account that was deleted.</p>

<aside class="notice">
This action only deletes the user account. Any resources (datasets, subscriptions, etc) that may be associated with this given user account are not modified or deleted.
</aside>

          <h1 id="microservices">Microservices</h1>

<p>A list of information related to the microservices</p>

<aside class="notice">
    These services are only available to ADMIN users.
</aside>

<h2 id="list-all-registered-microservices">List all registered microservices</h2>

<p>To obtain a list of all the registered microservices:</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/api/v1/microservice <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"infoStatus"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"numRetries"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"lastCheck"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-04T14:05:30.748Z"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"pathInfo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/info"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"pathLive"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/ping"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"cache"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"uncache"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"dataset"</span><span class="w">

        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"id"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dataset"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://dataset.default.svc.cluster.local:3000"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"endpoints"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"redirect"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/v1/dataset"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/dataset"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"redirect"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/v1/dataset/find-by-ids"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/dataset/find-by-ids"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-24T13:04:46.728Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"swagger"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{}"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"infoStatus"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"numRetries"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"lastCheck"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-04T14:05:30.778Z"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"pathInfo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/info"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"pathLive"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/ping"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"cache"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"layer"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"uncache"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"layer"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dataset"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"layer"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5aa667d1aee7ae16fb419c23"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Layer"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://layer.default.svc.cluster.local:6000"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"endpoints"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"redirect"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/v1/layer"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/layer"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"redirect"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/v1/dataset/:dataset/layer"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/dataset/:dataset/layer"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"redirect"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/v1/dataset/:dataset/layer"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/dataset/:dataset/layer"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-08T12:07:38.014Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"swagger"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{}"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<h3 id="filters">Filters</h3>

<p>The microservice list provided by the endpoint can be filtered with the following attributes:</p>

<table><thead>
<tr>
<th>Filter</th>
<th>Description</th>
<th>Accepted values</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>Status of the microservice</td>
<td><code class="prettyprint">pending</code>, <code class="prettyprint">active</code> or <code class="prettyprint">error</code></td>
</tr>
<tr>
<td>url</td>
<td>Internal URL of the microservice within the cluster</td>
<td>String</td>
</tr>
</tbody></table>

<blockquote>
<p>Filtering by status</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/api/v1/microservice?status<span class="o">=</span>active <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<h2 id="get-a-microservice-by-id">Get a microservice by id</h2>

<p>To obtain the details of a single microservice, use:</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/api/v1/microservice/5aa667d1aee7ae16fb419c23 <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5aa667d1aee7ae16fb419c23"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"infoStatus"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"numRetries"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"lastCheck"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-04T14:05:30.778Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"pathInfo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/info"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pathLive"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/ping"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cache"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"layer"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"uncache"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"layer"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"dataset"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"layer"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Layer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://layer.default.svc.cluster.local:6000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"endpoints"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"redirect"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/v1/layer"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/layer"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"redirect"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/v1/dataset/:dataset/layer"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/dataset/:dataset/layer"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"redirect"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/v1/dataset/:dataset/layer"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/dataset/:dataset/layer"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-08T12:07:38.014Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"swagger"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{}"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="delete-microservice">Delete microservice</h2>

<p>To remove a microservice:</p>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/api/v1/microservice/:id <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<p>This will delete the microservice and its associated endpoints from the gateway&rsquo;s database. It does not remove the actual running microservice application instance, which may re-register and become available once again.</p>

          <h1 id="troubleshooting">Troubleshooting</h1>

<p>This section is meant to help you deal with common pitfalls of everyday usage of the API.</p>

<h2 id="authentication-and-authorization">Authentication and authorization</h2>

<h3 id="401-unauthorized">401 Unauthorized</h3>

<p><code class="prettyprint">401 Unauthorized</code> errors mean that the API did not receive the necessary data to identify who you are. You may not be logged in, there may be an issue with your usage of the user token, or the token you are using may be in the wrong header.</p>

<p>Start by following the steps <a href="#how-to-generate-your-private-token">detailed here for obtaining your private token</a>. At the end you should have your <a href="https://en.wikipedia.org/wiki/JSON_Web_Token">JWT token</a>, a large string of random-looking characters.</p>

<p>If you are sure you have an up-to-date token but are still experiencing <code class="prettyprint">401 Unauthorized</code> errors, there may be an issue with the way the token is transmitted to the API. Be sure to use in <code class="prettyprint">Authorization</code> header and <code class="prettyprint">Bearer &lt;your token goes here&gt;</code> value.</p>

<h3 id="403-forbidden">403 Forbidden</h3>

<p>A <code class="prettyprint">403 Forbidden</code> error means that you are identified as a valid user, but you do not have the required permissions for the action you are trying to perform. Common scenarios where this happens are:
- You do not have the required user <code class="prettyprint">ROLE</code> to carry out that operation.
- You may be trying to operate on a resource that belongs to a different <code class="prettyprint">application</code> than the ones you are associated with. Read more about how the <code class="prettyprint">application</code> field works <a href="index-rw.html#applications">here</a>.
- Certain resources have a concept of <code class="prettyprint">owner</code> with certain actions being exclusively available to that particular user.</p>

<p>Check the specific documentation for the endpoint you are trying to use for more details on its behavior. Conditions that trigger a <code class="prettyprint">403 Forbidden</code> error will often vary beyond the ones listed above.</p>

          <h1 id="errors">Errors</h1>

<p>The Resource Watch API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request is incomplete or contains errors</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your API key is incorrect</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden &ndash; The kitten requested is hidden for administrators only</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified kitten could not be found</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed &ndash; You tried to access a kitten with an invalid method</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable &ndash; You requested a format that is not json</td>
</tr>
<tr>
<td>410</td>
<td>Gone &ndash; The kitten requested has been removed from our servers</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests &ndash; You&rsquo;re requesting too many kittens! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

          <h1 id="api-attribution-requirements">API attribution requirements</h1>

<p>By using the Resource Watch API, you agree to the Resource Watch <a href="//resourcewatch.org/terms-of-service">terms of service</a> and <a href="//resourcewatch.org/api-attribution-requirements">attribution requirements</a>.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
          </div>
      </div>
    </div>
  </body>
</html>
